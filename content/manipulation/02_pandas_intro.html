<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lino Galiana">
<meta name="dcterms.date" content="2024-06-17">
<meta name="description" content="Pandas est l’élément central de l’écosystème Python pour la data science. Ce chapitre présente les premières manipulations de données qu’on peut faire grâce à Pandas pour explorer la structure de son jeu de données.">

<title>Python pour la data science - Introduction à Pandas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/manipulation/02_pandas_suite.html" rel="next">
<link href="../../content/manipulation/01_numpy.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #e9f3fa;
      }
</style>
<script id="toggle-light-dark-elements" type="application/javascript">
// Extend Quarto theme toggling to allow elements to be displayed/hidden in light/dark themes

// Replicated from https://github.com/quarto-dev/quarto-cli/blob/84d4659/src/resources/formats/html/templates/quarto-html.ejs
const getColorSchemeSentinel = () => {
  const localAlternateSentinel = 'default';
  if (window.location.protocol !== 'file:') {
    const storageValue = window.localStorage.getItem('quarto-color-scheme');
    return storageValue != null ? storageValue : localAlternateSentinel;
  } else {
    return localAlternateSentinel;
  }
};

// Function to toggle light and dark elements based on color scheme
const toggleColorSchemeElements = () => {
  const scheme = getColorSchemeSentinel();
  const lightElements = document.getElementsByClassName('only-light');
  const darkElements = document.getElementsByClassName('only-dark');

  for (var i = 0; i < lightElements.length; i++) {
    lightElements[i].style.display = scheme == 'default' ? 'block' : 'none';
  }
  for (var i = 0; i < darkElements.length; i++) {
    darkElements[i].style.display = scheme == 'default' ? 'none' : 'block';
  }
};

// Function to check if the user's browser prefers dark themes
const prefersDarkTheme = () => {
  if (window.matchMedia) {
    return window.matchMedia('(prefers-color-scheme: dark)').matches;
  }
  return false;
};

document.addEventListener('readystatechange', function() {
  // Set the default color scheme based on browser preference
  if (document.readyState === 'interactive' && window.location.protocol !== 'file:') {
    const storageValue = window.localStorage.getItem('quarto-color-scheme');
    if (storageValue == null && prefersDarkTheme()) {
      window.localStorage.setItem('quarto-color-scheme', 'alternate');
    }
  }
  // Add event listener for when the readyState is complete (and default toggler is set)
  if (document.readyState === 'complete') {
    // Toggle scheme once
    toggleColorSchemeElements();
    // Append our toggle function to the old one
    const oldToggle = window.quartoToggleColorScheme;
    window.quartoToggleColorScheme = () => {
      oldToggle();
      toggleColorSchemeElements();
    }
  }
});

</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Python pour la data science - Introduction à Pandas">
<meta name="twitter:description" content="Pandas est l’élément central de l’écosystème Python pour la data science. Ce chapitre présente les premières
manipulations de données qu’on peut faire grâce à Pandas pour explorer
la structure de son jeu de données.">
<meta name="twitter:image" content="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/panda_stretching.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="citation_title" content="Python pour la data science">
<meta name="citation_author" content="Lino Galiana">
<meta name="citation_publication_date" content="2023">
<meta name="citation_cover_date" content="2023">
<meta name="citation_year" content="2023">
<meta name="citation_online_date" content="2024-06-17">
<meta name="citation_fulltext_html_url" content="https://pythonds.linogaliana.fr/">
<meta name="citation_doi" content="10.5281/zenodo.8229676">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Coding for economists;,citation_author=undefined Turrell;,citation_author=undefined contributors;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://aeturrell.github.io/coding-for-economists;">
<meta name="citation_reference" content="citation_title=Hands-on machine learning with scikit-learn, keras, and TensorFlow;,citation_author=Aurélien Géron;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=A brief history of data visualization;,citation_author=Chun-houh Chen;,citation_author=Wolfgang Härdle;,citation_author=Antony Unwin;,citation_author=Michael Friendly;,citation_publication_date=2008;,citation_cover_date=2008;,citation_year=2008;,citation_journal_title=Handbook of data visualization;,citation_publisher=Springer;">
<meta name="citation_reference" content="citation_title=Random forests;,citation_author=Leo Breiman;,citation_publication_date=2001;,citation_cover_date=2001;,citation_year=2001;,citation_volume=45;,citation_journal_title=Machine learning;,citation_publisher=Springer;">
<meta name="citation_reference" content="citation_title=Bagging predictors;,citation_author=Leo Breiman;,citation_publication_date=1996;,citation_cover_date=1996;,citation_year=1996;,citation_volume=24;,citation_journal_title=Machine learning;,citation_publisher=Springer;">
<meta name="citation_reference" content="citation_title=R for data science;,citation_author=Hadley Wickham;,citation_author=Mine Çetinkaya-Rundel;,citation_author=Garrett Grolemund;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;">
<meta name="citation_reference" content="citation_title=Computational reproducibility of jupyter notebooks from biomedical publications;,citation_author=Sheeba Samuel;,citation_author=Daniel Mietchen;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://arxiv.org/abs/2308.07333;">
<meta name="citation_reference" content="citation_title=Python data science handbook: Essential tools for working with data;,citation_author=Jake VanderPlas;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;">
<meta name="citation_reference" content="citation_title=Machine learning methods that economists should know about;,citation_author=Susan Athey;,citation_author=Guido W Imbens;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_volume=11;,citation_journal_title=Annual Review of Economics;,citation_publisher=Annual Reviews;">
<meta name="citation_reference" content="citation_title=Fuzzy matching on big-data an illustration with scanner data and crowd-sourced nutritional data;,citation_author=Lino Galiana;,citation_author=Milena Suarez Castillo;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_publisher=Proceedings of the 2022 &amp;amp;amp;quot;Journées de Méthodologie Statistiques&amp;quot;;">
<meta name="citation_reference" content="citation_title=Data visualization with python and JavaScript;,citation_author=Kyran Dale;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=Sémiologie graphique;,citation_author=Jacques Bertin;,citation_publication_date=1967;,citation_cover_date=1967;,citation_year=1967;">
<meta name="citation_reference" content="citation_title=La sémiologie graphique de jacques bertin a cinquante ans;,citation_author=Gilles Palsky;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_journal_title=Visions carto (en ligne);">
<meta name="citation_reference" content="citation_title=Fundamentals of data visualization: A primer on making informative and compelling figures;,citation_author=Claus O Wilke;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;">
<meta name="citation_reference" content="citation_title=How to train BERT with an academic budget;,citation_author=Peter Izsak;,citation_author=Moshe Berchansky;,citation_author=Omer Levy;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://arxiv.org/abs/2104.07705;">
<meta name="citation_reference" content="citation_title=Python for data analysis: Data wrangling with pandas, NumPy, and IPython;,citation_author=Wes McKinney;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;">
<meta name="citation_reference" content="citation_title=Residential segregation, daytime segregation and spatial frictions: An analysis from mobile phone data;,citation_author=Lino Galiana;,citation_author=François Sémécurbe;,citation_author=Benjamin Sakarovitch;,citation_author=Zbigniew Smoreda;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_publisher=Insee Working Paper;">
<meta name="citation_reference" content="citation_title=Fuzzy matching on big-data: An illustration with scanner and crowd-sourced nutritional datasets;,citation_abstract=Food retailers’ scanner data provide unprecedented details on local consumption, provided that product identifiers allow a linkage with features of interest, such as nutritional information. In this paper, we enrich a large retailer dataset with nutritional information extracted from crowd-sourced and administrative nutritional datasets. To compensate for imperfect matching through the barcode, we develop a methodology to efficiently match short textual descriptions. After a preprocessing step to normalize short labels, we resort to fuzzy matching based on several tokenizers (including n-grams) by querying an ElasticSearch customized index and validate candidates echos as matches with a Levensthein edit-distance and an embedding-based similarity measure created from a siamese neural network model. The pipeline is composed of several steps successively relaxing constraints to find relevant matching candidates.;,citation_author=Lino Galiana;,citation_author=Milena Suarez Castillo;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://doi.org/10.1145/3524458.3547244;,citation_doi=10.1145/3524458.3547244;,citation_isbn=9781450392846;,citation_conference_title=Proceedings of the 2022 ACM conference on information technology for social good;,citation_conference=Association for Computing Machinery;,citation_series_title=GoodIT ’22;">
<meta name="citation_reference" content="citation_title=Guide de sémiologie cartographique;,citation_author=undefined Insee;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_publisher=Insee Working Paper;">
<meta name="citation_reference" content="citation_title=Energy and policy considerations for deep learning in NLP;,citation_author=Emma Strubell;,citation_author=Ananya Ganesh;,citation_author=Andrew McCallum;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://arxiv.org/abs/1906.02243;">
<meta name="citation_reference" content="citation_title=High-resolution image synthesis with latent diffusion models;,citation_author=Robin Rombach;,citation_author=Andreas Blattmann;,citation_author=Dominik Lorenz;,citation_author=Patrick Esser;,citation_author=Björn Ommer;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_conference_title=Proceedings of the IEEE/CVF conference on computer vision and pattern recognition (CVPR);">
<meta name="citation_reference" content="citation_title=Apache arrow and the&amp;amp;amp;quot; 10 things i hate about pandas;,citation_author=Wes McKinney;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_volume=21;,citation_journal_title=Blog, September;">
<meta name="citation_reference" content="citation_title=Many researchers were not compliant with their published data sharing statement: Mixed-methods study;,citation_author=Mirko Gabelica;,citation_author=Ružica Bojčić;,citation_author=Livia Puljak;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_journal_title=Journal of Clinical Epidemiology;,citation_publisher=Elsevier;">
<meta name="citation_reference" content="citation_title=Credit scoring in the era of big data;,citation_author=Mikella Hurley;,citation_author=Julius Adebayo;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;,citation_volume=18;,citation_journal_title=Yale JL &amp;amp;amp; Tech.;,citation_publisher=HeinOnline;">
<meta name="citation_reference" content="citation_title=Econometrics and machine learning;,citation_author=Arthur Charpentier;,citation_author=Emmanuel Flachaire;,citation_author=Antoine Ly;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_issue=1;,citation_volume=505;,citation_journal_title=Economie et Statistique;,citation_publisher=Persée-Portail des revues scientifiques en SHS;">
<meta name="citation_reference" content="citation_title=Machine learning: An applied econometric approach;,citation_author=Sendhil Mullainathan;,citation_author=Jann Spiess;,citation_publication_date=2017-05;,citation_cover_date=2017-05;,citation_year=2017;,citation_fulltext_html_url=https://www.aeaweb.org/articles?id=10.1257/jep.31.2.87;,citation_issue=2;,citation_doi=10.1257/jep.31.2.87;,citation_volume=31;,citation_journal_title=Journal of Economic Perspectives;">
<meta name="citation_reference" content="citation_title=Le problème du réalisme des hypothèses en économie politique;,citation_author=Pierre Salmon;,citation_publication_date=2010;,citation_cover_date=2010;,citation_year=2010;">
<meta name="citation_reference" content="citation_title=The methodology of positive economics;,citation_author=Milton Friedman;,citation_publication_date=1953;,citation_cover_date=1953;,citation_year=1953;,citation_inbook_title=Essays in positive economics;">
<meta name="citation_reference" content="citation_title=L’empreinte carbone du numérique;,citation_author=undefined Arcep;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;">
<meta name="citation_reference" content="citation_title=Leakage and the reproducibility crisis in ML-based science;,citation_author=Sayash Kapoor;,citation_author=Arvind Narayanan;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2207.07048;,citation_doi=10.48550/ARXIV.2207.07048;,citation_publisher=arXiv;">
<meta name="citation_reference" content="citation_title=Data scientist, the sexiest job of the 21st century;,citation_author=Thomas H Davenport;,citation_author=DJ Patil;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;,citation_fulltext_html_url=https://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century;,citation_issue=5;,citation_volume=90;,citation_journal_title=Harvard business review;">
<meta name="citation_reference" content="citation_title=Is data scientist still the sexiest job of the 21st century?;,citation_author=Thomas H Davenport;,citation_author=DJ Patil;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;,citation_fulltext_html_url=https://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century;,citation_issue=5;,citation_volume=90;,citation_journal_title=Harvard business review;">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="../../content/getting-started/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/01_installation.html">
 <span class="dropdown-text">Configuration de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/02_DS_environment.html">
 <span class="dropdown-text">L’environnement Python pour la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/03_data_analysis.html">
 <span class="dropdown-text">Démarche à adopter face à un jeu de données</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/04_python_practice.html">
 <span class="dropdown-text">Bonne pratique de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/05_rappels_types.html">
 <span class="dropdown-text">Quelques rappels sur les principes de base de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/06_rappels_fonctions.html">
 <span class="dropdown-text">Modules, tests, boucles, fonctions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/07_rappels_classes.html">
 <span class="dropdown-text">Les classes en Python</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manipuler" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Manipuler</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-manipuler">    
        <li>
    <a class="dropdown-item" href="../../content/manipulation/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/01_numpy.html">
 <span class="dropdown-text">Numpy, la brique de base de la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02_pandas_intro.html">
 <span class="dropdown-text">Introduction à Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02_pandas_suite.html">
 <span class="dropdown-text">Statistiques par groupe et association de plusieurs jeux de données avec Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_intro.html">
 <span class="dropdown-text">Introduction aux données spatiales avec Geopandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04a_webscraping_TP.html">
 <span class="dropdown-text">Web scraping avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04c_API_TP.html">
 <span class="dropdown-text">Récupérer des données avec des API depuis Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04b_regex_TP.html">
 <span class="dropdown-text">Maîtriser les expressions régulières</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-communiquer" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Communiquer</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-communiquer">    
        <li>
    <a class="dropdown-item" href="../../content/visualisation/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/matplotlib.html">
 <span class="dropdown-text">De beaux graphiques avec python : mise en pratique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/maps.html">
 <span class="dropdown-text">De belles cartes avec python : mise en pratique</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-modéliser" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Modéliser</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-modéliser">    
        <li>
    <a class="dropdown-item" href="../../content/modelisation/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/0_preprocessing.html">
 <span class="dropdown-text">Préparation des données pour construire un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/1_modelevaluation.html">
 <span class="dropdown-text">Evaluer la qualité d’un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/2_SVM.html">
 <span class="dropdown-text">Classification: premier modèle avec les SVM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/3_regression.html">
 <span class="dropdown-text">Régression : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/4_featureselection.html">
 <span class="dropdown-text">Sélection de variables : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/5_clustering.html">
 <span class="dropdown-text">Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/6_pipeline.html">
 <span class="dropdown-text">Premier pas vers l’industrialisation avec les pipelines scikit</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/7_mlapi.html">
 <span class="dropdown-text">Mettre à disposition un modèle par le biais d’une API</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-nlp" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">NLP</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-nlp">    
        <li>
    <a class="dropdown-item" href="../../content/NLP/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/01_intro.html">
 <span class="dropdown-text">Nettoyer et structurer l’information dans les données textuelles</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/02_exoclean.html">
 <span class="dropdown-text">L’analyse fréquentiste par l’approche bag-of-words : intérêt et limites</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/03_lda.html">
 <span class="dropdown-text">Latent Dirichlet Allocation (LDA)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/04_word2vec.html">
 <span class="dropdown-text">Méthodes de vectorisation : comptages et word embeddings</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/05_exo_supp.html">
 <span class="dropdown-text">Exercices supplémentaires</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-approfondissements" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Approfondissements</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-approfondissements">    
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/continuous_integration.html">
 <span class="dropdown-text">Intégration continue avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/s3.html">
 <span class="dropdown-text">Les nouveaux modes d’accès aux données : le format parquet et les données sur le cloud</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_approfondissement.html">
 <span class="dropdown-text">Approfondissement ElasticSearch pour des recherches de proximité géographique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_intro.html">
 <span class="dropdown-text">Introduction à ElasticSearch pour la recherche textuelle</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-git" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Git</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-git">    
        <li>
    <a class="dropdown-item" href="../../content/git/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/introgit.html">
 <span class="dropdown-text">Git : un élément essentiel au quotidien</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/exogit.html">
 <span class="dropdown-text">Un cadavre exquis pour découvrir Git</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-annexes" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Annexes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-annexes">    
        <li>
    <a class="dropdown-item" href="../../content/annexes/evaluation.html">
 <span class="dropdown-text">Evaluation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/annexes/corrections.html">
 <span class="dropdown-text">Corrections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://linogaliana.github.io/python-datascientist-slides/#/title-slide">
 <span class="dropdown-text">Slides de présentation</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/linogaliana/python-datascientist" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/manipulation/02_pandas_intro.html">Introduction à Pandas</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Introduction à Pandas</h1>
                  <div>
        <div class="description">
          <p><code>Pandas</code> est l’élément central de l’écosystème <code>Python</code> pour la <em>data science</em>. Ce chapitre présente les premières
          manipulations de données qu’on peut faire grâce à <code>Pandas</code> pour explorer
          la structure de son jeu de données.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Tutoriel</div>
                <div class="quarto-category">Exercices</div>
                <div class="quarto-category">Manipulation</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Lino Galiana </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">2024-06-17</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/01_numpy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numpy, la brique de base de la data science</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/02_pandas_intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Introduction à Pandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/02_pandas_suite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistiques par groupe et association de plusieurs jeux de données avec Pandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/03_geopandas_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction aux données spatiales avec Geopandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04a_webscraping_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Web scraping avec Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04c_API_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Récupérer des données avec des API depuis Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04b_regex_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Maîtriser les expressions régulières</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#données" id="toc-données" class="nav-link" data-scroll-target="#données"><span class="header-section-number">1.1</span> Données</a></li>
  <li><a href="#environnement" id="toc-environnement" class="nav-link" data-scroll-target="#environnement"><span class="header-section-number">1.2</span> Environnement</a></li>
  </ul></li>
  <li><a href="#logique-de-pandas" id="toc-logique-de-pandas" class="nav-link" data-scroll-target="#logique-de-pandas"><span class="header-section-number">2</span> Logique de <code>Pandas</code></a>
  <ul class="collapse">
  <li><a href="#anatomie-dune-table-pandas" id="toc-anatomie-dune-table-pandas" class="nav-link" data-scroll-target="#anatomie-dune-table-pandas"><span class="header-section-number">2.1</span> Anatomie d’une table <code>Pandas</code></a></li>
  <li><a href="#avant-le-dataframe-la-serie" id="toc-avant-le-dataframe-la-serie" class="nav-link" data-scroll-target="#avant-le-dataframe-la-serie"><span class="header-section-number">2.2</span> Avant le <code>DataFrame</code>, la <code>Serie</code></a></li>
  </ul></li>
  <li><a href="#de-la-serie-au-dataframe" id="toc-de-la-serie-au-dataframe" class="nav-link" data-scroll-target="#de-la-serie-au-dataframe"><span class="header-section-number">3</span> De la <code>Serie</code> au <code>DataFrame</code></a>
  <ul class="collapse">
  <li><a href="#lindexation" id="toc-lindexation" class="nav-link" data-scroll-target="#lindexation"><span class="header-section-number">3.1</span> L’indexation</a></li>
  <li><a href="#le-concept-de-tidy-data" id="toc-le-concept-de-tidy-data" class="nav-link" data-scroll-target="#le-concept-de-tidy-data"><span class="header-section-number">3.2</span> Le concept de <em>tidy data</em></a></li>
  </ul></li>
  <li><a href="#importer-des-données-avec-pandas" id="toc-importer-des-données-avec-pandas" class="nav-link" data-scroll-target="#importer-des-données-avec-pandas"><span class="header-section-number">4</span> Importer des données avec <code>Pandas</code></a>
  <ul class="collapse">
  <li><a href="#lire-des-données-depuis-un-chemin-local" id="toc-lire-des-données-depuis-un-chemin-local" class="nav-link" data-scroll-target="#lire-des-données-depuis-un-chemin-local"><span class="header-section-number">4.1</span> Lire des données depuis un chemin local</a></li>
  <li><a href="#lecture-depuis-un-csv-disponible-sur-internet" id="toc-lecture-depuis-un-csv-disponible-sur-internet" class="nav-link" data-scroll-target="#lecture-depuis-un-csv-disponible-sur-internet"><span class="header-section-number">4.2</span> Lecture depuis un CSV disponible sur internet</a></li>
  </ul></li>
  <li><a href="#explorer-la-structure-dun-dataframe" id="toc-explorer-la-structure-dun-dataframe" class="nav-link" data-scroll-target="#explorer-la-structure-dun-dataframe"><span class="header-section-number">5</span> Explorer la structure d’un <em>DataFrame</em></a>
  <ul class="collapse">
  <li><a href="#dimensions-et-structure-dun-dataframe" id="toc-dimensions-et-structure-dun-dataframe" class="nav-link" data-scroll-target="#dimensions-et-structure-dun-dataframe"><span class="header-section-number">5.1</span> Dimensions et structure d’un <em>DataFrame</em></a></li>
  <li><a href="#accéder-à-des-éléments-dun-dataframe" id="toc-accéder-à-des-éléments-dun-dataframe" class="nav-link" data-scroll-target="#accéder-à-des-éléments-dun-dataframe"><span class="header-section-number">5.2</span> Accéder à des éléments d’un DataFrame</a></li>
  <li><a href="#accéder-à-des-lignes" id="toc-accéder-à-des-lignes" class="nav-link" data-scroll-target="#accéder-à-des-lignes"><span class="header-section-number">5.3</span> Accéder à des lignes</a></li>
  </ul></li>
  <li><a href="#principales-manipulations-de-données" id="toc-principales-manipulations-de-données" class="nav-link" data-scroll-target="#principales-manipulations-de-données"><span class="header-section-number">6</span> Principales manipulations de données</a>
  <ul class="collapse">
  <li><a href="#opérations-sur-les-colonnes-ajouter-ou-retirer-des-variables-les-renommer-etc." id="toc-opérations-sur-les-colonnes-ajouter-ou-retirer-des-variables-les-renommer-etc." class="nav-link" data-scroll-target="#opérations-sur-les-colonnes-ajouter-ou-retirer-des-variables-les-renommer-etc."><span class="header-section-number">6.1</span> Opérations sur les colonnes : ajouter ou retirer des variables, les renommer, etc.</a></li>
  <li><a href="#réordonner-les-observations" id="toc-réordonner-les-observations" class="nav-link" data-scroll-target="#réordonner-les-observations"><span class="header-section-number">6.2</span> Réordonner les observations</a></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter"><span class="header-section-number">6.3</span> Filter</a></li>
  <li><a href="#résumé-des-principales-opérations" id="toc-résumé-des-principales-opérations" class="nav-link" data-scroll-target="#résumé-des-principales-opérations"><span class="header-section-number">6.4</span> Résumé des principales opérations</a></li>
  </ul></li>
  <li><a href="#statistiques-descriptives" id="toc-statistiques-descriptives" class="nav-link" data-scroll-target="#statistiques-descriptives"><span class="header-section-number">7</span> Statistiques descriptives</a>
  <ul class="collapse">
  <li><a href="#comptages" id="toc-comptages" class="nav-link" data-scroll-target="#comptages"><span class="header-section-number">7.1</span> Comptages</a></li>
  <li><a href="#statistiques-agrégées" id="toc-statistiques-agrégées" class="nav-link" data-scroll-target="#statistiques-agrégées"><span class="header-section-number">7.2</span> Statistiques agrégées</a></li>
  <li><a href="#valeurs-manquantes" id="toc-valeurs-manquantes" class="nav-link" data-scroll-target="#valeurs-manquantes"><span class="header-section-number">7.3</span> Valeurs manquantes</a></li>
  </ul></li>
  <li><a href="#représentations-graphiques-rapides" id="toc-représentations-graphiques-rapides" class="nav-link" data-scroll-target="#représentations-graphiques-rapides"><span class="header-section-number">8</span> Représentations graphiques rapides</a></li>
  <li><a href="#exercice-de-synthèse" id="toc-exercice-de-synthèse" class="nav-link" data-scroll-target="#exercice-de-synthèse"><span class="header-section-number">9</span> Exercice de synthèse</a></li>
  <li><a href="#références" id="toc-références" class="nav-link" data-scroll-target="#références">Références</a>
  <ul class="collapse">
  <li><a href="#informations-additionnelles" id="toc-informations-additionnelles" class="nav-link" data-scroll-target="#informations-additionnelles">Informations additionnelles</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/linogaliana/python-datascientist/edit/master/content/manipulation/02_pandas_intro.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/linogaliana/python-datascientist/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Pour essayer les exemples présents dans ce tutoriel :</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="1443" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1442;"><span id="cb1-1443"><a href="#cb1-1443" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">pathname</span><span class="op">.</span><span class="fu">replace</span>(<span class="st">".html"</span><span class="op">,</span> <span class="st">".qmd"</span>)<span class="op">;</span></span>
<span id="cb1-1444"><a href="#cb1-1444" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`</span><span class="sc">${</span><span class="fu">printBadges</span>({<span class="dt">fpath</span><span class="op">:</span> path})<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="1448" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1447;"><span id="cb2-1448"><a href="#cb2-1448" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb2-1449"><a href="#cb2-1449" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;details&gt;</span></span>
<span id="cb2-1450"><a href="#cb2-1450" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;summary&gt;</span></span>
<span id="cb2-1451"><a href="#cb2-1451" aria-hidden="true" tabindex="-1"></a><span class="vs">Pour ouvrir la version corrigée sous forme de &lt;i&gt;notebook&lt;/i&gt;</span></span>
<span id="cb2-1452"><a href="#cb2-1452" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/summary&gt;</span></span>
<span id="cb2-1453"><a href="#cb2-1453" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="fu">printBadges</span>({<span class="dt">fpath</span><span class="op">:</span> path<span class="op">,</span> <span class="dt">correction</span><span class="op">:</span> <span class="kw">true</span>})<span class="sc">}</span></span>
<span id="cb2-1454"><a href="#cb2-1454" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/details&gt;</span></span>
<span id="cb2-1455"><a href="#cb2-1455" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="1474" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1473;"><span id="cb3-1474"><a href="#cb3-1474" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">reminderBadges</span>({</span>
<span id="cb3-1475"><a href="#cb3-1475" aria-hidden="true" tabindex="-1"></a>    sourceFile <span class="op">=</span> <span class="st">"content/01_toto.Rmd"</span><span class="op">,</span></span>
<span id="cb3-1476"><a href="#cb3-1476" aria-hidden="true" tabindex="-1"></a>    type <span class="op">=</span> [<span class="st">'md'</span><span class="op">,</span> <span class="st">'html'</span>]<span class="op">,</span></span>
<span id="cb3-1477"><a href="#cb3-1477" aria-hidden="true" tabindex="-1"></a>    split <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb3-1478"><a href="#cb3-1478" aria-hidden="true" tabindex="-1"></a>    onyxiaOnly <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-1479"><a href="#cb3-1479" aria-hidden="true" tabindex="-1"></a>    sspCloudService <span class="op">=</span> <span class="st">"python"</span><span class="op">,</span></span>
<span id="cb3-1480"><a href="#cb3-1480" aria-hidden="true" tabindex="-1"></a>    GPU <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-1481"><a href="#cb3-1481" aria-hidden="true" tabindex="-1"></a>    correction <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb3-1482"><a href="#cb3-1482" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb3-1483"><a href="#cb3-1483" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(type)) {</span>
<span id="cb3-1484"><a href="#cb3-1484" aria-hidden="true" tabindex="-1"></a>        type <span class="op">=</span> type[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb3-1485"><a href="#cb3-1485" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1486"><a href="#cb3-1486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1487"><a href="#cb3-1487" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> notebook <span class="op">=</span> sourceFile<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">(</span><span class="ss">.Rmd</span><span class="sc">|</span><span class="ss">.qmd</span><span class="sc">)</span><span class="ss">/</span><span class="op">,</span> <span class="st">".ipynb"</span>)<span class="op">;</span></span>
<span id="cb3-1488"><a href="#cb3-1488" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (correction) {</span>
<span id="cb3-1489"><a href="#cb3-1489" aria-hidden="true" tabindex="-1"></a>        notebook <span class="op">=</span> notebook<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/content/</span><span class="op">,</span> <span class="st">"corrections"</span>)<span class="op">;</span></span>
<span id="cb3-1490"><a href="#cb3-1490" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-1491"><a href="#cb3-1491" aria-hidden="true" tabindex="-1"></a>        notebook <span class="op">=</span> notebook<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/content/</span><span class="op">,</span> <span class="st">"notebooks"</span>)<span class="op">;</span></span>
<span id="cb3-1492"><a href="#cb3-1492" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1493"><a href="#cb3-1493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1494"><a href="#cb3-1494" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> githubRepoNotebooksSimplified <span class="op">=</span> <span class="st">"github/linogaliana/python-datascientist-notebooks"</span><span class="op">;</span></span>
<span id="cb3-1495"><a href="#cb3-1495" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> githubAlias <span class="op">=</span> githubRepoNotebooksSimplified<span class="op">.</span><span class="fu">replace</span>(<span class="st">"github"</span><span class="op">,</span> <span class="st">"github.com"</span>)<span class="op">;</span></span>
<span id="cb3-1496"><a href="#cb3-1496" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> githubRepoNotebooks <span class="op">=</span> <span class="vs">`https://</span><span class="sc">${</span>githubAlias<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb3-1497"><a href="#cb3-1497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1498"><a href="#cb3-1498" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> githubLink <span class="op">;</span></span>
<span id="cb3-1499"><a href="#cb3-1499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1500"><a href="#cb3-1500" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (notebook <span class="op">===</span> <span class="st">""</span>) {</span>
<span id="cb3-1501"><a href="#cb3-1501" aria-hidden="true" tabindex="-1"></a>        githubLink <span class="op">=</span> githubRepoNotebooks<span class="op">;</span></span>
<span id="cb3-1502"><a href="#cb3-1502" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-1503"><a href="#cb3-1503" aria-hidden="true" tabindex="-1"></a>        githubLink <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>githubRepoNotebooks<span class="sc">}</span><span class="vs">/blob/main`</span><span class="op">;</span></span>
<span id="cb3-1504"><a href="#cb3-1504" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1505"><a href="#cb3-1505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1506"><a href="#cb3-1506" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> notebookRelPath <span class="op">=</span> <span class="vs">`/</span><span class="sc">${</span>notebook<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb3-1507"><a href="#cb3-1507" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [section<span class="op">,</span> chapter] <span class="op">=</span> notebook<span class="op">.</span><span class="fu">split</span>(<span class="st">"/"</span>)<span class="op">.</span><span class="fu">slice</span>(<span class="op">-</span><span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb3-1508"><a href="#cb3-1508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1509"><a href="#cb3-1509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1510"><a href="#cb3-1510" aria-hidden="true" tabindex="-1"></a>    githubLink <span class="op">=</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>githubLink<span class="sc">}${</span>notebookRelPath<span class="sc">}</span><span class="vs">" class="github"&gt;&lt;i class="fab fa-github"&gt;&lt;/i&gt;&lt;/a&gt;`</span><span class="op">;</span></span>
<span id="cb3-1511"><a href="#cb3-1511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1512"><a href="#cb3-1512" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sectionLatest <span class="op">=</span> section<span class="op">.</span><span class="fu">split</span>(<span class="st">"/"</span>)<span class="op">.</span><span class="fu">slice</span>(<span class="op">-</span><span class="dv">1</span>)[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb3-1513"><a href="#cb3-1513" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> chapterNoExtension <span class="op">=</span> chapter<span class="op">.</span><span class="fu">replace</span>(<span class="st">".ipynb"</span><span class="op">,</span> <span class="st">""</span>)<span class="op">;</span></span>
<span id="cb3-1514"><a href="#cb3-1514" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> onyxiaInitArgs <span class="op">=</span> [sectionLatest<span class="op">,</span> chapterNoExtension]<span class="op">;</span></span>
<span id="cb3-1515"><a href="#cb3-1515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1516"><a href="#cb3-1516" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (correction) {</span>
<span id="cb3-1517"><a href="#cb3-1517" aria-hidden="true" tabindex="-1"></a>        onyxiaInitArgs<span class="op">.</span><span class="fu">push</span>(<span class="st">"correction"</span>)<span class="op">;</span></span>
<span id="cb3-1518"><a href="#cb3-1518" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1519"><a href="#cb3-1519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1520"><a href="#cb3-1520" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> gpuSuffix <span class="op">=</span> GPU <span class="op">?</span> <span class="st">"-gpu"</span> <span class="op">:</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb3-1521"><a href="#cb3-1521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1522"><a href="#cb3-1522" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sspcloudJupyterLinkLauncher <span class="op">=</span> <span class="vs">`https://datalab.sspcloud.fr/launcher/ide/jupyter-</span><span class="sc">${</span>sspCloudService<span class="sc">}${</span>gpuSuffix<span class="sc">}</span><span class="vs">?autoLaunch=true&amp;onyxia.friendlyName=%C2%AB</span><span class="sc">${</span>chapterNoExtension<span class="sc">}</span><span class="vs">%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-jupyter.sh%C2%BB&amp;init.personalInitArgs=%C2%AB</span><span class="sc">${</span>onyxiaInitArgs<span class="op">.</span><span class="fu">join</span>(<span class="st">'%20'</span>)<span class="sc">}</span><span class="vs">%C2%BB&amp;security.allowlist.enabled=false`</span><span class="op">;</span></span>
<span id="cb3-1523"><a href="#cb3-1523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1524"><a href="#cb3-1524" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sspcloudJupyterLink<span class="op">;</span></span>
<span id="cb3-1525"><a href="#cb3-1525" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"md"</span>) {</span>
<span id="cb3-1526"><a href="#cb3-1526" aria-hidden="true" tabindex="-1"></a>        sspcloudJupyterLink <span class="op">=</span> <span class="vs">`[![Onyxia](https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange)](</span><span class="sc">${</span>sspcloudJupyterLinkLauncher<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb3-1527"><a href="#cb3-1527" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-1528"><a href="#cb3-1528" aria-hidden="true" tabindex="-1"></a>        sspcloudJupyterLink <span class="op">=</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>sspcloudJupyterLinkLauncher<span class="sc">}</span><span class="vs">" target="_blank" rel="noopener"&gt;&lt;img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange" alt="Onyxia"&gt;&lt;/a&gt;`</span><span class="op">;</span></span>
<span id="cb3-1529"><a href="#cb3-1529" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1530"><a href="#cb3-1530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1531"><a href="#cb3-1531" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (split <span class="op">===</span> <span class="dv">4</span>) {</span>
<span id="cb3-1532"><a href="#cb3-1532" aria-hidden="true" tabindex="-1"></a>        sspcloudJupyterLink <span class="op">+=</span> <span class="st">'&lt;br&gt;'</span><span class="op">;</span></span>
<span id="cb3-1533"><a href="#cb3-1533" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1534"><a href="#cb3-1534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1535"><a href="#cb3-1535" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sspcloudVscodeLinkLauncher <span class="op">=</span> <span class="vs">`https://datalab.sspcloud.fr/launcher/ide/vscode-</span><span class="sc">${</span>sspCloudService<span class="sc">}${</span>gpuSuffix<span class="sc">}</span><span class="vs">?autoLaunch=true&amp;onyxia.friendlyName=%C2%AB</span><span class="sc">${</span>chapterNoExtension<span class="sc">}</span><span class="vs">%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-vscode.sh%C2%BB&amp;init.personalInitArgs=%C2%AB</span><span class="sc">${</span>onyxiaInitArgs<span class="op">.</span><span class="fu">join</span>(<span class="st">'%20'</span>)<span class="sc">}</span><span class="vs">%C2%BB&amp;security.allowlist.enabled=false`</span><span class="op">;</span></span>
<span id="cb3-1536"><a href="#cb3-1536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1537"><a href="#cb3-1537" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sspcloudVscodeLink<span class="op">;</span></span>
<span id="cb3-1538"><a href="#cb3-1538" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"md"</span>) {</span>
<span id="cb3-1539"><a href="#cb3-1539" aria-hidden="true" tabindex="-1"></a>        sspcloudVscodeLink <span class="op">=</span> <span class="vs">`[![Onyxia](https://img.shields.io/badge/SSP%20Cloud-Tester_avec_VSCode-blue?logo=visualstudiocode&amp;logoColor=blue)](</span><span class="sc">${</span>sspcloudVscodeLinkLauncher<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb3-1540"><a href="#cb3-1540" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-1541"><a href="#cb3-1541" aria-hidden="true" tabindex="-1"></a>        sspcloudVscodeLink <span class="op">=</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>sspcloudVscodeLinkLauncher<span class="sc">}</span><span class="vs">" target="_blank" rel="noopener"&gt;&lt;img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_VSCode-blue?logo=visualstudiocode&amp;logoColor=blue" alt="Onyxia"&gt;&lt;/a&gt;`</span><span class="op">;</span></span>
<span id="cb3-1542"><a href="#cb3-1542" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1543"><a href="#cb3-1543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1544"><a href="#cb3-1544" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (split <span class="op">===</span> <span class="dv">5</span>) {</span>
<span id="cb3-1545"><a href="#cb3-1545" aria-hidden="true" tabindex="-1"></a>        sspcloudVscodeLink <span class="op">+=</span> <span class="st">'&lt;br&gt;'</span><span class="op">;</span></span>
<span id="cb3-1546"><a href="#cb3-1546" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1547"><a href="#cb3-1547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1548"><a href="#cb3-1548" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> colabLink<span class="op">;</span></span>
<span id="cb3-1549"><a href="#cb3-1549" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"md"</span>) {</span>
<span id="cb3-1550"><a href="#cb3-1550" aria-hidden="true" tabindex="-1"></a>        colabLink <span class="op">=</span> <span class="vs">`[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](http://colab.research.google.com/</span><span class="sc">${</span>githubRepoNotebooksSimplified<span class="sc">}</span><span class="vs">/blob/main</span><span class="sc">${</span>notebookRelPath<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb3-1551"><a href="#cb3-1551" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-1552"><a href="#cb3-1552" aria-hidden="true" tabindex="-1"></a>        colabLink <span class="op">=</span> <span class="vs">`&lt;a href="https://colab.research.google.com/</span><span class="sc">${</span>githubRepoNotebooksSimplified<span class="sc">}</span><span class="vs">/blob/main</span><span class="sc">${</span>notebookRelPath<span class="sc">}</span><span class="vs">" target="_blank" rel="noopener"&gt;&lt;img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"&gt;&lt;/a&gt;`</span><span class="op">;</span></span>
<span id="cb3-1553"><a href="#cb3-1553" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1554"><a href="#cb3-1554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1555"><a href="#cb3-1555" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (split <span class="op">===</span> <span class="dv">7</span>) {</span>
<span id="cb3-1556"><a href="#cb3-1556" aria-hidden="true" tabindex="-1"></a>        colabLink <span class="op">+=</span> <span class="st">'&lt;br&gt;'</span><span class="op">;</span></span>
<span id="cb3-1557"><a href="#cb3-1557" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1558"><a href="#cb3-1558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1559"><a href="#cb3-1559" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> vscodeLink<span class="op">;</span></span>
<span id="cb3-1560"><a href="#cb3-1560" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"md"</span>) {</span>
<span id="cb3-1561"><a href="#cb3-1561" aria-hidden="true" tabindex="-1"></a>        vscodeLink <span class="op">=</span> <span class="vs">`[![githubdev](https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual Studio Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc)](https://github.dev/linogaliana/python-datascientist-notebooks</span><span class="sc">${</span>notebookRelPath<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb3-1562"><a href="#cb3-1562" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-1563"><a href="#cb3-1563" aria-hidden="true" tabindex="-1"></a>        vscodeLink <span class="op">=</span> <span class="vs">`&lt;a href="https://github.dev/linogaliana/python-datascientist-notebooks</span><span class="sc">${</span>notebookRelPath<span class="sc">}</span><span class="vs">" target="_blank" rel="noopener"&gt;&lt;img src="https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual%20Studio%20Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc" alt="githubdev"&gt;&lt;/a&gt;&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb3-1564"><a href="#cb3-1564" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1565"><a href="#cb3-1565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1566"><a href="#cb3-1566" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> badges <span class="op">=</span> [</span>
<span id="cb3-1567"><a href="#cb3-1567" aria-hidden="true" tabindex="-1"></a>        githubLink<span class="op">,</span></span>
<span id="cb3-1568"><a href="#cb3-1568" aria-hidden="true" tabindex="-1"></a>        sspcloudVscodeLink<span class="op">,</span></span>
<span id="cb3-1569"><a href="#cb3-1569" aria-hidden="true" tabindex="-1"></a>        sspcloudJupyterLink</span>
<span id="cb3-1570"><a href="#cb3-1570" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb3-1571"><a href="#cb3-1571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1572"><a href="#cb3-1572" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>onyxiaOnly) {</span>
<span id="cb3-1573"><a href="#cb3-1573" aria-hidden="true" tabindex="-1"></a>        badges<span class="op">.</span><span class="fu">push</span>(colabLink)<span class="op">;</span></span>
<span id="cb3-1574"><a href="#cb3-1574" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1575"><a href="#cb3-1575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1576"><a href="#cb3-1576" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> result <span class="op">=</span> badges<span class="op">.</span><span class="fu">join</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)<span class="op">;</span></span>
<span id="cb3-1577"><a href="#cb3-1577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1578"><a href="#cb3-1578" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"html"</span>) {</span>
<span id="cb3-1579"><a href="#cb3-1579" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="vs">`&lt;p class="badges"&gt;</span><span class="sc">${</span>result<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb3-1580"><a href="#cb3-1580" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1581"><a href="#cb3-1581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1582"><a href="#cb3-1582" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (onyxiaOnly) {</span>
<span id="cb3-1583"><a href="#cb3-1583" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>sspcloudJupyterLink<span class="sc">}${</span>sspcloudVscodeLink<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb3-1584"><a href="#cb3-1584" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1585"><a href="#cb3-1585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1586"><a href="#cb3-1586" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb3-1587"><a href="#cb3-1587" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-1588"><a href="#cb3-1588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1589"><a href="#cb3-1589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1590"><a href="#cb3-1590" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">printBadges</span>({</span>
<span id="cb3-1591"><a href="#cb3-1591" aria-hidden="true" tabindex="-1"></a>    fpath<span class="op">,</span></span>
<span id="cb3-1592"><a href="#cb3-1592" aria-hidden="true" tabindex="-1"></a>    onyxiaOnly <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-1593"><a href="#cb3-1593" aria-hidden="true" tabindex="-1"></a>    split <span class="op">=</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb3-1594"><a href="#cb3-1594" aria-hidden="true" tabindex="-1"></a>    type <span class="op">=</span> <span class="st">"html"</span><span class="op">,</span></span>
<span id="cb3-1595"><a href="#cb3-1595" aria-hidden="true" tabindex="-1"></a>    sspCloudService <span class="op">=</span> <span class="st">"python"</span><span class="op">,</span></span>
<span id="cb3-1596"><a href="#cb3-1596" aria-hidden="true" tabindex="-1"></a>    GPU <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-1597"><a href="#cb3-1597" aria-hidden="true" tabindex="-1"></a>    correction <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb3-1598"><a href="#cb3-1598" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb3-1599"><a href="#cb3-1599" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> badges <span class="op">=</span> <span class="fu">reminderBadges</span>({</span>
<span id="cb3-1600"><a href="#cb3-1600" aria-hidden="true" tabindex="-1"></a>        <span class="dt">sourceFile</span><span class="op">:</span> fpath<span class="op">,</span></span>
<span id="cb3-1601"><a href="#cb3-1601" aria-hidden="true" tabindex="-1"></a>        <span class="dt">type</span><span class="op">:</span> type<span class="op">,</span></span>
<span id="cb3-1602"><a href="#cb3-1602" aria-hidden="true" tabindex="-1"></a>        <span class="dt">split</span><span class="op">:</span> split<span class="op">,</span></span>
<span id="cb3-1603"><a href="#cb3-1603" aria-hidden="true" tabindex="-1"></a>        <span class="dt">onyxiaOnly</span><span class="op">:</span> onyxiaOnly<span class="op">,</span></span>
<span id="cb3-1604"><a href="#cb3-1604" aria-hidden="true" tabindex="-1"></a>        <span class="dt">sspCloudService</span><span class="op">:</span> sspCloudService<span class="op">,</span></span>
<span id="cb3-1605"><a href="#cb3-1605" aria-hidden="true" tabindex="-1"></a>        <span class="dt">GPU</span><span class="op">:</span> GPU<span class="op">,</span></span>
<span id="cb3-1606"><a href="#cb3-1606" aria-hidden="true" tabindex="-1"></a>        <span class="dt">correction</span><span class="op">:</span> correction</span>
<span id="cb3-1607"><a href="#cb3-1607" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-1608"><a href="#cb3-1608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1609"><a href="#cb3-1609" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> badges</span>
<span id="cb3-1610"><a href="#cb3-1610" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Le <em>package</em> <code>Pandas</code> est l’une des briques centrales de l’écosystème de
la <em>data science</em> depuis une dizaine d’années. Le <em>DataFrame</em>,
objet central dans des langages comme <code>R</code>
ou <code>Stata</code>, a longtemps était un grand absent dans l’écosystème <code>Python</code>.
Pourtant, grâce à <code>Numpy</code>, toutes les briques de base étaient présentes
mais méritaient d’être réagencées pour convenir aux besoins
des <em>data scientists</em>.</p>
<p>Wes McKinney, lorsqu’il a construit <code>Pandas</code>
pour proposer un <em>dataframe</em> s’appuyant, en arrière-plan, sur la librairie
de calcul numérique <code>Numpy</code>, a permis un grand bond en avant pour <code>Python</code>
dans l’analyse de données qui explique sa popularité dans l’écosystème
de la <em>data science</em>. <code>Pandas</code> n’est pas sans limite<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, nous aurons l’occasion
d’en évoquer quelques unes, mais la grande richesse des méthodes d’analyses
proposées simplifie énormément le travail d’analyse de données.
Pour en savoir plus sur ce <em>package</em>, l’ouvrage
de référence de <span class="citation" data-cites="mckinney2012python">McKinney (<a href="#ref-mckinney2012python" role="doc-biblioref">2012</a>)</span> présente de nombreuses fonctionnalités du <em>package</em>.</p>
<p>Nous nous concentrerons dans ce chapitre sur les éléments les plus pertinents
dans le cadre d’une introduction à la <em>data science</em> et laisserons
les utilisateurs intéressés approfondir leurs connaissances
dans les ressources foisonnantes qu’il existe sur le sujet.</p>
<p>Comme les jeux de données prennent généralement de la valeur
en associant plusieurs sources, par exemple pour mettre en relation
un enregistrement avec une donnée contextuelle ou pour lier deux bases
clients afin d’avoir une donnée faisant sens, le chapitre suivant présentera
la manière d’associer des jeux de données
différents avec <code>Pandas</code>.
A l’issue du chapitre suivant, grâce à des croisements
de données, nous diposerons d’une base fine sur les empreintes
carbone des Français<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<div class="cell markdown">
<div class="alert alert-info" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-comment"></i> Note</h3>
<p>Si vous êtes intéressés par <code>R</code> et le <em>tidyverse</em>,
une version très proche de ce TP est
disponible dans <a href="https://rgeo.linogaliana.fr/exercises/r-wrangling.html">ce cours</a>.</p>
</div>
</div>
<section id="données" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="données"><span class="header-section-number">1.1</span> Données</h2>
<p>Dans ce tutoriel <code>Pandas</code>, nous allons utiliser :</p>
<ul>
<li>Les émissions de gaz à effet de serre estimées au niveau communal par l’ADEME. Le jeu de données est
disponible sur <a href="https://www.data.gouv.fr/fr/datasets/inventaire-de-gaz-a-effet-de-serre-territorialise/#_">data.gouv</a>
et requêtable directement dans <code>Python</code> avec
<a href="https://koumoul.com/s/data-fair/api/v1/datasets/igt-pouvoir-de-rechauffement-global/convert">cet url</a> ;</li>
</ul>
<p>Le <a href="../../content/manipulation/02_pandas_followup.qmd">chapitre suivant</a> permettra de mettre en application des éléments présents dans ce chapitre avec
les données ci-dessus associées à des données de contexte au niveau communal.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Compétences à l'issue de ce chapitre</h3>
<ul>
<li>Importer un jeu de données sous forme de <em>dataframe</em> <code>Pandas</code> et explorer sa structure ;</li>
<li>Effectuer des manipulations sur les colonnes et les lignes ;</li>
<li>Construire des statistiques agrégées et chaîner les opérations ;</li>
<li>Utiliser les méthodes graphiques de <code>Pandas</code> pour se représenter rapidement la distribution des données.</li>
</ul>
</div>
</div>
</section>
<section id="environnement" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="environnement"><span class="header-section-number">1.2</span> Environnement</h2>
<p>Nous suivrons les conventions habituelles dans l’import des packages :</p>
<div id="10137d18" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="10137d18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="10137d18-1"><a href="#10137d18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="10137d18-2"><a href="#10137d18-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="10137d18-3"><a href="#10137d18-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour obtenir des résultats reproductibles, on peut fixer la racine du générateur
pseudo-aléatoire.</p>
<div id="87b5f06e" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="87b5f06e"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="87b5f06e-1"><a href="#87b5f06e-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">123</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Au cours de cette démonstration des principales fonctionalités de <code>Pandas</code>, et
lors du chapitre suivant,
je recommande de se référer régulièrement aux ressources suivantes :</p>
<ul>
<li>L’<a href="https://pandas.pydata.org/docs/user_guide/index.html">aide officielle de <code>Pandas</code></a>.
Notamment, la
<a href="https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/index.html">page de comparaison des langages</a>
qui est très utile ;</li>
<li><a href="https://observablehq.com/@observablehq/data-wrangling-translations">Ce tutoriel</a>,
pensé certes pour les utilisateurs d’<a href="https://observablehq.com"><code>Observable Javascript</code></a>,
mais qui offre de nombreux exemples intéressants pour les afficionados de <code>Pandas</code> ;</li>
<li>La <em>cheatsheet suivante</em>, <a href="https://becominghuman.ai/cheat-sheets-for-ai-neural-networks-machine-learning-deep-learning-big-data-678c51b4b463">issue de ce post</a></li>
</ul>
<p>Pour rappel, afin d’exécuter les exemples de code dans un <em>notebook</em> interactif, vous pouvez utiliser les raccourcis en haut de la page pour lancer celui-ci dans votre environnement de prédilection.</p>
</section>
</section>
<section id="logique-de-pandas" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Logique de <code>Pandas</code></h1>
<section id="anatomie-dune-table-pandas" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="anatomie-dune-table-pandas"><span class="header-section-number">2.1</span> Anatomie d’une table <code>Pandas</code></h2>
<p>L’objet central dans la logique <code>Pandas</code> est le <code>DataFrame</code>.
Il s’agit d’une structure particulière de données
à deux dimensions, structurées en alignant des lignes et colonnes.
Contrairement à une matrice, les colonnes
peuvent être de types différents.</p>
<p>Un <code>DataFrame</code> est composé des éléments suivants :</p>
<ul>
<li>l’indice de la ligne ;</li>
<li>le nom de la colonne ;</li>
<li>la valeur de la donnée ;</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://minio.lab.sspcloud.fr/lgaliana/python-ENSAE/inputs/merge_pandas/pandasDF.png" class="lightbox" data-glightbox="description: .lightbox-desc-1" data-gallery="quarto-lightbox-gallery-1" title="Structuration d’un DataFrame Pandas, empruntée à https://medium.com/epfl-extension-school/selecting-data-from-a-pandas-dataframe-53917dc39953"><img src="https://minio.lab.sspcloud.fr/lgaliana/python-ENSAE/inputs/merge_pandas/pandasDF.png" class="img-fluid figure-img" alt="Structuration d’un DataFrame Pandas, empruntée à https://medium.com/epfl-extension-school/selecting-data-from-a-pandas-dataframe-53917dc39953"></a></p>
<figcaption>Structuration d’un <em>DataFrame</em> <code>Pandas</code>,
empruntée à <a href="https://medium.com/epfl-extension-school/selecting-data-from-a-pandas-dataframe-53917dc39953" class="uri">https://medium.com/epfl-extension-school/selecting-data-from-a-pandas-dataframe-53917dc39953</a></figcaption>
</figure>
</div>
</section>
<section id="avant-le-dataframe-la-serie" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="avant-le-dataframe-la-serie"><span class="header-section-number">2.2</span> Avant le <code>DataFrame</code>, la <code>Serie</code></h2>
<p>En fait, un <em>DataFrame</em> est une collection d’objets appelés <code>pandas.Series</code>.
Ces <code>Series</code> sont des objets d’une dimension qui sont des extensions des
array-unidimensionnels <code>Numpy</code><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. En particulier, pour faciliter le traitement
de données catégorielles ou temporelles, des types de variables
supplémentaires sont disponibles dans <code>Pandas</code> par rapport à
<code>Numpy</code> (<code>categorical</code>, <code>datetime64</code> et <code>timedelta64</code>). Ces
types sont associés à des méthodes optimisées pour faciliter le traitement
de ces données.</p>
<p>Il existe plusieurs types possibles pour un <code>pandas.Series</code>, extension des types de données de base en <code>Python</code> qui détermineront ensuite le comportement de cette variable. En effet, de nombreuses opérations n’ont pas le même sens selon qu’on a une valeur numérique ou non.</p>
<p>Les types les plus simples (<code>int</code> ou <code>float</code>) correspondent aux valeurs numériques:</p>
<div id="63864a98" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="63864a98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="63864a98-1"><a href="#63864a98-1" aria-hidden="true" tabindex="-1"></a>poids <span class="op">=</span> pd.Series([<span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">12</span>])</span>
<span id="63864a98-2"><a href="#63864a98-2" aria-hidden="true" tabindex="-1"></a>poids</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>0     3
1     7
2    12
dtype: int64</code></pre>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-triangle-exclamation"></i> Le piège des valeurs manquantes</h3>
<p>De manière générale, si <code>Pandas</code> détecte exclusivement des valeurs entières dans une variable, il utilisera le type <code>int</code> pour optimiser la mémoire. Ce choix fait sens. Il a néanmoins un inconvénient: <code>Numpy</code>, et donc par extension <code>Pandas</code>, ne sait se représenter des valeurs manquantes pour le type <code>int</code> (plus d’éléments sur les valeurs manquantes ci-dessous).</p>
<p>En attendant le changement de couche basse en faveur d’<code>Arrow</code>, qui lui sait gérer les valeurs manquantes dans les <code>int</code>, la méthode à mettre en oeuvre est de convertir au type <code>float</code> si la variable sera amenée à avoir des valeurs manquantes, ce qui est assez simple:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x.astype(double)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Pour des données textuelles, c’est tout aussi simple:</p>
<div id="5d4f829f" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="5d4f829f"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="5d4f829f-1"><a href="#5d4f829f-1" aria-hidden="true" tabindex="-1"></a>animal <span class="op">=</span> pd.Series([<span class="st">"chat"</span>, <span class="st">"chien"</span>, <span class="st">"koala"</span>])</span>
<span id="5d4f829f-2"><a href="#5d4f829f-2" aria-hidden="true" tabindex="-1"></a>animal</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>0     chat
1    chien
2    koala
dtype: object</code></pre>
</div>
</div>
<p>Le type <code>object</code> correspond est une voiture-balais pour les types de données exclusivement textuelles (type <code>str</code>) ou mélangeant données textuelles et numériques (type <code>mixed</code>). Historiquement, c’était un type intermédiaire entre le <code>factor</code> et le <code>character</code> de <code>R</code>. Cependant, depuis quelques temps, il existe un type équivalent au <code>factor</code> de <code>R</code> dans <code>Pandas</code> pour
les variables dont le nombre de valeurs
est une liste finie et relativement courte, le type <code>category</code>. Le type <code>object</code> pouvant provoquer des erreurs inattendues par sa nature mixte, il est recommandé, lorsqu’on désire se concentrer sur une variable, de faire un choix sur la nature de celle-ci et de la convertir:</p>
<div id="c8317770" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>0     chat
1    chien
2    koala
dtype: object</code></pre>
</div>
</div>
<ol type="1">
<li>Pour convertir en <code>category</code> (le choix qui fait sens ici)</li>
<li>Pour convertir en <code>str</code> (si on désire faire des opérations textuelles ultérieures)</li>
</ol>
<p>Il faut bien examiner les types de ses objets <code>Pandas</code> et les convertir s’ils ne font pas sens ; <code>Pandas</code> fait certes des choix optimisés mais il est parfois nécessaire de les corriger car <code>Pandas</code> ne connaît pas vos usages ultérieurs des données. C’est l’une des opérations à faire lors
du <em>feature engineering</em>, ensemble des étapes de préparation des données pour un usage ultérieur.</p>
</section>
</section>
<section id="de-la-serie-au-dataframe" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> De la <code>Serie</code> au <code>DataFrame</code></h1>
<p>Nous avons crée deux séries indépendantes, <code>animal</code>
et <code>poids</code> qui sont pourtant reliées. Dans le monde matriciel, cela correspondrait à passer du vecteur à la matrice. Dans le monde de <code>Pandas</code>, cela veut dire passer de la <code>Serie</code> au <code>DataFrame</code>.</p>
<p>Cela se fait naturellement avec <code>Pandas</code>:</p>
<div id="80a5098d" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="80a5098d"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="80a5098d" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="80a5098d-1" class="code-annotation-target"><a href="#80a5098d-1" aria-hidden="true" tabindex="-1"></a>animaux <span class="op">=</span> pd.DataFrame(<span class="bu">zip</span>(animal, poids), columns<span class="op">=</span>[<span class="st">"animal"</span>, <span class="st">"poids"</span>])</span>
<span id="80a5098d-2"><a href="#80a5098d-2" aria-hidden="true" tabindex="-1"></a>animaux</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="80a5098d" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="80a5098d" data-code-lines="1" data-code-annotation="1">On doit utiliser <code>zip</code> ici car <code>Pandas</code> attend une structure du type <code>{"var1": [val1, val2], "var2": [val1, val2]}</code> qui n’est pas celle que nous avons préparé précédemment. Nous verrons néanmoins que cette approche n’est pas la plus usuelle pour créer un <code>DataFrame</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">animal</th>
<th data-quarto-table-cell-role="th">poids</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>chat</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>chien</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>koala</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<section id="lindexation" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="lindexation"><span class="header-section-number">3.1</span> L’indexation</h2>
<p>La différence essentielle entre une <code>Series</code> et un objet <code>Numpy</code> est l’indexation.
Dans <code>Numpy</code>,
l’indexation est implicite ; elle permet d’accéder à une donnée (celle à
l’index situé à la position <em>i</em>).
Avec une <code>Series</code>, on peut bien sûr utiliser un indice de position mais on peut
surtout faire appel à des indices plus explicites.</p>
<p>Ceci permet d’accéder à la donnée de manière plus naturelle, en utilisant les noms de colonne par exemple:</p>
<div id="fea24068" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="fea24068"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="fea24068-1"><a href="#fea24068-1" aria-hidden="true" tabindex="-1"></a>animaux[<span class="st">"poids"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>0     3
1     7
2    12
Name: poids, dtype: int64</code></pre>
</div>
</div>
<p>L’existence d’indice rend le <em>subsetting</em>, c’est-à-dire
la sélection de lignes ou de colonnes, particulièrement aisé. Les <em>DataFrames</em> pendant présentent deux indices: ceux des lignes et ceux des colonnes. On pourra faire des sélections sur ces deux dimensions.
En anticipant sur les exercices
ultérieurs, on peut voir que cela va nous faciliter la sélection de ligne:</p>
<div id="84154602" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="84154602"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="84154602-1"><a href="#84154602-1" aria-hidden="true" tabindex="-1"></a>animaux.loc[animaux[<span class="st">"animal"</span>] <span class="op">==</span> <span class="st">"chat"</span>, <span class="st">"poids"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>0    3
Name: poids, dtype: int64</code></pre>
</div>
</div>
<p>Cette instruction est équivalente à la commande <code>SQL</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> poids <span class="kw">FROM</span> animaux <span class="kw">WHERE</span> animal <span class="op">==</span> <span class="ot">"chat"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Si on revient sur notre jeu de données <code>animaux</code>,
on peut voir sur la gauche l’affichage du numéro de la ligne:</p>
<div id="a2294baa" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="a2294baa"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="a2294baa-1"><a href="#a2294baa-1" aria-hidden="true" tabindex="-1"></a>animaux</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">animal</th>
<th data-quarto-table-cell-role="th">poids</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>chat</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>chien</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>koala</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Il s’agit de l’indice par défaut pour la dimension ligne car nous n’en n’avons pas configuré un. Ce n’est pas obligatoire, il est tout à fait possible d’avoir un indice correspondant à une variable d’intérêt (nous découvrirons cela lorsque nous explorerons <code>groupby</code> dans le prochain chapitre). Cependant, cela peut être piégeux et il est recommandé que cela ne soit que transitoire, d’où l’intérêt de faire régulièrement des <code>reset_index</code>.</p>
</section>
<section id="le-concept-de-tidy-data" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="le-concept-de-tidy-data"><span class="header-section-number">3.2</span> Le concept de <em>tidy data</em></h2>
<p>Le concept de <strong><em>tidy</em></strong> data, popularisé par Hadley Wickham via ses packages <code>R</code> (voir <span class="citation" data-cites="wickham2023r">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-wickham2023r" role="doc-biblioref">2023</a>)</span>),
est parfaitement pertinent pour décrire la structure d’un <em>DataFrame</em> <code>Pandas</code>.
Les trois règles des données <em>tidy</em> sont les suivantes :</p>
<ul>
<li>Chaque <strong>variable</strong> possède sa propre colonne ;</li>
<li>Chaque <strong>observation</strong> possède sa propre ligne ;</li>
<li>Une <strong>valeur</strong>, matérialisant une observation d’une variable,
se trouve sur une unique cellule.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-2" data-gallery="quarto-lightbox-gallery-2" title="Illustration du concept de tidy data (emprunté à H. Wickham)"><img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" class="img-fluid figure-img" alt="Illustration du concept de tidy data (emprunté à H. Wickham)"></a></p>
<figcaption>Illustration du concept de <em>tidy data</em> (emprunté à H. Wickham)</figcaption>
</figure>
</div>
<p>Ces principes peuvent vous apparaître de bon sens mais vous découvrirez que de nombreux formats de données ne correspondent pas à ce principe. Par exemple, des tableurs Excel proposent régulièrement des valeurs à cheval sur plusieurs colonnes ou plusieurs lignes fusionnées. Restructurer cette donnée selon le principe des <em>tidy data</em> sera un enjeu pour être en mesure d’effectuer des traitements sur celle-ci.</p>
</section>
</section>
<section id="importer-des-données-avec-pandas" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Importer des données avec <code>Pandas</code></h1>
<p>S’il fallait créer à la main tous ses <em>DataFrames</em>
à partir de vecteurs, <code>Pandas</code> ne serait pas pratique. <code>Pandas</code> propose de nombreuses fonctions pour lire
des données stockées dans des formats différents.</p>
<p>Les données les plus simples à lire sont les données tabulaires stockées dans un format adéquat. Les deux principaux formats à connaître sont le <code>CSV</code> et le format <code>Parquet</code>. Le premier présente l’avantage de la simplicité - il est universel, connu de tous et est lisible par n’importe quel éditeur de texte. Le second gagne en popularité dans l’écosystème de la donnée, car il règle certaines limites du CSV (stockage optimisé, types des variables prédéfénis…) mais présente l’inconvénient de ne pas être lisible sans un outil adéquat (qui heureusement sont de plus en plus présents dans les éditeurs de code standard comme <code>VSCode</code>). Pour en savoir plus sur la différence entre <code>CSV</code> et <code>Parquet</code>, se reporter aux <a href="../../content/modern-ds/s3.html">chapitre d’approfondissement</a> sur le sujet.</p>
<p>Les donées stockées dans les autres formats textes dérivés du <code>CSV</code> (<code>.txt</code>, <code>.tsv</code>…) ou les formats type <code>JSON</code> sont lisibles avec <code>Pandas</code> mais il faut parfois itérer pour trouver les bons paramètres de lecture. Nous découvrirons dans d’autres chapitres que d’autres formats de données liés à des structures de données différentes sont tout aussi lisibles avec <code>Python</code>.</p>
<p>Les formats plats (<code>.csv</code>, <code>.txt</code>…) et le format <code>Parquet</code> sont simples à utiliser avec <code>Pandas</code> parce que d’une part ils ne sont pas propriétaires et d’autre part ils stockent la donnée sous
une forme <em>tidy</em>. Les données issues de tableurs, <code>Excel</code> ou <code>LibreOffice</code>, sont plus ou moins compliquées
à importer selon qu’elles suivent ce schéma ou non.
Cela vient du fait que ces outils sont utilisés à tord et à travers. Alors que dans le monde de la <em>data science</em> ceux-ci devraient servir principalement à diffuser des tableaux finaux pour du <em>reporting</em>, ils servent souvent à diffuser une donnée brute qui pourrait l’être par des canaux plus adaptés.
L’une des principales difficultés liées aux tableurs vient du fait que les données sont généralement associées à de la documentation dans le même onglet - par exemple le tableur comporte quelques lignes décrivant les sources avant le tableau - ce qui nécessite de l’intelligence humaine pour assister <code>Pandas</code> lors de la phase d’import. Celle-ci sera toujours possible mais lorsqu’il existe une alternative sous forme de fichier plat, il n’y a pas d’hésitation à avoir.</p>
<section id="lire-des-données-depuis-un-chemin-local" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="lire-des-données-depuis-un-chemin-local"><span class="header-section-number">4.1</span> Lire des données depuis un chemin local</h2>
<p>Cet exercice vise à présenter l’intérêt d’utiliser un chemin relatif
plutôt qu’un chemin absolu pour favoriser la reproductibilité du code. Nous préconiserons néanmoins par la suite de privilégier directement la lecture depuis internet lorsqu’elle est possible et n’implique pas le téléchargement récurrent d’un fichier volumineux.</p>
<p>Pour préparer cet exercice, le code suivant permettra de
télécharger des données qu’on va écrire en local</p>
<div id="7c8439a0" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="7c8439a0"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="7c8439a0-1"><a href="#7c8439a0-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="7c8439a0-2"><a href="#7c8439a0-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="7c8439a0-3"><a href="#7c8439a0-3" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://www.insee.fr/fr/statistiques/fichier/6800675/v_commune_2023.csv"</span></span>
<span id="7c8439a0-4"><a href="#7c8439a0-4" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url)</span>
<span id="7c8439a0-5"><a href="#7c8439a0-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="7c8439a0-6"><a href="#7c8439a0-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Assurez-vous que la requête a réussi</span></span>
<span id="7c8439a0-7"><a href="#7c8439a0-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> response.status_code <span class="op">==</span> <span class="dv">200</span>:</span>
<span id="7c8439a0-8"><a href="#7c8439a0-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">"cog_2023.csv"</span>, <span class="st">"wb"</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="7c8439a0-9"><a href="#7c8439a0-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">file</span>.write(response.content)</span>
<span id="7c8439a0-10"><a href="#7c8439a0-10" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="7c8439a0-11"><a href="#7c8439a0-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Échec du téléchargement du fichier. Statut HTTP :"</span>, response.status_code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice préliminaire: Importer un CSV (optionnel)</h3>
<ol type="1">
<li>Utiliser le code ci-dessus ☝️ pour télécharger les données. Utiliser <code>Pandas</code> pour lire le fichier téléchargé.</li>
<li>Chercher où les données ont été écrites. Observer la structure de ce dossier.</li>
<li>Créer un dossier depuis l’explorateur de fichiers (à gauche dans <code>Jupyter</code> ou <code>VSCode</code>). Déplacer le CSV et le <em>notebook</em>. Redémarrer le kernel et adaptez votre code si besoin. Refaire cette manipulation plusieurs fois avec des dossiers différents. Quel peut être le problème rencontré ?</li>
</ol>
</div>
</div>
<div id="a46854a1" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display" data-execution_count="11">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">TYPECOM</th>
<th data-quarto-table-cell-role="th">COM</th>
<th data-quarto-table-cell-role="th">REG</th>
<th data-quarto-table-cell-role="th">DEP</th>
<th data-quarto-table-cell-role="th">CTCD</th>
<th data-quarto-table-cell-role="th">ARR</th>
<th data-quarto-table-cell-role="th">TNCC</th>
<th data-quarto-table-cell-role="th">NCC</th>
<th data-quarto-table-cell-role="th">NCCENR</th>
<th data-quarto-table-cell-role="th">LIBELLE</th>
<th data-quarto-table-cell-role="th">CAN</th>
<th data-quarto-table-cell-role="th">COMPARENT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>COM</td>
<td>01001</td>
<td>84.0</td>
<td>01</td>
<td>01D</td>
<td>012</td>
<td>5</td>
<td>ABERGEMENT CLEMENCIAT</td>
<td>Abergement-Clémenciat</td>
<td>L'Abergement-Clémenciat</td>
<td>0108</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>COM</td>
<td>01002</td>
<td>84.0</td>
<td>01</td>
<td>01D</td>
<td>011</td>
<td>5</td>
<td>ABERGEMENT DE VAREY</td>
<td>Abergement-de-Varey</td>
<td>L'Abergement-de-Varey</td>
<td>0101</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Le principal problème de la lecture depuis des
fichiers stockés en local est le risque de
se rendre adhérant à un système de fichier
qui n’est pas forcément partagé. Il vaut mieux,
lorsque c’est possible, directement lire la donnée
avec un lien <code>HTTPS</code>, ce que <code>Pandas</code> sait faire.
De plus, lorsqu’on travaille sur de l’<em>open data</em> cela assure qu’on utilise la dernière donnée
disponible et non une duplication en local qui peut ne pas être à jour.</p>
</section>
<section id="lecture-depuis-un-csv-disponible-sur-internet" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="lecture-depuis-un-csv-disponible-sur-internet"><span class="header-section-number">4.2</span> Lecture depuis un CSV disponible sur internet</h2>
<p>L’URL d’accès aux données peut être conservé dans une variable <em>ad hoc</em> :</p>
<div id="0c7bd188" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="0c7bd188"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="0c7bd188-1"><a href="#0c7bd188-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://koumoul.com/s/data-fair/api/v1/datasets/igt-pouvoir-de-rechauffement-global/convert"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>L’objectif du prochain exercice est de se familiariser à l’import et l’affichage de données
avec <code>Pandas</code> et à l’affichage de quelques observations.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 1: Importer un CSV et explorer la structure de données</h3>
<ol type="1">
<li>Importer les données de l’Ademe à l’aide du package <code>Pandas</code> et de la commande consacrée pour l’import de csv. Nommer le <code>DataFrame</code> obtenu <code>emissions</code><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</li>
<li>Utiliser les méthodes adéquates afin d’afficher pour les 10 premières valeurs, les 15 dernières et un échantillon aléatoire de 10 valeurs grâce aux méthodes adéquates du <em>package</em> <code>Pandas</code>.</li>
<li>Tirer 5 pourcents de l’échantillon sans remise.</li>
<li>Ne conserver que les 10 premières lignes et tirer aléatoirement dans celles-ci pour obtenir un DataFrame de 100 données.</li>
<li>Faire 100 tirages à partir des 6 premières lignes avec une probabilité de 1/2 pour la première observation et une probabilité uniforme pour les autres.</li>
</ol>
<details>
<summary>
En cas de blocage à la question 1
</summary>
<p>Lire la documentation de <code>read_csv</code> (très bien faite) ou chercher des exemples
en ligne pour découvrir cette fonction.</p>
</details>
</div>
</div>
<p>Comme l’illustre cet exercice, l’affichage des <em>DataFrames</em> dans les <em>notebooks</em> est assez ergonomique.
Les premières et dernières lignes s’affichent
automatiquement. Pour des tables de valorisation présentes dans un
rapport ou un article de recherche, le chapitre suivant
présente <code>great_tables</code> qui offre de très riches
fonctionnalités de mise en forme des tableaux.</p>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-triangle-exclamation"></i> Warning</h3>
<p>Il faut faire attention au <code>display</code> et aux
commandes qui révèlent des données (<code>head</code>, <code>tail</code>, etc.)
dans un <em>notebook</em> qui exploite
des données confidentielles lorsqu’on utilise
le logiciel de contrôle de version <code>Git</code> (cf.&nbsp;chapitres dédiés).</p>
<p>En effet, on peut se
retrouver à partager des données, involontairement, dans l’historique
<code>Git</code>. Comme cela sera expliqué dans le chapitre dédié à <code>Git</code>,
un fichier, nommé le <code>.gitignore</code>, suffit pour créer quelques règles
évitant le partage involontaire de données avec <code>Git</code>.</p>
</div>
</div>
</section>
</section>
<section id="explorer-la-structure-dun-dataframe" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Explorer la structure d’un <em>DataFrame</em></h1>
<p><code>Pandas</code> propose donc un schéma de données assez familier aux utilisateurs
de logiciels statistiques comme <code>R</code>. A l’instar des
principaux paradigmes de traitement de la données comme le <em>tidyverse</em> (<code>R</code>),
la grammaire de <code>Pandas</code> est héritière de la logique <code>SQL</code>.
La philosophie est très proche : on effectue des opérations
de sélection de ligne, de colonne, des tris de ligne en fonction
de valeurs de certaines colonnes, des traitements standardisés sur des
variables, etc. De manière générale, on privilégie les traitements
faisant appel à des noms de variables à des numéros de ligne ou de
colonne.</p>
<p>Que vous soyez familiers de <code>SQL</code> ou de <code>R</code>, vous retrouverez une logique
similaire à celle que vous connaissez quoique les noms puissent diverger:
<code>df.loc[df['y']=='b']</code> s’écrira peut-être <code>df %&gt;% filter(y=='b')</code> (<code>R</code>)
ou <code>SELECT * FROM df WHERE y == 'b'</code> (<code>SQL</code>) mais la logique
est la même.</p>
<p><code>Pandas</code> propose énormément de fonctionnalités pré-implémentées.
Il est vivement recommandé, avant de se lancer dans l’écriture d’une
fonction, de se poser la question de son implémentation native dans <code>Numpy</code>, <code>Pandas</code>, etc.
La plupart du temps, s’il existe une solution implémentée dans une librairie, il convient
de l’utiliser car elle sera plus efficace que celle que vous mettrez en oeuvre.</p>
<p>Pour présenter les méthodes les plus pratiques pour l’analyse de données,
on peut partir de l’exemple des consommations de CO2 communales issues
des données de l’Ademe auquel les exercices précédents
étaient dédiés.</p>
<div id="abfc7751" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="abfc7751"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="abfc7751-1"><a href="#abfc7751-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(</span>
<span id="abfc7751-2"><a href="#abfc7751-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://koumoul.com/s/data-fair/api/v1/datasets/igt-pouvoir-de-rechauffement-global/convert"</span></span>
<span id="abfc7751-3"><a href="#abfc7751-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="abfc7751-4"><a href="#abfc7751-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>01001</td>
<td>L'ABERGEMENT-CLEMENCIAT</td>
<td>3711.425991</td>
<td>NaN</td>
<td>NaN</td>
<td>432.751835</td>
<td>101.430476</td>
<td>2.354558</td>
<td>6.911213</td>
<td>309.358195</td>
<td>793.156501</td>
<td>367.036172</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>01002</td>
<td>L'ABERGEMENT-DE-VAREY</td>
<td>475.330205</td>
<td>NaN</td>
<td>NaN</td>
<td>140.741660</td>
<td>140.675439</td>
<td>2.354558</td>
<td>6.911213</td>
<td>104.866444</td>
<td>348.997893</td>
<td>112.934207</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>01004</td>
<td>AMBERIEU-EN-BUGEY</td>
<td>499.043526</td>
<td>212.577908</td>
<td>NaN</td>
<td>10313.446515</td>
<td>5314.314445</td>
<td>998.332482</td>
<td>2930.354461</td>
<td>16616.822534</td>
<td>15642.420313</td>
<td>10732.376934</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>01005</td>
<td>AMBERIEUX-EN-DOMBES</td>
<td>1859.160954</td>
<td>NaN</td>
<td>NaN</td>
<td>1144.429311</td>
<td>216.217508</td>
<td>94.182310</td>
<td>276.448534</td>
<td>663.683146</td>
<td>1756.341319</td>
<td>782.404357</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>01006</td>
<td>AMBLEON</td>
<td>448.966808</td>
<td>NaN</td>
<td>NaN</td>
<td>77.033834</td>
<td>48.401549</td>
<td>NaN</td>
<td>NaN</td>
<td>43.714019</td>
<td>398.786800</td>
<td>51.681756</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35793</td>
<td>95676</td>
<td>VILLERS-EN-ARTHIES</td>
<td>1628.065094</td>
<td>NaN</td>
<td>NaN</td>
<td>165.045396</td>
<td>65.063617</td>
<td>11.772789</td>
<td>34.556067</td>
<td>176.098160</td>
<td>309.627908</td>
<td>235.439109</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">35794</td>
<td>95678</td>
<td>VILLIERS-ADAM</td>
<td>698.630772</td>
<td>NaN</td>
<td>NaN</td>
<td>1331.126598</td>
<td>111.480954</td>
<td>2.354558</td>
<td>6.911213</td>
<td>1395.529811</td>
<td>18759.370071</td>
<td>403.404815</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35795</td>
<td>95680</td>
<td>VILLIERS-LE-BEL</td>
<td>107.564967</td>
<td>NaN</td>
<td>NaN</td>
<td>8367.174532</td>
<td>225.622903</td>
<td>534.484607</td>
<td>1568.845431</td>
<td>22613.830247</td>
<td>12217.122402</td>
<td>13849.512001</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">35796</td>
<td>95682</td>
<td>VILLIERS-LE-SEC</td>
<td>1090.890170</td>
<td>NaN</td>
<td>NaN</td>
<td>326.748418</td>
<td>108.969749</td>
<td>2.354558</td>
<td>6.911213</td>
<td>67.235487</td>
<td>4663.232127</td>
<td>85.657725</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35797</td>
<td>95690</td>
<td>WY-DIT-JOLI-VILLAGE</td>
<td>1495.103542</td>
<td>NaN</td>
<td>NaN</td>
<td>125.236417</td>
<td>97.728612</td>
<td>4.709115</td>
<td>13.822427</td>
<td>117.450851</td>
<td>504.400972</td>
<td>147.867245</td>
</tr>
</tbody>
</table>

<p>35798 rows × 12 columns</p>
</div>
</div>
</div>
</div>
<section id="dimensions-et-structure-dun-dataframe" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="dimensions-et-structure-dun-dataframe"><span class="header-section-number">5.1</span> Dimensions et structure d’un <em>DataFrame</em></h2>
<p>Les premières méthodes utiles permettent d’afficher quelques
attributs d’un <code>DataFrame</code>.</p>
<div id="c4ab8069" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="c4ab8069"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="c4ab8069-1"><a href="#c4ab8069-1" aria-hidden="true" tabindex="-1"></a>df.axes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>[RangeIndex(start=0, stop=35798, step=1),
 Index(['INSEE commune', 'Commune', 'Agriculture', 'Autres transports',
        'Autres transports international', 'CO2 biomasse hors-total', 'Déchets',
        'Energie', 'Industrie hors-énergie', 'Résidentiel', 'Routier',
        'Tertiaire'],
       dtype='object')]</code></pre>
</div>
</div>
<div id="2649bd49" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="2649bd49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="2649bd49-1"><a href="#2649bd49-1" aria-hidden="true" tabindex="-1"></a>df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>Index(['INSEE commune', 'Commune', 'Agriculture', 'Autres transports',
       'Autres transports international', 'CO2 biomasse hors-total', 'Déchets',
       'Energie', 'Industrie hors-énergie', 'Résidentiel', 'Routier',
       'Tertiaire'],
      dtype='object')</code></pre>
</div>
</div>
<div id="3cba0732" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="3cba0732"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="3cba0732-1"><a href="#3cba0732-1" aria-hidden="true" tabindex="-1"></a>df.index</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>RangeIndex(start=0, stop=35798, step=1)</code></pre>
</div>
</div>
<p>Pour connaître les dimensions d’un DataFrame, on peut utiliser quelques méthodes
pratiques :</p>
<div id="77e6e12c" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="77e6e12c"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="77e6e12c-1"><a href="#77e6e12c-1" aria-hidden="true" tabindex="-1"></a>df.ndim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>2</code></pre>
</div>
</div>
<div id="0cf64a79" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="0cf64a79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="0cf64a79-1"><a href="#0cf64a79-1" aria-hidden="true" tabindex="-1"></a>df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>(35798, 12)</code></pre>
</div>
</div>
<div id="0ac1c224" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="0ac1c224"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="0ac1c224-1"><a href="#0ac1c224-1" aria-hidden="true" tabindex="-1"></a>df.size</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>429576</code></pre>
</div>
</div>
<p>Pour déterminer le nombre de valeurs uniques d’une variable, plutôt que chercher à écrire soi-même une fonction,
on utilise la
méthode <code>nunique</code>. Par exemple,</p>
<div id="5787872b" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="5787872b"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="5787872b-1"><a href="#5787872b-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Commune"</span>].nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>33338</code></pre>
</div>
</div>
<p><code>Pandas</code> propose énormément de méthodes utiles.
Voici un premier résumé de celles relatives à la structure des données, accompagné d’un comparatif avec <code>R</code> :</p>
<table class="table">
<colgroup>
<col style="width: 34%">
<col style="width: 15%">
<col style="width: 17%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Opération</th>
<th>pandas</th>
<th>dplyr (<code>R</code>)</th>
<th>data.table (<code>R</code>)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Récupérer le nom des colonnes</td>
<td><code>df.columns</code></td>
<td><code>colnames(df)</code></td>
<td><code>colnames(df)</code></td>
</tr>
<tr class="even">
<td>Récupérer les dimensions</td>
<td><code>df.shape</code></td>
<td><code>dim(df)</code></td>
<td><code>dim(df)</code></td>
</tr>
<tr class="odd">
<td>Récupérer le nombre de valeurs uniques d’une variable</td>
<td><code>df['myvar'].nunique()</code></td>
<td><code>df %&gt;%  summarise(distinct(myvar))</code></td>
<td><code>df[,uniqueN(myvar)]</code></td>
</tr>
</tbody>
</table>
</section>
<section id="accéder-à-des-éléments-dun-dataframe" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="accéder-à-des-éléments-dun-dataframe"><span class="header-section-number">5.2</span> Accéder à des éléments d’un DataFrame</h2>
<p>En SQL, effectuer des opérations sur les colonnes se fait avec la commande
<code>SELECT</code>. Avec <code>Pandas</code>,
pour accéder à une colonne dans son ensemble on peut
utiliser plusieurs approches :</p>
<ul>
<li><code>dataframe.variable</code>, par exemple <code>df.Energie</code>.
Cette méthode requiert néanmoins d’avoir des
noms de colonnes sans espace ou caractères spéciaux, ce qui exclut
souvent des jeux de données réels. Elle n’est pas recommandée. ;</li>
<li><code>dataframe[['variable']]</code> pour renvoyer la variable sous
forme de <code>DataFrame</code>. Cette méthode peut être assez piégeuse pour une variable seule, il vaut mieux lui privilégier <code>dataframe.loc[:,['variable']]</code> qui est plus explicite sur la nature de l’objet qu’on désire en sortie ;</li>
<li><code>dataframe['variable']</code> pour
renvoyer la variable sous forme de <code>Series</code>. Par exemple, <code>df[['Autres transports']]</code>
ou <code>df['Autres transports']</code>. C’est une manière préférable de procéder.</li>
</ul>
<p>Pour récupérer plusieurs colonnes à la fois, il y a deux approches, la seconde étant préférable :</p>
<ul>
<li><code>dataframe[['variable1', 'variable2']]</code> ;</li>
<li><code>dataframe.loc[:, ['variable1', 'variable2']]</code></li>
</ul>
<p>Cela est équivalent à <code>SELECT variable1, variable2 FROM dataframe</code> en SQL.</p>
<p>Le <code>.loc</code> peut apparaître excessivement verbeux. Il permet néanmoins de s’assurer qu’on effectue bien un <em>subset</em> sur la dimension des colonnes. Les <em>DataFrame</em> ayant deux indices, ceux des lignes et des colonnes, on peut avoir parfois des surprises avec l’implicite, il est plus fiable d’être explicite.</p>
</section>
<section id="accéder-à-des-lignes" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="accéder-à-des-lignes"><span class="header-section-number">5.3</span> Accéder à des lignes</h2>
<p>Pour accéder à une ou plusieurs valeurs d’un <code>DataFrame</code>,
il existe deux manières conseillées de procéder, selon la
forme des indices de lignes ou colonnes utilisées :</p>
<ul>
<li><code>df.iloc</code> : utilise les indices. C’est une méthode moyennement fiable car les indices d’un <em>DataFrame</em> peuvent évoluer au cours d’un traitement (notamment lorsqu’on fait des opérations par groupe).</li>
<li><code>df.loc</code> : utilise les labels. Cette méthode est recommandée.</li>
</ul>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-triangle-exclamation"></i> Warning</h3>
<p>Les bouts de code utilisant la structure <code>df.ix</code>
sont à bannir car la fonction est <em>deprecated</em> et peut
ainsi disparaître à tout moment.</p>
</div>
</div>
<p><code>iloc</code> va se référer à l’indexation de 0 à <em>N</em> où <em>N</em> est égal à <code>df.shape[0]</code> d’un
<code>pandas.DataFrame</code>. <code>loc</code> va se référer aux valeurs de l’index
de <code>df</code>.
Par exemple, avec le <code>pandas.DataFrame</code> <code>df_example</code>:</p>
<div id="429dc038" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="429dc038"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="429dc038-1"><a href="#429dc038-1" aria-hidden="true" tabindex="-1"></a>df_example <span class="op">=</span> pd.DataFrame(</span>
<span id="429dc038-2"><a href="#429dc038-2" aria-hidden="true" tabindex="-1"></a>    {<span class="st">"month"</span>: [<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">10</span>], <span class="st">"year"</span>: [<span class="dv">2012</span>, <span class="dv">2014</span>, <span class="dv">2013</span>, <span class="dv">2014</span>], <span class="st">"sale"</span>: [<span class="dv">55</span>, <span class="dv">40</span>, <span class="dv">84</span>, <span class="dv">31</span>]}</span>
<span id="429dc038-3"><a href="#429dc038-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="429dc038-4"><a href="#429dc038-4" aria-hidden="true" tabindex="-1"></a>df_example <span class="op">=</span> df_example.set_index(<span class="st">"month"</span>)</span>
<span id="429dc038-5"><a href="#429dc038-5" aria-hidden="true" tabindex="-1"></a>df_example</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">sale</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>2012</td>
<td>55</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>2014</td>
<td>40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>2013</td>
<td>84</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>2014</td>
<td>31</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<ul>
<li><code>df_example.loc[1, :]</code> donnera la première ligne de <code>df</code> (ligne où l’indice <code>month</code> est égal à 1) ;</li>
<li><code>df_example.iloc[1, :]</code> donnera la deuxième ligne (puisque l’indexation en <code>Python</code> commence à 0) ;</li>
<li><code>df_example.iloc[:, 1]</code> donnera la deuxième colonne, suivant le même principe.</li>
</ul>
<p>Les exercices ultérieurs permettront de pratiquer cette syntaxe sur notre jeu de données des émissions de gaz carbonique.</p>
</section>
</section>
<section id="principales-manipulations-de-données" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Principales manipulations de données</h1>
<p>Les opérations les plus fréquentes en <code>SQL</code> sont résumées par le tableau suivant.
Il est utile de les connaître (beaucoup de syntaxes de maniement de données
reprennent ces termes) car, d’une
manière ou d’une autre, elles couvrent la plupart
des usages de manipulation des données. Nous allons en décrire, par le suite, quelques unes:</p>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 20%">
<col style="width: 14%">
<col style="width: 23%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>Opération</th>
<th>SQL</th>
<th>pandas</th>
<th>dplyr (<code>R</code>)</th>
<th>data.table (<code>R</code>)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sélectionner des variables par leur nom</td>
<td><code>SELECT</code></td>
<td><code>df[['Autres transports','Energie']]</code></td>
<td><code>df %&gt;% select(Autres transports, Energie)</code></td>
<td><code>df[, c('Autres transports','Energie')]</code></td>
</tr>
<tr class="even">
<td>Sélectionner des observations selon une ou plusieurs conditions;</td>
<td><code>FILTER</code></td>
<td><code>df[df['Agriculture']&gt;2000]</code></td>
<td><code>df %&gt;% filter(Agriculture&gt;2000)</code></td>
<td><code>df[Agriculture&gt;2000]</code></td>
</tr>
<tr class="odd">
<td>Trier la table selon une ou plusieurs variables</td>
<td><code>SORT BY</code></td>
<td><code>df.sort_values(['Commune','Agriculture'])</code></td>
<td><code>df %&gt;% arrange(Commune, Agriculture)</code></td>
<td><code>df[order(Commune, Agriculture)]</code></td>
</tr>
<tr class="even">
<td>Ajouter des variables qui sont fonction d’autres variables;</td>
<td><code>SELECT *, LOG(Agriculture) AS x FROM df</code></td>
<td><code>df['x'] = np.log(df['Agriculture'])</code></td>
<td><code>df %&gt;% mutate(x = log(Agriculture))</code></td>
<td><code>df[,x := log(Agriculture)]</code></td>
</tr>
<tr class="odd">
<td>Effectuer une opération par groupe</td>
<td><code>GROUP BY</code></td>
<td><code>df.groupby('Commune').mean()</code></td>
<td><code>df %&gt;% group_by(Commune) %&gt;% summarise(m = mean)</code></td>
<td><code>df[,mean(Commune), by = Commune]</code></td>
</tr>
<tr class="even">
<td>Joindre deux bases de données (<em>inner join</em>)</td>
<td><code>SELECT * FROM table1 INNER JOIN table2 ON table1.id = table2.x</code></td>
<td><code>table1.merge(table2, left_on = 'id', right_on = 'x')</code></td>
<td><code>table1 %&gt;% inner_join(table2, by = c('id'='x'))</code></td>
<td><code>merge(table1, table2, by.x = 'id', by.y = 'x')</code></td>
</tr>
</tbody>
</table>
<section id="opérations-sur-les-colonnes-ajouter-ou-retirer-des-variables-les-renommer-etc." class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="opérations-sur-les-colonnes-ajouter-ou-retirer-des-variables-les-renommer-etc."><span class="header-section-number">6.1</span> Opérations sur les colonnes : ajouter ou retirer des variables, les renommer, etc.</h2>
<p>Sur le plan technique, les <code>DataFrames</code> <code>Pandas</code> sont des objets <em>mutables</em> en langage <code>Python</code>,
c’est-à-dire qu’il est possible de faire évoluer le <code>DataFrame</code> au grès
des opérations mises en oeuvre.</p>
<p>L’opération la plus classique consiste à ajouter ou retirer des variables à la table de données.
La manière la plus simple d’opérer pour ajouter des colonnes est
d’utiliser la réassignation. Par exemple, pour créer une variable <code>dep</code> qui correspond aux deux premiers numéros du code commune (code Insee), il suffit de prendre la variable et lui appliquer le traitement adapté (en l’occurrence ne garder que ses deux premières caractères):</p>
<div id="63867f96" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="63867f96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="63867f96-1"><a href="#63867f96-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dep"</span>] <span class="op">=</span> df[<span class="st">"INSEE commune"</span>].<span class="bu">str</span>[:<span class="dv">2</span>]</span>
<span id="63867f96-2"><a href="#63867f96-2" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
<th data-quarto-table-cell-role="th">dep</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>01001</td>
<td>L'ABERGEMENT-CLEMENCIAT</td>
<td>3711.425991</td>
<td>NaN</td>
<td>NaN</td>
<td>432.751835</td>
<td>101.430476</td>
<td>2.354558</td>
<td>6.911213</td>
<td>309.358195</td>
<td>793.156501</td>
<td>367.036172</td>
<td>01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>01002</td>
<td>L'ABERGEMENT-DE-VAREY</td>
<td>475.330205</td>
<td>NaN</td>
<td>NaN</td>
<td>140.741660</td>
<td>140.675439</td>
<td>2.354558</td>
<td>6.911213</td>
<td>104.866444</td>
<td>348.997893</td>
<td>112.934207</td>
<td>01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>01004</td>
<td>AMBERIEU-EN-BUGEY</td>
<td>499.043526</td>
<td>212.577908</td>
<td>NaN</td>
<td>10313.446515</td>
<td>5314.314445</td>
<td>998.332482</td>
<td>2930.354461</td>
<td>16616.822534</td>
<td>15642.420313</td>
<td>10732.376934</td>
<td>01</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>En SQL, la manière de procéder dépend du moteur d’exécution. En pseudo-code cela donne</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> everything(), <span class="fu">SUBSTR</span>(<span class="ot">"code_insee"</span>, <span class="dv">2</span>) <span class="kw">AS</span> dep <span class="kw">FROM</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Il est possible d’appliquer cette approche de création de colonnes sur plusieurs colonnes. Un des
intérêts de cette approche est qu’elle permet de recycler le nom de colonnes.</p>
<div id="53060648" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="53060648"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="53060648-1"><a href="#53060648-1" aria-hidden="true" tabindex="-1"></a><span class="bu">vars</span> <span class="op">=</span> [<span class="st">"Agriculture"</span>, <span class="st">"Déchets"</span>, <span class="st">"Energie"</span>]</span>
<span id="53060648-2"><a href="#53060648-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="53060648-3"><a href="#53060648-3" aria-hidden="true" tabindex="-1"></a>df[[v <span class="op">+</span> <span class="st">"_log"</span> <span class="cf">for</span> v <span class="kw">in</span> <span class="bu">vars</span>]] <span class="op">=</span> np.log(df.loc[:, <span class="bu">vars</span>])</span>
<span id="53060648-4"><a href="#53060648-4" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
<th data-quarto-table-cell-role="th">dep</th>
<th data-quarto-table-cell-role="th">Agriculture_log</th>
<th data-quarto-table-cell-role="th">Déchets_log</th>
<th data-quarto-table-cell-role="th">Energie_log</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>01001</td>
<td>L'ABERGEMENT-CLEMENCIAT</td>
<td>3711.425991</td>
<td>NaN</td>
<td>NaN</td>
<td>432.751835</td>
<td>101.430476</td>
<td>2.354558</td>
<td>6.911213</td>
<td>309.358195</td>
<td>793.156501</td>
<td>367.036172</td>
<td>01</td>
<td>8.219171</td>
<td>4.619374</td>
<td>0.856353</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>01002</td>
<td>L'ABERGEMENT-DE-VAREY</td>
<td>475.330205</td>
<td>NaN</td>
<td>NaN</td>
<td>140.741660</td>
<td>140.675439</td>
<td>2.354558</td>
<td>6.911213</td>
<td>104.866444</td>
<td>348.997893</td>
<td>112.934207</td>
<td>01</td>
<td>6.164010</td>
<td>4.946455</td>
<td>0.856353</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>01004</td>
<td>AMBERIEU-EN-BUGEY</td>
<td>499.043526</td>
<td>212.577908</td>
<td>NaN</td>
<td>10313.446515</td>
<td>5314.314445</td>
<td>998.332482</td>
<td>2930.354461</td>
<td>16616.822534</td>
<td>15642.420313</td>
<td>10732.376934</td>
<td>01</td>
<td>6.212693</td>
<td>8.578159</td>
<td>6.906086</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>La requête équivalente en SQL serait assez fastidieuse à écrire. Sur ce genre d’opérations, on voit bien l’intérêt d’avoir une librairie haut niveau comme <code>Pandas</code>.</p>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-triangle-exclamation"></i> Warning</h3>
<p>Cela est possible grâce à la vectorisation native des opérations de <code>Numpy</code> et à la magie <code>Pandas</code> qui réarrange tout ceci. Ce n’est pas utilisable avec n’importe quelle fonction. Pour d’autres fonctions, il faudra utiliser <code>assign</code>, généralement par le biais de <em>lambda functions</em>, des fonctions temporaires faisant office de passe plat. Par exemple, pour créer une variable selon cette approche, il faudrait faire:</p>
<div id="452f8470" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df.assign(Energie_log<span class="op">=</span><span class="kw">lambda</span> x: np.log(x[<span class="st">"Energie"</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
<th data-quarto-table-cell-role="th">dep</th>
<th data-quarto-table-cell-role="th">Agriculture_log</th>
<th data-quarto-table-cell-role="th">Déchets_log</th>
<th data-quarto-table-cell-role="th">Energie_log</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>01001</td>
<td>L'ABERGEMENT-CLEMENCIAT</td>
<td>3711.425991</td>
<td>NaN</td>
<td>NaN</td>
<td>432.751835</td>
<td>101.430476</td>
<td>2.354558</td>
<td>6.911213</td>
<td>309.358195</td>
<td>793.156501</td>
<td>367.036172</td>
<td>01</td>
<td>8.219171</td>
<td>4.619374</td>
<td>0.856353</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>01002</td>
<td>L'ABERGEMENT-DE-VAREY</td>
<td>475.330205</td>
<td>NaN</td>
<td>NaN</td>
<td>140.741660</td>
<td>140.675439</td>
<td>2.354558</td>
<td>6.911213</td>
<td>104.866444</td>
<td>348.997893</td>
<td>112.934207</td>
<td>01</td>
<td>6.164010</td>
<td>4.946455</td>
<td>0.856353</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>01004</td>
<td>AMBERIEU-EN-BUGEY</td>
<td>499.043526</td>
<td>212.577908</td>
<td>NaN</td>
<td>10313.446515</td>
<td>5314.314445</td>
<td>998.332482</td>
<td>2930.354461</td>
<td>16616.822534</td>
<td>15642.420313</td>
<td>10732.376934</td>
<td>01</td>
<td>6.212693</td>
<td>8.578159</td>
<td>6.906086</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>01005</td>
<td>AMBERIEUX-EN-DOMBES</td>
<td>1859.160954</td>
<td>NaN</td>
<td>NaN</td>
<td>1144.429311</td>
<td>216.217508</td>
<td>94.182310</td>
<td>276.448534</td>
<td>663.683146</td>
<td>1756.341319</td>
<td>782.404357</td>
<td>01</td>
<td>7.527881</td>
<td>5.376285</td>
<td>4.545232</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>01006</td>
<td>AMBLEON</td>
<td>448.966808</td>
<td>NaN</td>
<td>NaN</td>
<td>77.033834</td>
<td>48.401549</td>
<td>NaN</td>
<td>NaN</td>
<td>43.714019</td>
<td>398.786800</td>
<td>51.681756</td>
<td>01</td>
<td>6.106949</td>
<td>3.879532</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35793</td>
<td>95676</td>
<td>VILLERS-EN-ARTHIES</td>
<td>1628.065094</td>
<td>NaN</td>
<td>NaN</td>
<td>165.045396</td>
<td>65.063617</td>
<td>11.772789</td>
<td>34.556067</td>
<td>176.098160</td>
<td>309.627908</td>
<td>235.439109</td>
<td>95</td>
<td>7.395148</td>
<td>4.175366</td>
<td>2.465791</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">35794</td>
<td>95678</td>
<td>VILLIERS-ADAM</td>
<td>698.630772</td>
<td>NaN</td>
<td>NaN</td>
<td>1331.126598</td>
<td>111.480954</td>
<td>2.354558</td>
<td>6.911213</td>
<td>1395.529811</td>
<td>18759.370071</td>
<td>403.404815</td>
<td>95</td>
<td>6.549122</td>
<td>4.713854</td>
<td>0.856353</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35795</td>
<td>95680</td>
<td>VILLIERS-LE-BEL</td>
<td>107.564967</td>
<td>NaN</td>
<td>NaN</td>
<td>8367.174532</td>
<td>225.622903</td>
<td>534.484607</td>
<td>1568.845431</td>
<td>22613.830247</td>
<td>12217.122402</td>
<td>13849.512001</td>
<td>95</td>
<td>4.678095</td>
<td>5.418865</td>
<td>6.281303</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">35796</td>
<td>95682</td>
<td>VILLIERS-LE-SEC</td>
<td>1090.890170</td>
<td>NaN</td>
<td>NaN</td>
<td>326.748418</td>
<td>108.969749</td>
<td>2.354558</td>
<td>6.911213</td>
<td>67.235487</td>
<td>4663.232127</td>
<td>85.657725</td>
<td>95</td>
<td>6.994749</td>
<td>4.691070</td>
<td>0.856353</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35797</td>
<td>95690</td>
<td>WY-DIT-JOLI-VILLAGE</td>
<td>1495.103542</td>
<td>NaN</td>
<td>NaN</td>
<td>125.236417</td>
<td>97.728612</td>
<td>4.709115</td>
<td>13.822427</td>
<td>117.450851</td>
<td>504.400972</td>
<td>147.867245</td>
<td>95</td>
<td>7.309951</td>
<td>4.582194</td>
<td>1.549500</td>
</tr>
</tbody>
</table>

<p>35798 rows × 16 columns</p>
</div>
</div>
</div>
</div>
<p>Avec des méthodes de <code>Pandas</code> ou de <code>Numpy</code> comme ici, cela n’a pas d’intérêt, c’est même contreproductif car cela ralentit le code.</p>
</div>
</div>
<p>On peut facilement renommer des variables avec la méthode <code>rename</code> qui
fonctionne bien avec des dictionnaires. Pour renommer des colonnes il faut
préciser le paramètre <code>axis = 'columns'</code> ou <code>axis=1</code>. Le paramètre <code>axis</code> est souvent nécessaire car par défaut de nombreuses méthodes de <code>Pandas</code> supposent que l’indice sur lequel les opérations sont faites est l’indice des lignes :</p>
<div id="743c7eb6" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="743c7eb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="743c7eb6-1"><a href="#743c7eb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.rename({<span class="st">"Energie"</span>: <span class="st">"eneg"</span>, <span class="st">"Agriculture"</span>: <span class="st">"agr"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="743c7eb6-2"><a href="#743c7eb6-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">agr</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">eneg</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
<th data-quarto-table-cell-role="th">dep</th>
<th data-quarto-table-cell-role="th">Agriculture_log</th>
<th data-quarto-table-cell-role="th">Déchets_log</th>
<th data-quarto-table-cell-role="th">Energie_log</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>01001</td>
<td>L'ABERGEMENT-CLEMENCIAT</td>
<td>3711.425991</td>
<td>NaN</td>
<td>NaN</td>
<td>432.751835</td>
<td>101.430476</td>
<td>2.354558</td>
<td>6.911213</td>
<td>309.358195</td>
<td>793.156501</td>
<td>367.036172</td>
<td>01</td>
<td>8.219171</td>
<td>4.619374</td>
<td>0.856353</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>01002</td>
<td>L'ABERGEMENT-DE-VAREY</td>
<td>475.330205</td>
<td>NaN</td>
<td>NaN</td>
<td>140.741660</td>
<td>140.675439</td>
<td>2.354558</td>
<td>6.911213</td>
<td>104.866444</td>
<td>348.997893</td>
<td>112.934207</td>
<td>01</td>
<td>6.164010</td>
<td>4.946455</td>
<td>0.856353</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>01004</td>
<td>AMBERIEU-EN-BUGEY</td>
<td>499.043526</td>
<td>212.577908</td>
<td>NaN</td>
<td>10313.446515</td>
<td>5314.314445</td>
<td>998.332482</td>
<td>2930.354461</td>
<td>16616.822534</td>
<td>15642.420313</td>
<td>10732.376934</td>
<td>01</td>
<td>6.212693</td>
<td>8.578159</td>
<td>6.906086</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>01005</td>
<td>AMBERIEUX-EN-DOMBES</td>
<td>1859.160954</td>
<td>NaN</td>
<td>NaN</td>
<td>1144.429311</td>
<td>216.217508</td>
<td>94.182310</td>
<td>276.448534</td>
<td>663.683146</td>
<td>1756.341319</td>
<td>782.404357</td>
<td>01</td>
<td>7.527881</td>
<td>5.376285</td>
<td>4.545232</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>01006</td>
<td>AMBLEON</td>
<td>448.966808</td>
<td>NaN</td>
<td>NaN</td>
<td>77.033834</td>
<td>48.401549</td>
<td>NaN</td>
<td>NaN</td>
<td>43.714019</td>
<td>398.786800</td>
<td>51.681756</td>
<td>01</td>
<td>6.106949</td>
<td>3.879532</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Enfin, pour effacer des colonnes, on utilise la méthode <code>drop</code> avec l’argument
<code>columns</code>:</p>
<div id="d33d71f4" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="d33d71f4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="d33d71f4-1"><a href="#d33d71f4-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">"eneg"</span>, <span class="st">"agr"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="réordonner-les-observations" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="réordonner-les-observations"><span class="header-section-number">6.2</span> Réordonner les observations</h2>
<p>La méthode <code>sort_values</code> permet de réordonner les observations d’un <code>DataFrame</code>, en laissant l’ordre des colonnes identiques.</p>
<p>Par exemple,
si on désire classer par ordre décroissant de consommation de CO2 du secteur
résidentiel, on fera</p>
<div id="f9e46d8a" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="f9e46d8a"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="f9e46d8a-1"><a href="#f9e46d8a-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.sort_values(<span class="st">"Résidentiel"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="f9e46d8a-2"><a href="#f9e46d8a-2" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
<th data-quarto-table-cell-role="th">dep</th>
<th data-quarto-table-cell-role="th">Agriculture_log</th>
<th data-quarto-table-cell-role="th">Déchets_log</th>
<th data-quarto-table-cell-role="th">Energie_log</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">12167</td>
<td>31555</td>
<td>TOULOUSE</td>
<td>4482.980062</td>
<td>130.792683</td>
<td>576394.181208</td>
<td>88863.732538</td>
<td>277062.573234</td>
<td>410675.902028</td>
<td>586054.672836</td>
<td>288175.400126</td>
<td>31</td>
<td>7.268255</td>
<td>11.394859</td>
<td>11.424640</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16774</td>
<td>44109</td>
<td>NANTES</td>
<td>138738.544337</td>
<td>250814.701179</td>
<td>193478.248177</td>
<td>18162.261628</td>
<td>77897.138554</td>
<td>354259.013785</td>
<td>221068.632724</td>
<td>173447.582779</td>
<td>44</td>
<td>5.513507</td>
<td>9.807101</td>
<td>9.767748</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27294</td>
<td>67482</td>
<td>STRASBOURG</td>
<td>124998.576639</td>
<td>122266.944279</td>
<td>253079.442156</td>
<td>119203.251573</td>
<td>135685.440035</td>
<td>353586.424577</td>
<td>279544.852332</td>
<td>179562.761386</td>
<td>67</td>
<td>6.641974</td>
<td>11.688585</td>
<td>9.885411</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Ainsi, en une ligne de code, on identifie les villes où le secteur
résidentiel consomme le plus. En SQL on ferait</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> df <span class="kw">ORDER</span> <span class="kw">BY</span> <span class="kw">DESC</span> <span class="ot">"Résidentiel"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="filter" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="filter"><span class="header-section-number">6.3</span> Filter</h2>
<p>L’opération de sélection de lignes s’appelle <code>FILTER</code> en SQL. Elle s’utilise
en fonction d’une condition logique (clause <code>WHERE</code>). On sélectionne les
données sur une condition logique.</p>
<p>Il existe plusieurs méthodes en <code>Pandas</code>. La plus simple est d’utiliser les <em>boolean mask</em>, déjà vus dans le chapitre
<a href="../../content/manipulation/01_numpy.html"><code>numpy</code></a>.</p>
<p>Par exemple, pour sélectionner les communes dans les Hauts-de-Seine, on
peut commencer par utiliser le résultat de la méthode <code>str.startswith</code> (qui renvoie
<code>True</code> ou <code>False</code>) :</p>
<div id="f331d745" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="f331d745"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="f331d745-1"><a href="#f331d745-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"INSEE commune"</span>].<span class="bu">str</span>.startswith(<span class="st">"92"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>12167    False
16774    False
27294    False
12729    False
22834    False
         ...  
20742    False
20817    False
20861    False
20898    False
20957    False
Name: INSEE commune, Length: 35798, dtype: bool</code></pre>
</div>
</div>
<p><code>str.</code> est une méthode particulière en <code>Pandas</code> qui permet de traiter chaque valeur d’un vecteur comme un <code>string</code> natif en <code>Python</code> sur lequel appliquer une méthode ultérieure (en l’occurrence <code>startswith</code>).</p>
<p>L’instruction ci-dessus renvoie un vecteur de booléens. Nous avons vu précédemment que la méthode <code>loc</code> servait à faire du <em>subsetting</em> sur l’indice des lignes comme des colonnes. Elle fonctionne avec des vecteurs booléens. Dans ce cas, si on fait un <em>subsetting</em> sur la dimension ligne (resp. colonne), elle va renvoyer toutes les observations (resp. variable) qui
satisfont cette condition.</p>
<p>Ainsi, en mettant bout à bout ces deux élements, on peut filter nos données pour n’avoir que les résultats
du 92:</p>
<div id="18d60ec3" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="18d60ec3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="18d60ec3-1"><a href="#18d60ec3-1" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">"INSEE commune"</span>].<span class="bu">str</span>.startswith(<span class="st">"92"</span>)].head(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
<th data-quarto-table-cell-role="th">dep</th>
<th data-quarto-table-cell-role="th">Agriculture_log</th>
<th data-quarto-table-cell-role="th">Déchets_log</th>
<th data-quarto-table-cell-role="th">Energie_log</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">35494</td>
<td>92012</td>
<td>BOULOGNE-BILLANCOURT</td>
<td>1250.483441</td>
<td>34.234669</td>
<td>51730.704250</td>
<td>964.828694</td>
<td>25882.493998</td>
<td>92216.971456</td>
<td>64985.280901</td>
<td>60349.109482</td>
<td>92</td>
<td>NaN</td>
<td>6.871951</td>
<td>9.084530</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">35501</td>
<td>92025</td>
<td>COLOMBES</td>
<td>411.371588</td>
<td>14.220061</td>
<td>53923.847088</td>
<td>698.685861</td>
<td>50244.664227</td>
<td>87469.549463</td>
<td>52070.927943</td>
<td>41526.600867</td>
<td>92</td>
<td>NaN</td>
<td>6.549201</td>
<td>9.461557</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Le code SQL équivalent peu varier selon le moteur d’exécution (<code>DuckDB</code>, <code>PostGre</code>, <code>MySQL</code>) mais prendrait une forme similaire à celle-ci:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> df <span class="kw">WHERE</span> STARTSWITH(<span class="ot">"INSEE commune"</span>, <span class="ot">"92"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="résumé-des-principales-opérations" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="résumé-des-principales-opérations"><span class="header-section-number">6.4</span> Résumé des principales opérations</h2>
<p>Les principales manipulations sont les suivantes:</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/select_pandas.png" class="img-fluid" alt="Sélectionner des colonnes">
<img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/rename_pandas.png" class="img-fluid" alt="Renommer des colonnes"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/mutate_pandas.png" class="img-fluid" alt="Créer de nouvelles colonnes">
<img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/filter_pandas.png" class="img-fluid" alt="Sélectionner des lignes"></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/arrange_pandas.png" class="lightbox" data-glightbox="description: .lightbox-desc-3" data-gallery="quarto-lightbox-gallery-3" title="Réordonner le DataFrame"><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/arrange_pandas.png" class="img-fluid figure-img" alt="Réordonner le DataFrame"></a></p>
<figcaption>Réordonner le <em>DataFrame</em></figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="statistiques-descriptives" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Statistiques descriptives</h1>
<p>Pour repartir de la source brute, recréeons notre jeu de données pour les exemples:</p>
<div id="7c319951" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="7c319951"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="7c319951-1"><a href="#7c319951-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(</span>
<span id="7c319951-2"><a href="#7c319951-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://koumoul.com/s/data-fair/api/v1/datasets/igt-pouvoir-de-rechauffement-global/convert"</span></span>
<span id="7c319951-3"><a href="#7c319951-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="7c319951-4"><a href="#7c319951-4" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>01001</td>
<td>L'ABERGEMENT-CLEMENCIAT</td>
<td>3711.425991</td>
<td>NaN</td>
<td>NaN</td>
<td>432.751835</td>
<td>101.430476</td>
<td>2.354558</td>
<td>6.911213</td>
<td>309.358195</td>
<td>793.156501</td>
<td>367.036172</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>01002</td>
<td>L'ABERGEMENT-DE-VAREY</td>
<td>475.330205</td>
<td>NaN</td>
<td>NaN</td>
<td>140.741660</td>
<td>140.675439</td>
<td>2.354558</td>
<td>6.911213</td>
<td>104.866444</td>
<td>348.997893</td>
<td>112.934207</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>01004</td>
<td>AMBERIEU-EN-BUGEY</td>
<td>499.043526</td>
<td>212.577908</td>
<td>NaN</td>
<td>10313.446515</td>
<td>5314.314445</td>
<td>998.332482</td>
<td>2930.354461</td>
<td>16616.822534</td>
<td>15642.420313</td>
<td>10732.376934</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p><code>Pandas</code> embarque plusieurs méthodes pour construire des statistiques agrégées: somme, nombre de valeurs unique, nombre de valeurs non manquantes, moyenne, variance, etc.</p>
<p>La méthode la plus générique est <code>describe</code></p>
<div id="c5e571c7" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="c5e571c7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="c5e571c7-1"><a href="#c5e571c7-1" aria-hidden="true" tabindex="-1"></a>df.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>35736.000000</td>
<td>9979.000000</td>
<td>2.891000e+03</td>
<td>35798.000000</td>
<td>35792.000000</td>
<td>3.449000e+04</td>
<td>3.449000e+04</td>
<td>35792.000000</td>
<td>35778.000000</td>
<td>35798.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>2459.975760</td>
<td>654.919940</td>
<td>7.692345e+03</td>
<td>1774.381550</td>
<td>410.806329</td>
<td>6.625698e+02</td>
<td>2.423128e+03</td>
<td>1783.677872</td>
<td>3535.501245</td>
<td>1105.165915</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>2926.957701</td>
<td>9232.816833</td>
<td>1.137643e+05</td>
<td>7871.341922</td>
<td>4122.472608</td>
<td>2.645571e+04</td>
<td>5.670374e+04</td>
<td>8915.902379</td>
<td>9663.156628</td>
<td>5164.182507</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>0.003432</td>
<td>0.000204</td>
<td>3.972950e-04</td>
<td>3.758088</td>
<td>0.132243</td>
<td>2.354558e+00</td>
<td>1.052998e+00</td>
<td>1.027266</td>
<td>0.555092</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>797.682631</td>
<td>52.560412</td>
<td>1.005097e+01</td>
<td>197.951108</td>
<td>25.655166</td>
<td>2.354558e+00</td>
<td>6.911213e+00</td>
<td>96.052911</td>
<td>419.700460</td>
<td>94.749885</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>1559.381285</td>
<td>106.795928</td>
<td>1.992434e+01</td>
<td>424.849988</td>
<td>54.748653</td>
<td>4.709115e+00</td>
<td>1.382243e+01</td>
<td>227.091193</td>
<td>1070.895593</td>
<td>216.297718</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>3007.883903</td>
<td>237.341501</td>
<td>3.298311e+01</td>
<td>1094.749825</td>
<td>110.820941</td>
<td>5.180027e+01</td>
<td>1.520467e+02</td>
<td>749.469293</td>
<td>3098.612157</td>
<td>576.155869</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>98949.317760</td>
<td>513140.971691</td>
<td>3.303394e+06</td>
<td>576394.181208</td>
<td>275500.374439</td>
<td>2.535858e+06</td>
<td>6.765119e+06</td>
<td>410675.902028</td>
<td>586054.672836</td>
<td>288175.400126</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>qui ressemble à la méthode éponyme en <code>Stata</code> ou à la <code>PROC FREQ</code> de <code>SAS</code>, deux langages propriétaires.
Elle nous donne néanmoins beaucoup d’information et on est souvent noyé par celle-ci. Il est donc plus pratique de directement travailler sur quelques colonnes ou de choisir soi-même les statistiques qu’on désire utiliser.</p>
<section id="comptages" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="comptages"><span class="header-section-number">7.1</span> Comptages</h2>
<p>Le premier type de statistiques qu’on peut vouloir mettre en oeuvre relève du comptage ou dénombrement des valeurs.</p>
<p>Si on désire, par exemple, connaître le nombre de communes dans notre jeu de données, on pourra utiliser la méthode <code>count</code> ou alors <code>nunique</code> si on s’intéresse aux valeurs non dupliquées.</p>
<div id="90fced84" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="90fced84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="90fced84-1"><a href="#90fced84-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Commune"</span>].count()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>35798</code></pre>
</div>
</div>
<div id="e8d32a8d" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="e8d32a8d"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="e8d32a8d-1"><a href="#e8d32a8d-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Commune"</span>].nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>33338</code></pre>
</div>
</div>
<p>En SQL, la première instruction serait <code>SELECT COUNT(Commune) FROM df</code>, la seconde <code>SELECT COUNT DISTINCT Commune FROM df</code>.
Ici, cela ne permet donc de comprendre qu’il peut y avoir des doublons dans la colonne <code>Commune</code>, ce dont il faudra tenir compte si on désire identifier nos communes de manière unique (ce sera un sujet lorsque le prochain chapitre abordera la question du croisement des données).</p>
<p>La cohérence de la syntaxe <code>Pandas</code> permet de faire cela pour plusieurs colonnes de manière simultanée. En SQL cela serait possible mais le code à mettre en oeuvre commence à devenir assez verbeux:</p>
<div id="5367d826" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="5367d826"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="5367d826-1"><a href="#5367d826-1" aria-hidden="true" tabindex="-1"></a>df.loc[:, [<span class="st">"Commune"</span>, <span class="st">"INSEE commune"</span>]].count()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>Commune          35798
INSEE commune    35798
dtype: int64</code></pre>
</div>
</div>
<div id="cab2e686" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cab2e686"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cab2e686-1"><a href="#cab2e686-1" aria-hidden="true" tabindex="-1"></a>df.loc[:, [<span class="st">"Commune"</span>, <span class="st">"INSEE commune"</span>]].nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>Commune          33338
INSEE commune    35798
dtype: int64</code></pre>
</div>
</div>
<p>Avec ces deux commandes simples, on comprend donc
que notre variable <code>INSEE commune</code> (le code Insee)
sera plus fiable pour identifier des communes
que les noms, qui ne sont pas forcément uniques. C’est justement l’objectif du code Insee de proposer
un identifiant unique, a contrario du code postal qui peut
être partagé par plusieurs communes.</p>
</section>
<section id="statistiques-agrégées" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="statistiques-agrégées"><span class="header-section-number">7.2</span> Statistiques agrégées</h2>
<p><code>Pandas</code> embarque plusieurs méthodes pour construire des statistiques sur plusieurs colonnes: somme, moyenne, variance, etc.</p>
<p>Les méthodes sont assez transparentes:</p>
<div id="d57d1083" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="d57d1083"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="d57d1083-1"><a href="#d57d1083-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Agriculture"</span>].<span class="bu">sum</span>()</span>
<span id="d57d1083-2"><a href="#d57d1083-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Agriculture"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>2459.975759687974</code></pre>
</div>
</div>
<p>Là encore, la cohérence de <code>Pandas</code> nous permet de généraliser le calcul de statistiques à plusieurs colonnes</p>
<div id="7b6517b2" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="7b6517b2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="7b6517b2-1"><a href="#7b6517b2-1" aria-hidden="true" tabindex="-1"></a>df.loc[:, [<span class="st">"Agriculture"</span>, <span class="st">"Résidentiel"</span>]].<span class="bu">sum</span>()</span>
<span id="7b6517b2-2"><a href="#7b6517b2-2" aria-hidden="true" tabindex="-1"></a>df.loc[:, [<span class="st">"Agriculture"</span>, <span class="st">"Résidentiel"</span>]].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>Agriculture    2459.975760
Résidentiel    1783.677872
dtype: float64</code></pre>
</div>
</div>
<p>Il est possible de généraliser ceci à toutes les colonnes.
Cependant, il est nécessaire d’introduire le paramètre <code>numeric_only</code> pour ne faire la tâche d’agrégation que sur les variables pertinentes</p>
<div id="8e146fbc" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="8e146fbc"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="8e146fbc-1"><a href="#8e146fbc-1" aria-hidden="true" tabindex="-1"></a>df.mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>Agriculture                        2459.975760
Autres transports                   654.919940
Autres transports international    7692.344960
CO2 biomasse hors-total            1774.381550
Déchets                             410.806329
Energie                             662.569846
Industrie hors-énergie             2423.127789
Résidentiel                        1783.677872
Routier                            3535.501245
Tertiaire                          1105.165915
dtype: float64</code></pre>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-triangle-exclamation"></i> Warning</h3>
<p>La version 2.0 de <code>Pandas</code> a introduit un changement
de comportement dans les méthodes d’agrégation.</p>
<p>Il est dorénavant nécessaire de préciser quand on désire
effectuer des opérations si on désire ou non le faire
exclusivement sur les colonnes numériques. C’est pour cette
raison qu’on explicite ici l’argument <code>numeric_only = True</code>.
Ce comportement
était par le passé implicite.</p>
</div>
</div>
<p>La méthode pratique à connaître est <code>agg</code>. Celle-ci permet de définir les statistiques qu’on désire calculer pour chaque variable</p>
<div id="8303ea5b" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="8303ea5b"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="8303ea5b-1"><a href="#8303ea5b-1" aria-hidden="true" tabindex="-1"></a>df.agg(</span>
<span id="8303ea5b-2"><a href="#8303ea5b-2" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="8303ea5b-3"><a href="#8303ea5b-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Agriculture"</span>: [<span class="st">"sum"</span>, <span class="st">"mean"</span>],</span>
<span id="8303ea5b-4"><a href="#8303ea5b-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Résidentiel"</span>: [<span class="st">"mean"</span>, <span class="st">"std"</span>],</span>
<span id="8303ea5b-5"><a href="#8303ea5b-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Commune"</span>: <span class="st">"nunique"</span>,</span>
<span id="8303ea5b-6"><a href="#8303ea5b-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="8303ea5b-7"><a href="#8303ea5b-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Commune</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">sum</td>
<td>8.790969e+07</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>2.459976e+03</td>
<td>1783.677872</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>NaN</td>
<td>8915.902379</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">nunique</td>
<td>NaN</td>
<td>NaN</td>
<td>33338.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>La sortie des méthodes d’agrégation est une <code>Serie</code> indexée (les méthodes du type <code>df.sum()</code>) ou directement un <code>DataFrame</code> (la méthode <code>agg</code>). Il est en général plus pratique d’avoir un <code>DataFrame</code> qu’une <code>Serie</code> indexée si on désire retravailler le tableau pour en tirer des conclusions. Il est donc utile de transformer les sorties sous forme de <code>Serie</code> en <code>DataFrame</code> puis appliquer la méthode <code>reset_index</code> pour transformer l’indice en colonne. A partir de là, il sera possible de modifier le <code>DataFrame</code> pour rendre celui-ci plus lisible.</p>
<p>Par exemple si on s’intéresse à la part de chaque secteur dans les émissions totales, on pourra procéder en deux temps.
D’abord on va créer une observation par secteur représentant les émissions totales de celui-ci:</p>
<div id="0931dcdd" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="0931dcdd"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="0931dcdd-1"><a href="#0931dcdd-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Etape 1: création d'un DataFrame propre</span></span>
<span id="0931dcdd-2"><a href="#0931dcdd-2" aria-hidden="true" tabindex="-1"></a>emissions_totales <span class="op">=</span> pd.DataFrame(</span>
<span id="0931dcdd-3"><a href="#0931dcdd-3" aria-hidden="true" tabindex="-1"></a>    df.<span class="bu">sum</span>(numeric_only<span class="op">=</span><span class="va">True</span>), columns<span class="op">=</span>[<span class="st">"emissions"</span>]</span>
<span id="0931dcdd-4"><a href="#0931dcdd-4" aria-hidden="true" tabindex="-1"></a>).reset_index(names<span class="op">=</span><span class="st">"secteur"</span>)</span>
<span id="0931dcdd-5"><a href="#0931dcdd-5" aria-hidden="true" tabindex="-1"></a>emissions_totales</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">secteur</th>
<th data-quarto-table-cell-role="th">emissions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Agriculture</td>
<td>8.790969e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Autres transports</td>
<td>6.535446e+06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Autres transports international</td>
<td>2.223857e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>CO2 biomasse hors-total</td>
<td>6.351931e+07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Déchets</td>
<td>1.470358e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Energie</td>
<td>2.285203e+07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Industrie hors-énergie</td>
<td>8.357368e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Résidentiel</td>
<td>6.384140e+07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Routier</td>
<td>1.264932e+08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Tertiaire</td>
<td>3.956273e+07</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Il ne reste plus qu’à travailler <em>a minima</em> le jeu de données afin d’avoir déjà quelques conclusions intéressantes sur la structure des émissions en France:</p>
<div id="da5d51b7" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="da5d51b7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="da5d51b7-1"><a href="#da5d51b7-1" aria-hidden="true" tabindex="-1"></a>emissions_totales[<span class="st">"emissions (%)"</span>] <span class="op">=</span> (</span>
<span id="da5d51b7-2"><a href="#da5d51b7-2" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="op">*</span> emissions_totales[<span class="st">"emissions"</span>] <span class="op">/</span> emissions_totales[<span class="st">"emissions"</span>].<span class="bu">sum</span>()</span>
<span id="da5d51b7-3"><a href="#da5d51b7-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="da5d51b7-4"><a href="#da5d51b7-4" aria-hidden="true" tabindex="-1"></a>(emissions_totales.sort_values(<span class="st">"emissions"</span>, ascending<span class="op">=</span><span class="va">False</span>).<span class="bu">round</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">secteur</th>
<th data-quarto-table-cell-role="th">emissions</th>
<th data-quarto-table-cell-role="th">emissions (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Routier</td>
<td>126493164.0</td>
<td>24.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>Agriculture</td>
<td>87909694.0</td>
<td>17.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Industrie hors-énergie</td>
<td>83573677.0</td>
<td>16.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Résidentiel</td>
<td>63841398.0</td>
<td>12.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>CO2 biomasse hors-total</td>
<td>63519311.0</td>
<td>12.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Tertiaire</td>
<td>39562729.0</td>
<td>7.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Energie</td>
<td>22852034.0</td>
<td>4.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Autres transports international</td>
<td>22238569.0</td>
<td>4.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Déchets</td>
<td>14703580.0</td>
<td>3.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Autres transports</td>
<td>6535446.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Ce tableau n’est pas vraiment mis en forme donc encore loin d’être communiquable mais il présente déjà un intérêt dans une perspective exploratoire. Il nous permet de comprendre les secteurs les plus émetteurs, à savoir le transport, l’agriculture et l’industrie, hors énergie. Le fait que l’énergie soit relativement peu émettrice s’explique bien du fait du <em>mix énergétique</em> français où le nucléaire représente une majorité de la production électrique.</p>
<p>Pour aller plus loin dans la mise en forme de ce tableau afin d’avoir des statistiques communiquables en dehors de <code>Python</code>, nous découvrirons au prochain chapitre <code>great_tables</code>.</p>
<div class="cell markdown">
<div class="alert alert-info" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-comment"></i> Note</h3>
<p>La structure de données issue de <code>df.sum</code> est assez pratique (elle est <em>tidy</em>). On pourrait faire exactement la même opération que <code>df.sum(numeric_only = True)</code> avec le code suivant:</p>
<div id="67042c30" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df.select_dtypes(include<span class="op">=</span><span class="st">"number"</span>).agg(func<span class="op">=</span><span class="bu">sum</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_1024/2580944462.py:1: FutureWarning:

The provided callable &lt;built-in function sum&gt; is currently using DataFrame.sum. In a future version of pandas, the provided callable will be used directly. To keep current behavior pass the string "sum" instead.
</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>Agriculture                        8.790969e+07
Autres transports                  6.535446e+06
Autres transports international    2.223857e+07
CO2 biomasse hors-total            6.351931e+07
Déchets                            1.470358e+07
Energie                            2.285203e+07
Industrie hors-énergie             8.357368e+07
Résidentiel                        6.384140e+07
Routier                            1.264932e+08
Tertiaire                          3.956273e+07
dtype: float64</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="valeurs-manquantes" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="valeurs-manquantes"><span class="header-section-number">7.3</span> Valeurs manquantes</h2>
<p>Jusqu’à présent nous n’avons pas évoqué ce qui pourrait être un caillou dans la chaussure du <em>data scientist</em>, les valeurs manquantes.</p>
<p>Les jeux de données réels sont rarement complets et les valeurs manquantes peuvent refléter de nombreuses réalités: problème de remontée d’information, variable non pertinente pour cette observation…</p>
<p>Sur le plan technique, <code>Pandas</code> ne rencontre pas de problème à gérer les valeurs manquantes (sauf pour les variables <code>int</code> mais c’est une exception).
Par défaut, les valeurs manquantes sont affichées <code>NaN</code> et sont de type <code>np.nan</code> (pour
les valeurs temporelles, i.e.&nbsp;de type <code>datatime64</code>, les valeurs manquantes sont
<code>NaT</code>).
On a un comportement cohérent d’agrégation lorsqu’on combine deux colonnes dont l’une comporte des valeurs manquantes.</p>
<div id="72f26284" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="72f26284"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="72f26284-1"><a href="#72f26284-1" aria-hidden="true" tabindex="-1"></a>ventes <span class="op">=</span> pd.DataFrame(</span>
<span id="72f26284-2"><a href="#72f26284-2" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="72f26284-3"><a href="#72f26284-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"prix"</span>: np.random.uniform(size<span class="op">=</span><span class="dv">5</span>),</span>
<span id="72f26284-4"><a href="#72f26284-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"client1"</span>: [i <span class="op">+</span> <span class="dv">1</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)],</span>
<span id="72f26284-5"><a href="#72f26284-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"client2"</span>: [i <span class="op">+</span> <span class="dv">1</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>)] <span class="op">+</span> [np.nan],</span>
<span id="72f26284-6"><a href="#72f26284-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"produit"</span>: [np.nan] <span class="op">+</span> [<span class="st">"yaourt"</span>, <span class="st">"pates"</span>, <span class="st">"riz"</span>, <span class="st">"tomates"</span>],</span>
<span id="72f26284-7"><a href="#72f26284-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="72f26284-8"><a href="#72f26284-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="72f26284-9"><a href="#72f26284-9" aria-hidden="true" tabindex="-1"></a>ventes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">prix</th>
<th data-quarto-table-cell-role="th">client1</th>
<th data-quarto-table-cell-role="th">client2</th>
<th data-quarto-table-cell-role="th">produit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.846498</td>
<td>1</td>
<td>1.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0.688088</td>
<td>2</td>
<td>2.0</td>
<td>yaourt</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0.183628</td>
<td>3</td>
<td>3.0</td>
<td>pates</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>0.697141</td>
<td>4</td>
<td>4.0</td>
<td>riz</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0.260635</td>
<td>5</td>
<td>NaN</td>
<td>tomates</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p><code>Pandas</code> va bien refuser de faire l’agrégation car pour lui une valeur manquante n’est pas un zéro:</p>
<div id="3d9eca76" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="3d9eca76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="3d9eca76-1"><a href="#3d9eca76-1" aria-hidden="true" tabindex="-1"></a>ventes[<span class="st">"client1"</span>] <span class="op">+</span> ventes[<span class="st">"client2"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>0    2.0
1    4.0
2    6.0
3    8.0
4    NaN
dtype: float64</code></pre>
</div>
</div>
<p>Il est possible de supprimer les valeurs manquantes grâce à <code>dropna()</code>.
Cette méthode va supprimer toutes les lignes où il y a au moins une valeur manquante.</p>
<div id="0e594d84" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="0e594d84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="0e594d84-1"><a href="#0e594d84-1" aria-hidden="true" tabindex="-1"></a>ventes.dropna()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">prix</th>
<th data-quarto-table-cell-role="th">client1</th>
<th data-quarto-table-cell-role="th">client2</th>
<th data-quarto-table-cell-role="th">produit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>0.688088</td>
<td>2</td>
<td>2.0</td>
<td>yaourt</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>0.183628</td>
<td>3</td>
<td>3.0</td>
<td>pates</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>0.697141</td>
<td>4</td>
<td>4.0</td>
<td>riz</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>En l’occurrence, on perd deux lignes. Il est aussi possible de supprimer seulement les colonnes où il y a des valeurs manquantes
dans un DataFrame avec <code>dropna()</code> en utilisant le paramètre <code>subset</code>.</p>
<div id="8f7664b3" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="8f7664b3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="8f7664b3-1"><a href="#8f7664b3-1" aria-hidden="true" tabindex="-1"></a>ventes.dropna(subset<span class="op">=</span>[<span class="st">"produit"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">prix</th>
<th data-quarto-table-cell-role="th">client1</th>
<th data-quarto-table-cell-role="th">client2</th>
<th data-quarto-table-cell-role="th">produit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>0.688088</td>
<td>2</td>
<td>2.0</td>
<td>yaourt</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>0.183628</td>
<td>3</td>
<td>3.0</td>
<td>pates</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>0.697141</td>
<td>4</td>
<td>4.0</td>
<td>riz</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>0.260635</td>
<td>5</td>
<td>NaN</td>
<td>tomates</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Cette fois on ne perd plus qu’une ligne, celle où <code>produit</code> est manquant.</p>
<p><code>Pandas</code> donne la possibilité d’imputer les valeurs manquantes grâce à la méthode <code>fillna()</code>. Par exemple, si on pense que les valeurs manquantes dans <code>produit</code> sont des valeurs nulles, on pourra faire</p>
<div id="ac516c13" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="ac516c13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="ac516c13-1"><a href="#ac516c13-1" aria-hidden="true" tabindex="-1"></a>ventes.dropna(subset<span class="op">=</span>[<span class="st">"produit"</span>]).fillna(<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">prix</th>
<th data-quarto-table-cell-role="th">client1</th>
<th data-quarto-table-cell-role="th">client2</th>
<th data-quarto-table-cell-role="th">produit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>0.688088</td>
<td>2</td>
<td>2.0</td>
<td>yaourt</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>0.183628</td>
<td>3</td>
<td>3.0</td>
<td>pates</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>0.697141</td>
<td>4</td>
<td>4.0</td>
<td>riz</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>0.260635</td>
<td>5</td>
<td>0.0</td>
<td>tomates</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Si on désire faire une imputation à la médiane pour la variable <code>client2</code>, on changera marginalement ce code
en encapsulant à l’intérieur le calcul de la médiane</p>
<div id="e753143a" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="e753143a"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="e753143a-1"><a href="#e753143a-1" aria-hidden="true" tabindex="-1"></a>(ventes[<span class="st">"client2"</span>].fillna(ventes[<span class="st">"client2"</span>].median()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>0    1.0
1    2.0
2    3.0
3    4.0
4    2.5
Name: client2, dtype: float64</code></pre>
</div>
</div>
<p>Sur des jeux de données du monde réel, il est utile d’utiliser la méthode <code>isna</code> (ou <code>isnull</code>) combinées avec <code>sum</code> ou <code>mean</code> pour connaître l’ampleur des valeurs manquantes dans un jeu de données.</p>
<div id="6c601467" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="6c601467"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="6c601467-1"><a href="#6c601467-1" aria-hidden="true" tabindex="-1"></a>df.isnull().mean().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>Autres transports international    0.919241
Autres transports                  0.721241
Energie                            0.036538
Industrie hors-énergie             0.036538
Agriculture                        0.001732
Routier                            0.000559
Déchets                            0.000168
Résidentiel                        0.000168
INSEE commune                      0.000000
Commune                            0.000000
CO2 biomasse hors-total            0.000000
Tertiaire                          0.000000
dtype: float64</code></pre>
</div>
</div>
<p>Cette étape préparatoire est utile pour anticiper la question de l’imputation ou du filtre sur les valeurs manquantes: sont-elles <em>missing at random</em> ou reflètent-elles un sujet sur la remontée des données ? Les choix relatifs au traitement des valeurs manquantes ne sont pas des choix méthodologiques neutres. <code>Pandas</code> donne les outils techniques
pour faire ceci mais la question de la légitimité de ces choix et de la pertinence est propre à chaque donnée. Les explorations sur les données visent à détecter des indices pour faire un choix éclairé.</p>
</section>
</section>
<section id="représentations-graphiques-rapides" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Représentations graphiques rapides</h1>
<p>Les tableaux de nombre sont certes une informations utile
pour comprendre la structure d’un jeu de données mais dont
l’aspect dense rend l’appropriation difficile. Avoir un graphique simplement peut être utile pour se représenter, en un coup d’oeil, la distribution des données et ainsi connaître le caractère plus ou moins normal d’une observation.</p>
<p><code>Pandas</code> embarque des méthodes graphiques rudimentaires pour répondre à ce besoin. Elles sont pratiques pour
produire rapidement un graphique, notamment après des opérations
complexes de maniement de données.
Nous approfondirons cette problématique des visualisations de données dans la partie <a href="../../content/visualisation.qmd">Communiquer</a>.</p>
<p>On peut appliquer la méthode <code>plot()</code> directement à une <code>Serie</code> :</p>
<div id="f46e79fd" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="f46e79fd"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="f46e79fd-1"><a href="#f46e79fd-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Déchets"</span>].plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="02_pandas_intro_files/figure-html/cell-54-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="02_pandas_intro_files/figure-html/cell-54-output-1.png" width="600" height="411" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Le code équivalent avec <code>matplotlib</code> serait:</p>
<div id="44336e93" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="44336e93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="44336e93-1"><a href="#44336e93-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="44336e93-2"><a href="#44336e93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="44336e93-3"><a href="#44336e93-3" aria-hidden="true" tabindex="-1"></a>plt.plot(df.index, df[<span class="st">"Déchets"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="02_pandas_intro_files/figure-html/cell-55-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="02_pandas_intro_files/figure-html/cell-55-output-1.png" width="600" height="411" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Par défaut, la visualisation obtenue est une série. Ce n’est
pas forcément celle attendue puisqu’elle n’a de sens que pour des séries temporelles. En tant que <em>data scientist</em> sur microdonnés, on s’intéresse plus fréquemment à un histogramme pour avoir une idée de la distribution des données.
Pour cela, il suffit d’ajouter l’argument <code>kind = 'hist'</code>:</p>
<div id="d75cd438" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="d75cd438"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="d75cd438-1"><a href="#d75cd438-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Déchets"</span>].hist()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="02_pandas_intro_files/figure-html/cell-56-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="02_pandas_intro_files/figure-html/cell-56-output-1.png" width="592" height="411" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Avec des données dont la distribution est non normalisée,
ce qui représente de nombreuses variables du monde réel,
les histogrammes sont généralement peu instructifs. Le <em>log</em> peut être une solution
pour remettre à une échelle comparable certaines valeurs extrêmes:</p>
<div id="a375a870" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="a375a870"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="a375a870-1"><a href="#a375a870-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Déchets"</span>].plot(kind<span class="op">=</span><span class="st">"hist"</span>, logy<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="02_pandas_intro_files/figure-html/cell-57-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="02_pandas_intro_files/figure-html/cell-57-output-1.png" width="591" height="411" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>La sortie est un objet <code>matplotlib</code>. La <em>customisation</em> de ces
figures est ainsi
possible (et même désirable car les graphiques <code>matplotlib</code>
sont, par défaut, assez rudimentaires).
Cependant, il s’agit d’une méthode rapide pour la construction
de figures qui nécessite du travail pour une visualisation
finalisée. Cela passe par un travail approfondi sur l’objet
<code>matplotlib</code> ou l’utilisation d’une librairie plus haut
niveau pour la représentation graphique (<code>seaborn</code>, <code>plotnine</code>, <code>plotly</code>, etc.).</p>
<p>La partie de ce cours consacrée à la visualisation de données présentera succinctement ces différents
paradigmes de visualisation. Ceux-ci ne dispensent pas de faire
preuve de bon sens dans le choix du graphique utilisé
pour représenter une statistique descriptive (cf.&nbsp;<a href="https://ssphub.netlify.app/talk/2024-02-29-mauviere/">cette conférence d’Eric Mauvière</a> ).</p>
</section>
<section id="exercice-de-synthèse" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Exercice de synthèse</h1>
<p>Cette exercice synthétise plusieurs étapes de préparation et d’exploration de données pour mieux comprendre la structure
du phénomène qu’on désire étudier à savoir les émissions de gaz carbonique en France.</p>
<p>Il est recommandé de repartir d’une session vierge (dans un <em>notebook</em> il faut faire <code>Restart Kernel</code>) pour ne pas avoir un environnement pollué par d’autres objets. Vous pouvez ensuite exécuter le code suivant pour avoir la base nécessaire:</p>
<div id="4c6e6059" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="4c6e6059"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="4c6e6059-1"><a href="#4c6e6059-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="4c6e6059-2"><a href="#4c6e6059-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="4c6e6059-3"><a href="#4c6e6059-3" aria-hidden="true" tabindex="-1"></a>emissions <span class="op">=</span> pd.read_csv(</span>
<span id="4c6e6059-4"><a href="#4c6e6059-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://koumoul.com/s/data-fair/api/v1/datasets/igt-pouvoir-de-rechauffement-global/convert"</span></span>
<span id="4c6e6059-5"><a href="#4c6e6059-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="4c6e6059-6"><a href="#4c6e6059-6" aria-hidden="true" tabindex="-1"></a>emissions.head(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>01001</td>
<td>L'ABERGEMENT-CLEMENCIAT</td>
<td>3711.425991</td>
<td>NaN</td>
<td>NaN</td>
<td>432.751835</td>
<td>101.430476</td>
<td>2.354558</td>
<td>6.911213</td>
<td>309.358195</td>
<td>793.156501</td>
<td>367.036172</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>01002</td>
<td>L'ABERGEMENT-DE-VAREY</td>
<td>475.330205</td>
<td>NaN</td>
<td>NaN</td>
<td>140.741660</td>
<td>140.675439</td>
<td>2.354558</td>
<td>6.911213</td>
<td>104.866444</td>
<td>348.997893</td>
<td>112.934207</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored" data-anchor-id="exercice-de-synthèse"><i class="fa-solid fa-pencil"></i> Exercice 2: Découverte des verbes de <code>Pandas</code> pour manipuler des données</h3>
<p>En premier lieu, on propose de se familiariser avec les opérations sur
les colonnes.</p>
<ol type="1">
<li>Créer un <em>dataframe</em> <code>emissions_copy</code> ne conservant que les colonnes
<code>INSEE commune</code>, <code>Commune</code>, <code>Autres transports</code> et <code>Autres transports international</code></li>
</ol>
<details>
<summary>
Indice pour cette question
</summary>
<p><a href="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/select_pandas.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/select_pandas.png" class="img-fluid" data-fig-width="50%"></a></p>
</details>
<ol start="2" type="1">
<li>Comme les noms de variables sont peu pratiques, les renommer de la
manière suivante :
<ul>
<li><code>INSEE commune</code> <span class="math inline">\(\to\)</span> <code>code_insee</code></li>
<li><code>Autres transports</code> <span class="math inline">\(\to\)</span> <code>transports</code></li>
<li><code>Autres transports international</code> <span class="math inline">\(\to\)</span> <code>transports_international</code></li>
</ul></li>
</ol>
<details>
<summary>
Indice pour cette question
</summary>
<p><a href="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/rename_pandas.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/rename_pandas.png" class="img-fluid" data-fig-width="50%"></a></p>
</details>
<ol start="3" type="1">
<li><p>On propose, pour simplifier, de remplacer les valeurs manquantes (<code>NA</code>)
par la valeur 0. Utiliser la
méthode <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.fillna.html"><code>fillna</code></a>
pour transformer les valeurs manquantes en 0.</p></li>
<li><p>Créer les variables suivantes :</p>
<ul>
<li><code>dep</code>: le département. Celui-ci peut être créé grâce aux deux premiers caractères de <code>code_insee</code> en appliquant la méthode <code>str</code> ;</li>
<li><code>transports_total</code>: les émissions du secteur transports (somme des deux variables)</li>
</ul></li>
</ol>
<details>
<summary>
Indice pour cette question
</summary>
<p><a href="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/mutate_pandas.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/mutate_pandas.png" class="img-fluid" data-fig-width="50%"></a></p>
</details>
<ol start="5" type="1">
<li>Ordonner les données du plus gros pollueur au plus petit
puis ordonner les données
du plus gros pollueur au plus petit par département (du 01 au 95).</li>
</ol>
<details>
<summary>
Indice pour cette question
</summary>
<p><a href="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/arrange_pandas.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/arrange_pandas.png" class="img-fluid" data-fig-width="50%"></a></p>
</details>
<ol start="6" type="1">
<li>Ne conserver que les communes appartenant aux départements 13 ou 31.
Ordonner ces communes du plus gros pollueur au plus petit.</li>
</ol>
<details>
<summary>
Indice pour cette question
</summary>
<p><a href="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/filter_pandas.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/filter_pandas.png" class="img-fluid" data-fig-width="50%"></a></p>
</details>
<p>Revenir au jeu <code>emission</code> initial</p>
<ol start="7" type="1">
<li><p>Calculer les émissions totales par secteur. Calculer la part de chaque secteur dans les émissions totales. Transformer en tonnes les volumes avant d’afficher les résultats</p></li>
<li><p>Calculer pour chaque commune les émissions totales après avoir imputé les valeurs manquantes à 0. Garder les 100 communes les plus émettrices. Calculer la part de chaque secteur dans cette émission. Comprendre les facteurs pouvant expliquer ce classement.</p></li>
</ol>
<details>
<summary>
Aide si vous êtes en difficulté sur la question 8
</summary>
<p>Jouer avec le paramètre <code>axis</code> lors de la construction d’une statistique agrégée.</p>
</details>
</div>
</div>
<p>A la question 5, quand on ordonne les communes exclusivement à partir de la variable
<code>transports_total</code>, on obtient ainsi:</p>
<div id="a535643a" class="cell" data-execution_count="59">
<div class="cell-output cell-output-display" data-execution_count="59">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">code_insee</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">transports</th>
<th data-quarto-table-cell-role="th">transports_international</th>
<th data-quarto-table-cell-role="th">dep</th>
<th data-quarto-table-cell-role="th">transports_total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">31108</td>
<td>77291</td>
<td>LE MESNIL-AMELOT</td>
<td>133834.090767</td>
<td>3.303394e+06</td>
<td>77</td>
<td>3.437228e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31099</td>
<td>77282</td>
<td>MAUREGARD</td>
<td>133699.072712</td>
<td>3.303394e+06</td>
<td>77</td>
<td>3.437093e+06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31111</td>
<td>77294</td>
<td>MITRY-MORY</td>
<td>89815.529858</td>
<td>2.202275e+06</td>
<td>77</td>
<td>2.292090e+06</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>A la question 6, on obtient ce classement :</p>
<div id="c5ffd85f" class="cell" data-execution_count="60">
<div class="cell-output cell-output-display" data-execution_count="60">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">code_insee</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">transports</th>
<th data-quarto-table-cell-role="th">transports_international</th>
<th data-quarto-table-cell-role="th">dep</th>
<th data-quarto-table-cell-role="th">transports_total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">4438</td>
<td>13096</td>
<td>SAINTES-MARIES-DE-LA-MER</td>
<td>271182.758578</td>
<td>0.000000</td>
<td>13</td>
<td>271182.758578</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4397</td>
<td>13054</td>
<td>MARIGNANE</td>
<td>245375.418650</td>
<td>527360.799265</td>
<td>13</td>
<td>772736.217915</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11684</td>
<td>31069</td>
<td>BLAGNAC</td>
<td>210157.688544</td>
<td>403717.366279</td>
<td>31</td>
<td>613875.054823</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>A la question 7, le tableau obtenu ressemble à</p>
<div id="e00d42f9" class="cell" data-execution_count="61">
<div class="cell-output cell-output-display" data-execution_count="61">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">secteur</th>
<th data-quarto-table-cell-role="th">emissions</th>
<th data-quarto-table-cell-role="th">emissions (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Routier</td>
<td>126493.0</td>
<td>24.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>Agriculture</td>
<td>87910.0</td>
<td>17.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Industrie hors-énergie</td>
<td>83574.0</td>
<td>16.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Résidentiel</td>
<td>63841.0</td>
<td>12.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>CO2 biomasse hors-total</td>
<td>63519.0</td>
<td>12.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="2ad8f243" class="cell" data-execution_count="62">
<div class="cell-output cell-output-display" data-execution_count="62">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">Routier</th>
<th data-quarto-table-cell-role="th">Tertiaire</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">4382</td>
<td>13039</td>
<td>FOS-SUR-MER</td>
<td>305.092893</td>
<td>1893.383189</td>
<td>1.722723e+04</td>
<td>50891.367548</td>
<td>275500.374439</td>
<td>2.296711e+06</td>
<td>6.765119e+06</td>
<td>9466.388806</td>
<td>74631.401993</td>
<td>42068.140058</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22671</td>
<td>59183</td>
<td>DUNKERQUE</td>
<td>811.390947</td>
<td>3859.548994</td>
<td>3.327586e+05</td>
<td>71922.181764</td>
<td>23851.780482</td>
<td>1.934988e+06</td>
<td>5.997333e+06</td>
<td>113441.727216</td>
<td>94337.865738</td>
<td>70245.678455</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4398</td>
<td>13056</td>
<td>MARTIGUES</td>
<td>855.299300</td>
<td>2712.749275</td>
<td>3.043476e+04</td>
<td>35925.561051</td>
<td>44597.426397</td>
<td>1.363402e+06</td>
<td>2.380185e+06</td>
<td>22530.797276</td>
<td>84624.862481</td>
<td>44394.822725</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30560</td>
<td>76476</td>
<td>PORT-JEROME-SUR-SEINE</td>
<td>2736.931327</td>
<td>121.160849</td>
<td>2.086403e+04</td>
<td>22846.964780</td>
<td>78.941581</td>
<td>1.570236e+06</td>
<td>2.005643e+06</td>
<td>21072.566129</td>
<td>9280.824961</td>
<td>15270.357772</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31108</td>
<td>77291</td>
<td>LE MESNIL-AMELOT</td>
<td>782.183307</td>
<td>133834.090767</td>
<td>3.303394e+06</td>
<td>3330.404124</td>
<td>111.613197</td>
<td>8.240952e+02</td>
<td>2.418925e+03</td>
<td>1404.400153</td>
<td>11712.541682</td>
<td>13680.471909</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">30056</td>
<td>74281</td>
<td>THONON-LES-BAINS</td>
<td>382.591429</td>
<td>145.151526</td>
<td>0.000000e+00</td>
<td>144503.815623</td>
<td>21539.524775</td>
<td>2.776024e+03</td>
<td>1.942086e+05</td>
<td>44545.339492</td>
<td>25468.667604</td>
<td>19101.562585</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33954</td>
<td>86194</td>
<td>POITIERS</td>
<td>2090.630127</td>
<td>20057.297403</td>
<td>2.183418e+04</td>
<td>95519.054766</td>
<td>13107.640015</td>
<td>5.771021e+03</td>
<td>1.693938e+04</td>
<td>110218.156827</td>
<td>91921.787626</td>
<td>73121.300634</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1918</td>
<td>06019</td>
<td>BLAUSASC</td>
<td>194.382622</td>
<td>0.000000</td>
<td>0.000000e+00</td>
<td>978.840592</td>
<td>208.084792</td>
<td>2.260375e+02</td>
<td>4.362880e+05</td>
<td>538.816198</td>
<td>3949.838612</td>
<td>740.022785</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27607</td>
<td>68253</td>
<td>OTTMARSHEIM</td>
<td>506.238288</td>
<td>679.598495</td>
<td>3.526748e+01</td>
<td>4396.853500</td>
<td>237.508651</td>
<td>1.172570e+03</td>
<td>4.067258e+05</td>
<td>3220.875864</td>
<td>19317.977050</td>
<td>4921.144781</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28643</td>
<td>71076</td>
<td>CHALON-SUR-SAONE</td>
<td>1344.584721</td>
<td>1336.547546</td>
<td>6.558180e+01</td>
<td>77082.218324</td>
<td>570.662275</td>
<td>1.016933e+04</td>
<td>2.075650e+05</td>
<td>77330.230592</td>
<td>29020.646500</td>
<td>34997.262920</td>
</tr>
</tbody>
</table>

<p>100 rows × 12 columns</p>
</div>
</div>
</div>
</div>
<p>A l’issue de la question 8, on comprend un peu mieux les facteurs qui peuvent expliquer une forte émission au niveau communal. Si on regarde les trois principales communes émettrices, on peut remarquer qu’il s’agit de villes avec des raffineries:</p>
<div id="d8c425b7" class="cell" data-execution_count="64">
<div class="cell-output cell-output-display" data-execution_count="64">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">INSEE commune</th>
<th data-quarto-table-cell-role="th">Commune</th>
<th data-quarto-table-cell-role="th">Agriculture</th>
<th data-quarto-table-cell-role="th">Autres transports</th>
<th data-quarto-table-cell-role="th">Autres transports international</th>
<th data-quarto-table-cell-role="th">CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Déchets</th>
<th data-quarto-table-cell-role="th">Energie</th>
<th data-quarto-table-cell-role="th">Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Résidentiel</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Part Autres transports</th>
<th data-quarto-table-cell-role="th">Part Autres transports international</th>
<th data-quarto-table-cell-role="th">Part CO2 biomasse hors-total</th>
<th data-quarto-table-cell-role="th">Part Déchets</th>
<th data-quarto-table-cell-role="th">Part Energie</th>
<th data-quarto-table-cell-role="th">Part Industrie hors-énergie</th>
<th data-quarto-table-cell-role="th">Part Résidentiel</th>
<th data-quarto-table-cell-role="th">Part Routier</th>
<th data-quarto-table-cell-role="th">Part Tertiaire</th>
<th data-quarto-table-cell-role="th">Part total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">4382</td>
<td>13039</td>
<td>FOS-SUR-MER</td>
<td>305.092893</td>
<td>1893.383189</td>
<td>17227.234585</td>
<td>50891.367548</td>
<td>275500.374439</td>
<td>2.296711e+06</td>
<td>6.765119e+06</td>
<td>9466.388806</td>
<td>...</td>
<td>0.019860</td>
<td>0.180696</td>
<td>0.533799</td>
<td>2.889719</td>
<td>24.090160</td>
<td>70.959215</td>
<td>0.099293</td>
<td>0.782807</td>
<td>0.441252</td>
<td>100.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22671</td>
<td>59183</td>
<td>DUNKERQUE</td>
<td>811.390947</td>
<td>3859.548994</td>
<td>332758.630269</td>
<td>71922.181764</td>
<td>23851.780482</td>
<td>1.934988e+06</td>
<td>5.997333e+06</td>
<td>113441.727216</td>
<td>...</td>
<td>0.044652</td>
<td>3.849791</td>
<td>0.832091</td>
<td>0.275949</td>
<td>22.386499</td>
<td>69.385067</td>
<td>1.312444</td>
<td>1.091425</td>
<td>0.812695</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4398</td>
<td>13056</td>
<td>MARTIGUES</td>
<td>855.299300</td>
<td>2712.749275</td>
<td>30434.762405</td>
<td>35925.561051</td>
<td>44597.426397</td>
<td>1.363402e+06</td>
<td>2.380185e+06</td>
<td>22530.797276</td>
<td>...</td>
<td>0.067655</td>
<td>0.759035</td>
<td>0.895975</td>
<td>1.112249</td>
<td>34.002905</td>
<td>59.361219</td>
<td>0.561912</td>
<td>2.110523</td>
<td>1.107196</td>
<td>100.0</td>
</tr>
</tbody>
</table>

<p>3 rows × 24 columns</p>
</div>
</div>
</div>
</div>
<p>Grâce à nos explorations minimales avec <code>Pandas</code>, on voit que ce jeu de données nous donne donc une information sur la nature du tissu productif français et des conséquences environnementales de certaines activités.</p>
</section>
<section id="références" class="level1 unnumbered">
<h1 class="unnumbered">Références</h1>
<ul>
<li><p>Le site
<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html">pandas.pydata</a>
fait office de référence</p></li>
<li><p>Le livre <code>Modern Pandas</code> de Tom Augspurger : https://tomaugspurger.github.io/modern-1-intro.html</p></li>
</ul>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-mckinney2012python" class="csl-entry" role="listitem">
McKinney, Wes. 2012. <em>Python for Data Analysis: Data Wrangling with Pandas, NumPy, and IPython</em>. " O’Reilly Media, Inc.".
</div>
<div id="ref-wickham2023r" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. 2023. <em>R for Data Science</em>. " O’Reilly Media, Inc.".
</div>
</div>
<section id="informations-additionnelles" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="informations-additionnelles">Informations additionnelles</h2>
<details>
<summary>
<p><i class="fa-brands fa-python" aria-label="python"></i> environment files have been tested on.</p>
</summary>
<p>Latest built version: 2024-06-17</p>
<p>Python version used:</p>
<div id="a2aa2c79" class="cell" data-execution_count="66">
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>'3.11.6 | packaged by conda-forge | (main, Oct  3 2023, 10:40:35) [GCC 12.3.0]'</code></pre>
</div>
</div>
<div class="git-details">
<div class="pip-freeze">
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Package</th>
<th style="text-align: left;">Version</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">affine</td>
<td style="text-align: left;">2.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">aiobotocore</td>
<td style="text-align: left;">2.12.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">aiohttp</td>
<td style="text-align: left;">3.9.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">aioitertools</td>
<td style="text-align: left;">0.11.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">aiosignal</td>
<td style="text-align: left;">1.3.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">alembic</td>
<td style="text-align: left;">1.13.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">aniso8601</td>
<td style="text-align: left;">9.0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">annotated-types</td>
<td style="text-align: left;">0.7.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">appdirs</td>
<td style="text-align: left;">1.4.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">archspec</td>
<td style="text-align: left;">0.2.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">astroid</td>
<td style="text-align: left;">3.1.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">asttokens</td>
<td style="text-align: left;">2.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">attrs</td>
<td style="text-align: left;">23.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Babel</td>
<td style="text-align: left;">2.15.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bcrypt</td>
<td style="text-align: left;">4.1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">beautifulsoup4</td>
<td style="text-align: left;">4.12.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: left;">24.4.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">blinker</td>
<td style="text-align: left;">1.7.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">blis</td>
<td style="text-align: left;">0.7.11</td>
</tr>
<tr class="even">
<td style="text-align: left;">bokeh</td>
<td style="text-align: left;">3.4.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">boltons</td>
<td style="text-align: left;">23.1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">boto3</td>
<td style="text-align: left;">1.34.51</td>
</tr>
<tr class="odd">
<td style="text-align: left;">botocore</td>
<td style="text-align: left;">1.34.51</td>
</tr>
<tr class="even">
<td style="text-align: left;">branca</td>
<td style="text-align: left;">0.7.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brotli</td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">cachetools</td>
<td style="text-align: left;">5.3.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cartiflette</td>
<td style="text-align: left;">0.0.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cartopy</td>
<td style="text-align: left;">0.23.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">catalogue</td>
<td style="text-align: left;">2.0.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">cattrs</td>
<td style="text-align: left;">23.2.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">certifi</td>
<td style="text-align: left;">2024.2.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">cffi</td>
<td style="text-align: left;">1.16.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">charset-normalizer</td>
<td style="text-align: left;">3.3.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">click</td>
<td style="text-align: left;">8.1.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">click-plugins</td>
<td style="text-align: left;">1.1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">cligj</td>
<td style="text-align: left;">0.7.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cloudpathlib</td>
<td style="text-align: left;">0.18.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">cloudpickle</td>
<td style="text-align: left;">3.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">colorama</td>
<td style="text-align: left;">0.4.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">comm</td>
<td style="text-align: left;">0.2.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">commonmark</td>
<td style="text-align: left;">0.9.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">conda</td>
<td style="text-align: left;">24.3.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">conda-libmamba-solver</td>
<td style="text-align: left;">24.1.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">conda-package-handling</td>
<td style="text-align: left;">2.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">conda_package_streaming</td>
<td style="text-align: left;">0.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">confection</td>
<td style="text-align: left;">0.1.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">contextily</td>
<td style="text-align: left;">1.6.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">contourpy</td>
<td style="text-align: left;">1.2.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cryptography</td>
<td style="text-align: left;">42.0.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">cycler</td>
<td style="text-align: left;">0.12.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cymem</td>
<td style="text-align: left;">2.0.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">cytoolz</td>
<td style="text-align: left;">0.12.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dask</td>
<td style="text-align: left;">2024.4.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">dask-expr</td>
<td style="text-align: left;">1.0.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">debugpy</td>
<td style="text-align: left;">1.8.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">decorator</td>
<td style="text-align: left;">5.1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dill</td>
<td style="text-align: left;">0.3.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">distributed</td>
<td style="text-align: left;">2024.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">distro</td>
<td style="text-align: left;">1.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">docker</td>
<td style="text-align: left;">7.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">duckdb</td>
<td style="text-align: left;">0.10.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">en-core-web-sm</td>
<td style="text-align: left;">3.7.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">entrypoints</td>
<td style="text-align: left;">0.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">et-xmlfile</td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exceptiongroup</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">executing</td>
<td style="text-align: left;">2.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fastjsonschema</td>
<td style="text-align: left;">2.19.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">fiona</td>
<td style="text-align: left;">1.9.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flake8</td>
<td style="text-align: left;">7.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Flask</td>
<td style="text-align: left;">3.0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">folium</td>
<td style="text-align: left;">0.16.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">fontawesomefree</td>
<td style="text-align: left;">6.5.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fonttools</td>
<td style="text-align: left;">4.51.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">frozenlist</td>
<td style="text-align: left;">1.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fsspec</td>
<td style="text-align: left;">2023.12.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">GDAL</td>
<td style="text-align: left;">3.8.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gensim</td>
<td style="text-align: left;">4.3.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">geographiclib</td>
<td style="text-align: left;">2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">geopandas</td>
<td style="text-align: left;">0.12.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">geoplot</td>
<td style="text-align: left;">0.5.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">geopy</td>
<td style="text-align: left;">2.4.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">gitdb</td>
<td style="text-align: left;">4.0.11</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GitPython</td>
<td style="text-align: left;">3.1.43</td>
</tr>
<tr class="even">
<td style="text-align: left;">google-auth</td>
<td style="text-align: left;">2.29.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">graphene</td>
<td style="text-align: left;">3.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">graphql-core</td>
<td style="text-align: left;">3.2.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">graphql-relay</td>
<td style="text-align: left;">3.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">graphviz</td>
<td style="text-align: left;">0.20.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">great-tables</td>
<td style="text-align: left;">0.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">greenlet</td>
<td style="text-align: left;">3.0.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gunicorn</td>
<td style="text-align: left;">21.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">htmltools</td>
<td style="text-align: left;">0.5.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hvac</td>
<td style="text-align: left;">2.1.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">idna</td>
<td style="text-align: left;">3.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">imageio</td>
<td style="text-align: left;">2.34.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">importlib_metadata</td>
<td style="text-align: left;">7.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">importlib_resources</td>
<td style="text-align: left;">6.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">inflate64</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ipykernel</td>
<td style="text-align: left;">6.29.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">ipython</td>
<td style="text-align: left;">8.22.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ipywidgets</td>
<td style="text-align: left;">8.1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">isort</td>
<td style="text-align: left;">5.13.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">itsdangerous</td>
<td style="text-align: left;">2.1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">jedi</td>
<td style="text-align: left;">0.19.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Jinja2</td>
<td style="text-align: left;">3.1.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">jmespath</td>
<td style="text-align: left;">1.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">joblib</td>
<td style="text-align: left;">1.3.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">jsonpatch</td>
<td style="text-align: left;">1.33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jsonpointer</td>
<td style="text-align: left;">2.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">jsonschema</td>
<td style="text-align: left;">4.21.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jsonschema-specifications</td>
<td style="text-align: left;">2023.12.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">jupyter-cache</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jupyter_client</td>
<td style="text-align: left;">8.6.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">jupyter_core</td>
<td style="text-align: left;">5.7.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jupyterlab_widgets</td>
<td style="text-align: left;">3.0.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">kaleido</td>
<td style="text-align: left;">0.2.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kiwisolver</td>
<td style="text-align: left;">1.4.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">kubernetes</td>
<td style="text-align: left;">29.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">langcodes</td>
<td style="text-align: left;">3.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">language_data</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lazy_loader</td>
<td style="text-align: left;">0.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">libmambapy</td>
<td style="text-align: left;">1.5.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">llvmlite</td>
<td style="text-align: left;">0.42.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">locket</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lxml</td>
<td style="text-align: left;">5.2.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">lz4</td>
<td style="text-align: left;">4.3.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mako</td>
<td style="text-align: left;">1.3.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">mamba</td>
<td style="text-align: left;">1.5.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mapclassify</td>
<td style="text-align: left;">2.6.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">marisa-trie</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Markdown</td>
<td style="text-align: left;">3.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">markdown-it-py</td>
<td style="text-align: left;">3.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MarkupSafe</td>
<td style="text-align: left;">2.1.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">matplotlib</td>
<td style="text-align: left;">3.8.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">matplotlib-inline</td>
<td style="text-align: left;">0.1.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">mccabe</td>
<td style="text-align: left;">0.7.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mdurl</td>
<td style="text-align: left;">0.1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">menuinst</td>
<td style="text-align: left;">2.0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mercantile</td>
<td style="text-align: left;">1.2.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">mizani</td>
<td style="text-align: left;">0.11.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mlflow</td>
<td style="text-align: left;">2.11.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">mlflow-skinny</td>
<td style="text-align: left;">2.11.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">msgpack</td>
<td style="text-align: left;">1.0.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">multidict</td>
<td style="text-align: left;">6.0.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">multivolumefile</td>
<td style="text-align: left;">0.2.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">munkres</td>
<td style="text-align: left;">1.1.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">murmurhash</td>
<td style="text-align: left;">1.0.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">mypy</td>
<td style="text-align: left;">1.9.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mypy-extensions</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">nbclient</td>
<td style="text-align: left;">0.10.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nbformat</td>
<td style="text-align: left;">5.10.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">nest_asyncio</td>
<td style="text-align: left;">1.6.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">networkx</td>
<td style="text-align: left;">3.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">nltk</td>
<td style="text-align: left;">3.8.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numba</td>
<td style="text-align: left;">0.59.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">numpy</td>
<td style="text-align: left;">1.26.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">oauthlib</td>
<td style="text-align: left;">3.2.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">opencv-python-headless</td>
<td style="text-align: left;">4.9.0.80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">openpyxl</td>
<td style="text-align: left;">3.1.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">OWSLib</td>
<td style="text-align: left;">0.28.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">packaging</td>
<td style="text-align: left;">23.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">pandas</td>
<td style="text-align: left;">2.2.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">paramiko</td>
<td style="text-align: left;">3.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">parso</td>
<td style="text-align: left;">0.8.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">partd</td>
<td style="text-align: left;">1.4.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">pathspec</td>
<td style="text-align: left;">0.12.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">patsy</td>
<td style="text-align: left;">0.5.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pebble</td>
<td style="text-align: left;">5.0.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pexpect</td>
<td style="text-align: left;">4.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pickleshare</td>
<td style="text-align: left;">0.7.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pillow</td>
<td style="text-align: left;">10.3.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pip</td>
<td style="text-align: left;">24.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pkgutil_resolve_name</td>
<td style="text-align: left;">1.3.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">platformdirs</td>
<td style="text-align: left;">4.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">plotly</td>
<td style="text-align: left;">5.19.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">plotnine</td>
<td style="text-align: left;">0.13.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pluggy</td>
<td style="text-align: left;">1.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">polars</td>
<td style="text-align: left;">0.20.31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">preshed</td>
<td style="text-align: left;">3.0.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">prometheus_client</td>
<td style="text-align: left;">0.20.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">prometheus-flask-exporter</td>
<td style="text-align: left;">0.23.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">prompt-toolkit</td>
<td style="text-align: left;">3.0.42</td>
</tr>
<tr class="odd">
<td style="text-align: left;">protobuf</td>
<td style="text-align: left;">4.25.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">psutil</td>
<td style="text-align: left;">5.9.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ptyprocess</td>
<td style="text-align: left;">0.7.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pure-eval</td>
<td style="text-align: left;">0.2.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">py7zr</td>
<td style="text-align: left;">0.20.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyarrow</td>
<td style="text-align: left;">15.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyarrow-hotfix</td>
<td style="text-align: left;">0.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyasn1</td>
<td style="text-align: left;">0.5.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyasn1-modules</td>
<td style="text-align: left;">0.3.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pybcj</td>
<td style="text-align: left;">1.0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pycodestyle</td>
<td style="text-align: left;">2.11.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">pycosat</td>
<td style="text-align: left;">0.6.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pycparser</td>
<td style="text-align: left;">2.21</td>
</tr>
<tr class="even">
<td style="text-align: left;">pycryptodomex</td>
<td style="text-align: left;">3.20.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pydantic</td>
<td style="text-align: left;">2.7.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">pydantic_core</td>
<td style="text-align: left;">2.18.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyflakes</td>
<td style="text-align: left;">3.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pygments</td>
<td style="text-align: left;">2.17.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PyJWT</td>
<td style="text-align: left;">2.8.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pylint</td>
<td style="text-align: left;">3.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PyNaCl</td>
<td style="text-align: left;">1.5.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pynsee</td>
<td style="text-align: left;">0.1.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyOpenSSL</td>
<td style="text-align: left;">24.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyparsing</td>
<td style="text-align: left;">3.1.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyppmd</td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyproj</td>
<td style="text-align: left;">3.6.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyshp</td>
<td style="text-align: left;">2.3.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">PySocks</td>
<td style="text-align: left;">1.7.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">python-dateutil</td>
<td style="text-align: left;">2.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">python-dotenv</td>
<td style="text-align: left;">1.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">python-magic</td>
<td style="text-align: left;">0.4.27</td>
</tr>
<tr class="even">
<td style="text-align: left;">pytz</td>
<td style="text-align: left;">2024.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyu2f</td>
<td style="text-align: left;">0.1.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">pywaffle</td>
<td style="text-align: left;">1.1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PyYAML</td>
<td style="text-align: left;">6.0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyzmq</td>
<td style="text-align: left;">25.1.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyzstd</td>
<td style="text-align: left;">0.16.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">QtPy</td>
<td style="text-align: left;">2.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">querystring-parser</td>
<td style="text-align: left;">1.2.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">rasterio</td>
<td style="text-align: left;">1.3.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">referencing</td>
<td style="text-align: left;">0.34.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">regex</td>
<td style="text-align: left;">2023.12.25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">requests</td>
<td style="text-align: left;">2.31.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">requests-cache</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">requests-oauthlib</td>
<td style="text-align: left;">2.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">rich</td>
<td style="text-align: left;">13.7.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rpds-py</td>
<td style="text-align: left;">0.18.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">rsa</td>
<td style="text-align: left;">4.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rtree</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ruamel.yaml</td>
<td style="text-align: left;">0.18.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ruamel.yaml.clib</td>
<td style="text-align: left;">0.2.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">s3fs</td>
<td style="text-align: left;">2023.12.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">s3transfer</td>
<td style="text-align: left;">0.10.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">scikit-image</td>
<td style="text-align: left;">0.23.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">scikit-learn</td>
<td style="text-align: left;">1.4.1.post1</td>
</tr>
<tr class="even">
<td style="text-align: left;">scipy</td>
<td style="text-align: left;">1.13.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">seaborn</td>
<td style="text-align: left;">0.13.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">setuptools</td>
<td style="text-align: left;">69.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">shapely</td>
<td style="text-align: left;">2.0.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">shellingham</td>
<td style="text-align: left;">1.5.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">six</td>
<td style="text-align: left;">1.16.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">smart_open</td>
<td style="text-align: left;">7.0.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">smmap</td>
<td style="text-align: left;">5.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">snuggs</td>
<td style="text-align: left;">1.4.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sortedcontainers</td>
<td style="text-align: left;">2.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">soupsieve</td>
<td style="text-align: left;">2.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spacy</td>
<td style="text-align: left;">3.7.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">spacy-legacy</td>
<td style="text-align: left;">3.0.12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spacy-loggers</td>
<td style="text-align: left;">1.0.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">SQLAlchemy</td>
<td style="text-align: left;">2.0.29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sqlparse</td>
<td style="text-align: left;">0.4.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">srsly</td>
<td style="text-align: left;">2.4.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">stack-data</td>
<td style="text-align: left;">0.6.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">statsmodels</td>
<td style="text-align: left;">0.14.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tabulate</td>
<td style="text-align: left;">0.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">tblib</td>
<td style="text-align: left;">3.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tenacity</td>
<td style="text-align: left;">8.2.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">texttable</td>
<td style="text-align: left;">1.7.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">thinc</td>
<td style="text-align: left;">8.2.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">threadpoolctl</td>
<td style="text-align: left;">3.4.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tifffile</td>
<td style="text-align: left;">2024.5.22</td>
</tr>
<tr class="even">
<td style="text-align: left;">tomli</td>
<td style="text-align: left;">2.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tomlkit</td>
<td style="text-align: left;">0.12.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">toolz</td>
<td style="text-align: left;">0.12.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">topojson</td>
<td style="text-align: left;">1.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">tornado</td>
<td style="text-align: left;">6.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tqdm</td>
<td style="text-align: left;">4.66.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">traitlets</td>
<td style="text-align: left;">5.14.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">truststore</td>
<td style="text-align: left;">0.8.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">typer</td>
<td style="text-align: left;">0.12.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">typing_extensions</td>
<td style="text-align: left;">4.11.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">tzdata</td>
<td style="text-align: left;">2024.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Unidecode</td>
<td style="text-align: left;">1.3.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">url-normalize</td>
<td style="text-align: left;">1.4.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">urllib3</td>
<td style="text-align: left;">1.26.18</td>
</tr>
<tr class="even">
<td style="text-align: left;">wasabi</td>
<td style="text-align: left;">1.1.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">wcwidth</td>
<td style="text-align: left;">0.2.13</td>
</tr>
<tr class="even">
<td style="text-align: left;">weasel</td>
<td style="text-align: left;">0.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">webdriver-manager</td>
<td style="text-align: left;">4.0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">websocket-client</td>
<td style="text-align: left;">1.7.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Werkzeug</td>
<td style="text-align: left;">3.0.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">wheel</td>
<td style="text-align: left;">0.43.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">widgetsnbextension</td>
<td style="text-align: left;">4.0.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">wordcloud</td>
<td style="text-align: left;">1.9.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">wrapt</td>
<td style="text-align: left;">1.16.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">xgboost</td>
<td style="text-align: left;">2.0.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">xlrd</td>
<td style="text-align: left;">2.0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">xyzservices</td>
<td style="text-align: left;">2024.4.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yarl</td>
<td style="text-align: left;">1.9.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellowbrick</td>
<td style="text-align: left;">1.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zict</td>
<td style="text-align: left;">3.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">zipp</td>
<td style="text-align: left;">3.17.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zstandard</td>
<td style="text-align: left;">0.22.0</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div></details>
<details>
<summary>
<p>View file history <i class="fa-brands fa-git-alt" aria-label="git-alt"></i></p>
</summary>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb37" data-startfrom="1478" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1477;"><span id="cb37-1478"><a href="#cb37-1478" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Ce fichier a été modifié __</span><span class="sc">${</span>table_commit<span class="op">.</span><span class="at">length</span><span class="sc">}</span><span class="vs">__ fois depuis sa création le </span><span class="sc">${</span>creation_string<span class="sc">}</span><span class="vs"> (dernière modification le </span><span class="sc">${</span>last_modification_string<span class="sc">}</span><span class="vs">)`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb38" data-startfrom="1489" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1488;"><span id="cb38-1489"><a href="#cb38-1489" aria-hidden="true" tabindex="-1"></a>creation <span class="op">=</span> d3<span class="op">.</span><span class="fu">min</span>(</span>
<span id="cb38-1490"><a href="#cb38-1490" aria-hidden="true" tabindex="-1"></a>  table_commit<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(d<span class="op">.</span><span class="at">Date</span>))</span>
<span id="cb38-1491"><a href="#cb38-1491" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-1492"><a href="#cb38-1492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-1493"><a href="#cb38-1493" aria-hidden="true" tabindex="-1"></a>last_modification <span class="op">=</span> d3<span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb38-1494"><a href="#cb38-1494" aria-hidden="true" tabindex="-1"></a>  table_commit<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(d<span class="op">.</span><span class="at">Date</span>))</span>
<span id="cb38-1495"><a href="#cb38-1495" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-1496"><a href="#cb38-1496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-1497"><a href="#cb38-1497" aria-hidden="true" tabindex="-1"></a>creation_string <span class="op">=</span> creation<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">"fr"</span><span class="op">,</span> {</span>
<span id="cb38-1498"><a href="#cb38-1498" aria-hidden="true" tabindex="-1"></a>  <span class="st">"day"</span><span class="op">:</span> <span class="st">"numeric"</span><span class="op">,</span></span>
<span id="cb38-1499"><a href="#cb38-1499" aria-hidden="true" tabindex="-1"></a>  <span class="st">"month"</span><span class="op">:</span> <span class="st">"long"</span><span class="op">,</span></span>
<span id="cb38-1500"><a href="#cb38-1500" aria-hidden="true" tabindex="-1"></a>  <span class="st">"year"</span><span class="op">:</span> <span class="st">"numeric"</span></span>
<span id="cb38-1501"><a href="#cb38-1501" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb38-1502"><a href="#cb38-1502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-1503"><a href="#cb38-1503" aria-hidden="true" tabindex="-1"></a>last_modification_string <span class="op">=</span> last_modification<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">"fr"</span><span class="op">,</span> {</span>
<span id="cb38-1504"><a href="#cb38-1504" aria-hidden="true" tabindex="-1"></a>  <span class="st">"day"</span><span class="op">:</span> <span class="st">"numeric"</span><span class="op">,</span></span>
<span id="cb38-1505"><a href="#cb38-1505" aria-hidden="true" tabindex="-1"></a>  <span class="st">"month"</span><span class="op">:</span> <span class="st">"long"</span><span class="op">,</span></span>
<span id="cb38-1506"><a href="#cb38-1506" aria-hidden="true" tabindex="-1"></a>  <span class="st">"year"</span><span class="op">:</span> <span class="st">"numeric"</span></span>
<span id="cb38-1507"><a href="#cb38-1507" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb39" data-startfrom="1508" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1507;"><span id="cb39-1508"><a href="#cb39-1508" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>git_history_table<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb40" data-startfrom="1523" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1522;"><span id="cb40-1523"><a href="#cb40-1523" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>git_history_plot<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="expression">

</div>
</div>
</div>
<table class="commit-table" border="1">
<thead>
<tr>
<th>
SHA
</th>
<th>
Date
</th>
<th>
Author
</th>
<th>
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/91bfa52">91bfa52</a>
</td>
<td>
2024-05-27 15:01:32
</td>
<td>
Lino Galiana
</td>
<td>
Restructuration partie geopandas (#500)
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/e0d615e">e0d615e</a>
</td>
<td>
2024-05-03 11:15:29
</td>
<td>
Lino Galiana
</td>
<td>
Restructure la partie Pandas (#497)
</td>
</tr>
</tbody>
</table>
</details>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb41" data-startfrom="1538" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1537;"><span id="cb41-1538"><a href="#cb41-1538" aria-hidden="true" tabindex="-1"></a>git_history_table <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">table</span>(</span>
<span id="cb41-1539"><a href="#cb41-1539" aria-hidden="true" tabindex="-1"></a>  table_commit<span class="op">,</span></span>
<span id="cb41-1540"><a href="#cb41-1540" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb41-1541"><a href="#cb41-1541" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb41-1542"><a href="#cb41-1542" aria-hidden="true" tabindex="-1"></a>      <span class="dt">SHA</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">md</span><span class="vs">`[</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">](</span><span class="sc">${</span>github_repo<span class="sc">}</span><span class="vs">/commit/</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">)`</span><span class="op">,</span></span>
<span id="cb41-1543"><a href="#cb41-1543" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Description</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span><span class="fu">replacePullRequestPattern</span>(x<span class="op">,</span> github_repo)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb41-1544"><a href="#cb41-1544" aria-hidden="true" tabindex="-1"></a>      <span class="co">/*Date: x =&gt; x.toLocaleString("fr", {</span></span>
<span id="cb41-1545"><a href="#cb41-1545" aria-hidden="true" tabindex="-1"></a><span class="co">        "month": "numeric",</span></span>
<span id="cb41-1546"><a href="#cb41-1546" aria-hidden="true" tabindex="-1"></a><span class="co">        "day": "numeric",</span></span>
<span id="cb41-1547"><a href="#cb41-1547" aria-hidden="true" tabindex="-1"></a><span class="co">        "year": "numeric"</span></span>
<span id="cb41-1548"><a href="#cb41-1548" aria-hidden="true" tabindex="-1"></a><span class="co">        })</span></span>
<span id="cb41-1549"><a href="#cb41-1549" aria-hidden="true" tabindex="-1"></a><span class="co">      */</span></span>
<span id="cb41-1550"><a href="#cb41-1550" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb41-1551"><a href="#cb41-1551" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-1552"><a href="#cb41-1552" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb42" data-startfrom="1543" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1542;"><span id="cb42-1543"><a href="#cb42-1543" aria-hidden="true" tabindex="-1"></a>git_history_plot <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb42-1544"><a href="#cb42-1544" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb42-1545"><a href="#cb42-1545" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"royalblue"</span>})<span class="op">,</span></span>
<span id="cb42-1546"><a href="#cb42-1546" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb42-1547"><a href="#cb42-1547" aria-hidden="true" tabindex="-1"></a>          table_commit<span class="op">,</span></span>
<span id="cb42-1548"><a href="#cb42-1548" aria-hidden="true" tabindex="-1"></a>          Plot<span class="op">.</span><span class="fu">pointerX</span>({<span class="dt">x</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(d<span class="op">.</span><span class="at">date</span>)<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"red"</span>}))<span class="op">,</span></span>
<span id="cb42-1549"><a href="#cb42-1549" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(table_commit<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(d<span class="op">.</span><span class="at">Date</span>)<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"royalblue"</span>})</span>
<span id="cb42-1550"><a href="#cb42-1550" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb42-1551"><a href="#cb42-1551" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb43" data-startfrom="1581" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1580;"><span id="cb43-1581"><a href="#cb43-1581" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">replacePullRequestPattern</span>(inputString<span class="op">,</span> githubRepo) {</span>
<span id="cb43-1582"><a href="#cb43-1582" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Use a regular expression to match the pattern #digit</span></span>
<span id="cb43-1583"><a href="#cb43-1583" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> pattern <span class="op">=</span> <span class="ss">/#</span><span class="sc">(\d+)</span><span class="ss">/g</span><span class="op">;</span></span>
<span id="cb43-1584"><a href="#cb43-1584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-1585"><a href="#cb43-1585" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Replace the pattern with ${github_repo}/pull/#digit</span></span>
<span id="cb43-1586"><a href="#cb43-1586" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> replacedString <span class="op">=</span> inputString<span class="op">.</span><span class="fu">replace</span>(pattern<span class="op">,</span> <span class="st">'[#$1]('</span> <span class="op">+</span> githubRepo <span class="op">+</span> <span class="st">'/pull/$1)'</span>)<span class="op">;</span></span>
<span id="cb43-1587"><a href="#cb43-1587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-1588"><a href="#cb43-1588" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> replacedString<span class="op">;</span></span>
<span id="cb43-1589"><a href="#cb43-1589" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb44" data-startfrom="1597" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1596;"><span id="cb44-1597"><a href="#cb44-1597" aria-hidden="true" tabindex="-1"></a>github_repo <span class="op">=</span> <span class="st">"https://github.com/linogaliana/python-datascientist"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb45" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb45-0"><a href="#cb45-0" aria-hidden="true" tabindex="-1"></a>table_commit <span class="op">=</span> {</span>
<span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Get the HTML table by its class name</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> table <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">'.commit-table'</span>)<span class="op">;</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Check if the table exists</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (table) {</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initialize an array to store the table data</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> dataArray <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Extract headers from the first row</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> headers <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> table<span class="op">.</span><span class="at">rows</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">cells</span><span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">.</span><span class="fu">push</span>(table<span class="op">.</span><span class="at">rows</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">cells</span>[i]<span class="op">.</span><span class="at">textContent</span><span class="op">.</span><span class="fu">trim</span>())<span class="op">;</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Iterate through the rows, starting from the second row</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> table<span class="op">.</span><span class="at">rows</span><span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> row <span class="op">=</span> table<span class="op">.</span><span class="at">rows</span>[i]<span class="op">;</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> rowData <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Iterate through the cells in the row</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> row<span class="op">.</span><span class="at">cells</span><span class="op">.</span><span class="at">length</span><span class="op">;</span> j<span class="op">++</span>) {</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Use headers as keys and cell content as values</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>            rowData[headers[j]] <span class="op">=</span> row<span class="op">.</span><span class="at">cells</span>[j]<span class="op">.</span><span class="at">textContent</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Push the rowData object to the dataArray</span></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>        dataArray<span class="op">.</span><span class="fu">push</span>(rowData)<span class="op">;</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dataArray</span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb46" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Get the element with class 'git-details'</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> gitDetails <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">'.commit-table'</span>)<span class="op">;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Check if the element exists</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (gitDetails) {</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Hide the element</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>      gitDetails<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> <span class="st">'none'</span><span class="op">;</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-13" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb47" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb47-0"><a href="#cb47-0" aria-hidden="true" tabindex="-1"></a>Plot <span class="op">=</span> <span class="pp">require</span>(<span class="st">'@observablehq/plot@0.6.12/dist/plot.umd.min.js'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
</div>
</div>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">Structuration d’un <em>DataFrame</em> <code>Pandas</code>,
empruntée à <a href="https://medium.com/epfl-extension-school/selecting-data-from-a-pandas-dataframe-53917dc39953" class="uri">https://medium.com/epfl-extension-school/selecting-data-from-a-pandas-dataframe-53917dc39953</a></span>
<span class="glightbox-desc lightbox-desc-2">Illustration du concept de <em>tidy data</em> (emprunté à H. Wickham)</span>
<span class="glightbox-desc lightbox-desc-3">Réordonner le <em>DataFrame</em></span>
</div>
</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>L’écosystème équivalent en <code>R</code>, le <a href=""><code>tidyverse</code></a>, développé
par <em>Posit</em>, est de conception plus récente que <code>Pandas</code>. Sa philosophie
a ainsi pu s’inspirer de celle de <code>Pandas</code> tout en pouvant remédier à quelques limites
de la syntaxe <code>Pandas</code>. Les deux syntaxes étant une mise en oeuvre en <code>Python</code> ou <code>R</code>
de la philosophie <code>SQL</code>, il est naturel qu’elles se ressemblent beaucoup et
qu’il soit pertinent pour les <em>data scientists</em> de connaître les deux langages.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>A vrai dire, ce n’est pas l’empreinte carbone
mais l’<strong>inventaire national</strong>
puisque la base de données correspond à une vision production,
pas consommation. Les émissions faites dans une commune pour satisfaire
la consommation d’une autre seront imputées à la première là
où le concept d’empreinte carbone voudrait qu’on l’impute
aux secondes. De plus, les émissions présentées ici ne comportent pas
les émissions produites par des biais produits à l’étranger. Il ne s’agit pas, avec cet exercice, de construire une
statistique fiable mais plutôt de comprendre la logique de
l’association de données pour construire des statistiques descriptives.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>L’objectif originel de <code>Pandas</code> est de fournir une librairie haut-niveau vers des couches basses plus abstraites que sont les <em>array</em> <code>Numpy</code>. <code>Pandas</code> est progressivement en train de changer ces couches basses pour privilégier <code>Arrow</code> à <code>Numpy</code>
sans déstabiliser les commandes haut-niveau auxquelles les utilisateurs de <code>Pandas</code> sont habitués. Ce changement s’explique par le fait qu’<code>Arrow</code>, une librairie bas niveau de calcul, est plus puissante et plus flexible que <code>Numpy</code>. Cette dernière, par exemple, propose des types textuels limités là où <code>Arrow</code> offre une plus grande liberté.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Par manque d’imagination, on est souvent tenté d’appeler notre
<em>dataframe</em> principal <code>df</code> ou <code>data</code>. C’est souvent une mauvaise idée puisque
ce nom n’est pas très informatif quand on relit le code quelques semaines
plus tard. L’autodocumentation, approche qui consiste à avoir un code
qui se comprend de lui-même, est une bonne pratique et il est donc recommandé
de donner un nom simple mais efficace pour connaître la nature du <em>dataset</em> en question.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@book{galiana2023,
  author = {Galiana, Lino},
  title = {Python Pour La Data Science},
  date = {2023},
  url = {https://pythonds.linogaliana.fr/},
  doi = {10.5281/zenodo.8229676},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-galiana2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Galiana, Lino. 2023. <em>Python Pour La Data Science</em>. <a href="https://doi.org/10.5281/zenodo.8229676">https://doi.org/10.5281/zenodo.8229676</a>.
</div></div></section></div></main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShcIi5odG1sXCIsIFwiLnFtZFwiKTtcbmh0bWxgJHtwcmludEJhZGdlcyh7ZnBhdGg6IHBhdGh9KX1gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJodG1sYFxuPGRldGFpbHM+XG48c3VtbWFyeT5cblBvdXIgb3V2cmlyIGxhIHZlcnNpb24gY29ycmlnw6llIHNvdXMgZm9ybWUgZGUgPGk+bm90ZWJvb2s8L2k+XG48L3N1bW1hcnk+XG4ke3ByaW50QmFkZ2VzKHtmcGF0aDogcGF0aCwgY29ycmVjdGlvbjogdHJ1ZX0pfVxuPC9kZXRhaWxzPlxuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gcmVtaW5kZXJCYWRnZXMoe1xuICAgIHNvdXJjZUZpbGUgPSBcImNvbnRlbnQvMDFfdG90by5SbWRcIixcbiAgICB0eXBlID0gWydtZCcsICdodG1sJ10sXG4gICAgc3BsaXQgPSBudWxsLFxuICAgIG9ueXhpYU9ubHkgPSBmYWxzZSxcbiAgICBzc3BDbG91ZFNlcnZpY2UgPSBcInB5dGhvblwiLFxuICAgIEdQVSA9IGZhbHNlLFxuICAgIGNvcnJlY3Rpb24gPSBmYWxzZVxufSA9IHt9KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgdHlwZSA9IHR5cGVbMF07XG4gICAgfVxuXG4gICAgbGV0IG5vdGVib29rID0gc291cmNlRmlsZS5yZXBsYWNlKC8oLlJtZHwucW1kKS8sIFwiLmlweW5iXCIpO1xuICAgIGlmIChjb3JyZWN0aW9uKSB7XG4gICAgICAgIG5vdGVib29rID0gbm90ZWJvb2sucmVwbGFjZSgvY29udGVudC8sIFwiY29ycmVjdGlvbnNcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbm90ZWJvb2sgPSBub3RlYm9vay5yZXBsYWNlKC9jb250ZW50LywgXCJub3RlYm9va3NcIik7XG4gICAgfVxuXG4gICAgY29uc3QgZ2l0aHViUmVwb05vdGVib29rc1NpbXBsaWZpZWQgPSBcImdpdGh1Yi9saW5vZ2FsaWFuYS9weXRob24tZGF0YXNjaWVudGlzdC1ub3RlYm9va3NcIjtcbiAgICBjb25zdCBnaXRodWJBbGlhcyA9IGdpdGh1YlJlcG9Ob3RlYm9va3NTaW1wbGlmaWVkLnJlcGxhY2UoXCJnaXRodWJcIiwgXCJnaXRodWIuY29tXCIpO1xuICAgIGNvbnN0IGdpdGh1YlJlcG9Ob3RlYm9va3MgPSBgaHR0cHM6Ly8ke2dpdGh1YkFsaWFzfWA7XG5cbiAgICBsZXQgZ2l0aHViTGluayA7XG5cbiAgICBpZiAobm90ZWJvb2sgPT09IFwiXCIpIHtcbiAgICAgICAgZ2l0aHViTGluayA9IGdpdGh1YlJlcG9Ob3RlYm9va3M7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZ2l0aHViTGluayA9IGAke2dpdGh1YlJlcG9Ob3RlYm9va3N9L2Jsb2IvbWFpbmA7XG4gICAgfVxuXG4gICAgY29uc3Qgbm90ZWJvb2tSZWxQYXRoID0gYC8ke25vdGVib29rfWA7XG4gICAgY29uc3QgW3NlY3Rpb24sIGNoYXB0ZXJdID0gbm90ZWJvb2suc3BsaXQoXCIvXCIpLnNsaWNlKC0yKTtcblxuXG4gICAgZ2l0aHViTGluayA9IGA8YSBocmVmPVwiJHtnaXRodWJMaW5rfSR7bm90ZWJvb2tSZWxQYXRofVwiIGNsYXNzPVwiZ2l0aHViXCI+PGkgY2xhc3M9XCJmYWIgZmEtZ2l0aHViXCI+PC9pPjwvYT5gO1xuXG4gICAgY29uc3Qgc2VjdGlvbkxhdGVzdCA9IHNlY3Rpb24uc3BsaXQoXCIvXCIpLnNsaWNlKC0xKVswXTtcbiAgICBjb25zdCBjaGFwdGVyTm9FeHRlbnNpb24gPSBjaGFwdGVyLnJlcGxhY2UoXCIuaXB5bmJcIiwgXCJcIik7XG4gICAgY29uc3Qgb255eGlhSW5pdEFyZ3MgPSBbc2VjdGlvbkxhdGVzdCwgY2hhcHRlck5vRXh0ZW5zaW9uXTtcblxuICAgIGlmIChjb3JyZWN0aW9uKSB7XG4gICAgICAgIG9ueXhpYUluaXRBcmdzLnB1c2goXCJjb3JyZWN0aW9uXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGdwdVN1ZmZpeCA9IEdQVSA/IFwiLWdwdVwiIDogXCJcIjtcblxuICAgIGNvbnN0IHNzcGNsb3VkSnVweXRlckxpbmtMYXVuY2hlciA9IGBodHRwczovL2RhdGFsYWIuc3NwY2xvdWQuZnIvbGF1bmNoZXIvaWRlL2p1cHl0ZXItJHtzc3BDbG91ZFNlcnZpY2V9JHtncHVTdWZmaXh9P2F1dG9MYXVuY2g9dHJ1ZSZvbnl4aWEuZnJpZW5kbHlOYW1lPSVDMiVBQiR7Y2hhcHRlck5vRXh0ZW5zaW9ufSVDMiVCQiZpbml0LnBlcnNvbmFsSW5pdD0lQzIlQUJodHRwcyUzQSUyRiUyRnJhdy5naXRodWJ1c2VyY29udGVudC5jb20lMkZsaW5vZ2FsaWFuYSUyRnB5dGhvbi1kYXRhc2NpZW50aXN0JTJGbWFzdGVyJTJGc3NwY2xvdWQlMkZpbml0LWp1cHl0ZXIuc2glQzIlQkImaW5pdC5wZXJzb25hbEluaXRBcmdzPSVDMiVBQiR7b255eGlhSW5pdEFyZ3Muam9pbignJTIwJyl9JUMyJUJCJnNlY3VyaXR5LmFsbG93bGlzdC5lbmFibGVkPWZhbHNlYDtcblxuICAgIGxldCBzc3BjbG91ZEp1cHl0ZXJMaW5rO1xuICAgIGlmICh0eXBlID09PSBcIm1kXCIpIHtcbiAgICAgICAgc3NwY2xvdWRKdXB5dGVyTGluayA9IGBbIVtPbnl4aWFdKGh0dHBzOi8vaW1nLnNoaWVsZHMuaW8vYmFkZ2UvU1NQJTIwQ2xvdWQtVGVzdGVyX2F2ZWNfSnVweXRlci1vcmFuZ2U/bG9nbz1KdXB5dGVyJmxvZ29Db2xvcj1vcmFuZ2UpXSgke3NzcGNsb3VkSnVweXRlckxpbmtMYXVuY2hlcn0pYDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzc3BjbG91ZEp1cHl0ZXJMaW5rID0gYDxhIGhyZWY9XCIke3NzcGNsb3VkSnVweXRlckxpbmtMYXVuY2hlcn1cIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lclwiPjxpbWcgc3JjPVwiaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9TU1AlMjBDbG91ZC1UZXN0ZXJfYXZlY19KdXB5dGVyLW9yYW5nZT9sb2dvPUp1cHl0ZXImbG9nb0NvbG9yPW9yYW5nZVwiIGFsdD1cIk9ueXhpYVwiPjwvYT5gO1xuICAgIH1cblxuICAgIGlmIChzcGxpdCA9PT0gNCkge1xuICAgICAgICBzc3BjbG91ZEp1cHl0ZXJMaW5rICs9ICc8YnI+JztcbiAgICB9XG5cbiAgICBjb25zdCBzc3BjbG91ZFZzY29kZUxpbmtMYXVuY2hlciA9IGBodHRwczovL2RhdGFsYWIuc3NwY2xvdWQuZnIvbGF1bmNoZXIvaWRlL3ZzY29kZS0ke3NzcENsb3VkU2VydmljZX0ke2dwdVN1ZmZpeH0/YXV0b0xhdW5jaD10cnVlJm9ueXhpYS5mcmllbmRseU5hbWU9JUMyJUFCJHtjaGFwdGVyTm9FeHRlbnNpb259JUMyJUJCJmluaXQucGVyc29uYWxJbml0PSVDMiVBQmh0dHBzJTNBJTJGJTJGcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSUyRmxpbm9nYWxpYW5hJTJGcHl0aG9uLWRhdGFzY2llbnRpc3QlMkZtYXN0ZXIlMkZzc3BjbG91ZCUyRmluaXQtdnNjb2RlLnNoJUMyJUJCJmluaXQucGVyc29uYWxJbml0QXJncz0lQzIlQUIke29ueXhpYUluaXRBcmdzLmpvaW4oJyUyMCcpfSVDMiVCQiZzZWN1cml0eS5hbGxvd2xpc3QuZW5hYmxlZD1mYWxzZWA7XG5cbiAgICBsZXQgc3NwY2xvdWRWc2NvZGVMaW5rO1xuICAgIGlmICh0eXBlID09PSBcIm1kXCIpIHtcbiAgICAgICAgc3NwY2xvdWRWc2NvZGVMaW5rID0gYFshW09ueXhpYV0oaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9TU1AlMjBDbG91ZC1UZXN0ZXJfYXZlY19WU0NvZGUtYmx1ZT9sb2dvPXZpc3VhbHN0dWRpb2NvZGUmbG9nb0NvbG9yPWJsdWUpXSgke3NzcGNsb3VkVnNjb2RlTGlua0xhdW5jaGVyfSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNzcGNsb3VkVnNjb2RlTGluayA9IGA8YSBocmVmPVwiJHtzc3BjbG91ZFZzY29kZUxpbmtMYXVuY2hlcn1cIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lclwiPjxpbWcgc3JjPVwiaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9TU1AlMjBDbG91ZC1UZXN0ZXJfYXZlY19WU0NvZGUtYmx1ZT9sb2dvPXZpc3VhbHN0dWRpb2NvZGUmbG9nb0NvbG9yPWJsdWVcIiBhbHQ9XCJPbnl4aWFcIj48L2E+YDtcbiAgICB9XG5cbiAgICBpZiAoc3BsaXQgPT09IDUpIHtcbiAgICAgICAgc3NwY2xvdWRWc2NvZGVMaW5rICs9ICc8YnI+JztcbiAgICB9XG5cbiAgICBsZXQgY29sYWJMaW5rO1xuICAgIGlmICh0eXBlID09PSBcIm1kXCIpIHtcbiAgICAgICAgY29sYWJMaW5rID0gYFshW09wZW4gSW4gQ29sYWJdKGh0dHBzOi8vY29sYWIucmVzZWFyY2guZ29vZ2xlLmNvbS9hc3NldHMvY29sYWItYmFkZ2Uuc3ZnKV0oaHR0cDovL2NvbGFiLnJlc2VhcmNoLmdvb2dsZS5jb20vJHtnaXRodWJSZXBvTm90ZWJvb2tzU2ltcGxpZmllZH0vYmxvYi9tYWluJHtub3RlYm9va1JlbFBhdGh9KWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29sYWJMaW5rID0gYDxhIGhyZWY9XCJodHRwczovL2NvbGFiLnJlc2VhcmNoLmdvb2dsZS5jb20vJHtnaXRodWJSZXBvTm90ZWJvb2tzU2ltcGxpZmllZH0vYmxvYi9tYWluJHtub3RlYm9va1JlbFBhdGh9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXJcIj48aW1nIHNyYz1cImh0dHBzOi8vY29sYWIucmVzZWFyY2guZ29vZ2xlLmNvbS9hc3NldHMvY29sYWItYmFkZ2Uuc3ZnXCIgYWx0PVwiT3BlbiBJbiBDb2xhYlwiPjwvYT5gO1xuICAgIH1cblxuICAgIGlmIChzcGxpdCA9PT0gNykge1xuICAgICAgICBjb2xhYkxpbmsgKz0gJzxicj4nO1xuICAgIH1cblxuICAgIGxldCB2c2NvZGVMaW5rO1xuICAgIGlmICh0eXBlID09PSBcIm1kXCIpIHtcbiAgICAgICAgdnNjb2RlTGluayA9IGBbIVtnaXRodWJkZXZdKGh0dHBzOi8vaW1nLnNoaWVsZHMuaW8vc3RhdGljL3YxP2xvZ289dmlzdWFsc3R1ZGlvY29kZSZsYWJlbD0mbWVzc2FnZT1PcGVuJTIwaW4lMjBWaXN1YWwgU3R1ZGlvIENvZGUmbGFiZWxDb2xvcj0yYzJjMzImY29sb3I9MDA3YWNjJmxvZ29Db2xvcj0wMDdhY2MpXShodHRwczovL2dpdGh1Yi5kZXYvbGlub2dhbGlhbmEvcHl0aG9uLWRhdGFzY2llbnRpc3Qtbm90ZWJvb2tzJHtub3RlYm9va1JlbFBhdGh9KWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdnNjb2RlTGluayA9IGA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuZGV2L2xpbm9nYWxpYW5hL3B5dGhvbi1kYXRhc2NpZW50aXN0LW5vdGVib29rcyR7bm90ZWJvb2tSZWxQYXRofVwiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyXCI+PGltZyBzcmM9XCJodHRwczovL2ltZy5zaGllbGRzLmlvL3N0YXRpYy92MT9sb2dvPXZpc3VhbHN0dWRpb2NvZGUmbGFiZWw9Jm1lc3NhZ2U9T3BlbiUyMGluJTIwVmlzdWFsJTIwU3R1ZGlvJTIwQ29kZSZsYWJlbENvbG9yPTJjMmMzMiZjb2xvcj0wMDdhY2MmbG9nb0NvbG9yPTAwN2FjY1wiIGFsdD1cImdpdGh1YmRldlwiPjwvYT48L3A+YDtcbiAgICB9XG5cbiAgICBjb25zdCBiYWRnZXMgPSBbXG4gICAgICAgIGdpdGh1YkxpbmssXG4gICAgICAgIHNzcGNsb3VkVnNjb2RlTGluayxcbiAgICAgICAgc3NwY2xvdWRKdXB5dGVyTGlua1xuICAgIF07XG5cbiAgICBpZiAoIW9ueXhpYU9ubHkpIHtcbiAgICAgICAgYmFkZ2VzLnB1c2goY29sYWJMaW5rKTtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0ID0gYmFkZ2VzLmpvaW4oXCJcXG5cIik7XG5cbiAgICBpZiAodHlwZSA9PT0gXCJodG1sXCIpIHtcbiAgICAgICAgcmVzdWx0ID0gYDxwIGNsYXNzPVwiYmFkZ2VzXCI+JHtyZXN1bHR9PC9wPmA7XG4gICAgfVxuXG4gICAgaWYgKG9ueXhpYU9ubHkpIHtcbiAgICAgICAgcmVzdWx0ID0gYCR7c3NwY2xvdWRKdXB5dGVyTGlua30ke3NzcGNsb3VkVnNjb2RlTGlua31gO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gcHJpbnRCYWRnZXMoe1xuICAgIGZwYXRoLFxuICAgIG9ueXhpYU9ubHkgPSBmYWxzZSxcbiAgICBzcGxpdCA9IDUsXG4gICAgdHlwZSA9IFwiaHRtbFwiLFxuICAgIHNzcENsb3VkU2VydmljZSA9IFwicHl0aG9uXCIsXG4gICAgR1BVID0gZmFsc2UsXG4gICAgY29ycmVjdGlvbiA9IGZhbHNlXG59ID0ge30pIHtcbiAgICBjb25zdCBiYWRnZXMgPSByZW1pbmRlckJhZGdlcyh7XG4gICAgICAgIHNvdXJjZUZpbGU6IGZwYXRoLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBzcGxpdDogc3BsaXQsXG4gICAgICAgIG9ueXhpYU9ubHk6IG9ueXhpYU9ubHksXG4gICAgICAgIHNzcENsb3VkU2VydmljZTogc3NwQ2xvdWRTZXJ2aWNlLFxuICAgICAgICBHUFU6IEdQVSxcbiAgICAgICAgY29ycmVjdGlvbjogY29ycmVjdGlvblxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGJhZGdlc1xufVxuXG4vLyBFeGFtcGxlIHVzYWdlOlxuLy8gcHJpbnRCYWRnZXMoeyBmcGF0aDogXCJjb250ZW50L2dldHRpbmctc3RhcnRlZC8wNV9yYXBwZWxzX3R5cGVzLnFtZFwiLCBvbnl4aWFPbmx5OiBmYWxzZSwgc3BsaXQ6IDUsIHR5cGU6IFwiaHRtbFwiLCBzc3BDbG91ZFNlcnZpY2U6IFwicHl0aG9uXCIsIEdQVTogZmFsc2UsIGNvcnJlY3Rpb246IGZhbHNlIH0pO1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgQ2UgZmljaGllciBhIMOpdMOpIG1vZGlmacOpIF9fJHt0YWJsZV9jb21taXQubGVuZ3RofV9fIGZvaXMgZGVwdWlzIHNhIGNyw6lhdGlvbiBsZSAke2NyZWF0aW9uX3N0cmluZ30gKGRlcm5pw6hyZSBtb2RpZmljYXRpb24gbGUgJHtsYXN0X21vZGlmaWNhdGlvbl9zdHJpbmd9KWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImNyZWF0aW9uID0gZDMubWluKFxuICB0YWJsZV9jb21taXQubWFwKGQgPT4gbmV3IERhdGUoZC5EYXRlKSlcbilcblxubGFzdF9tb2RpZmljYXRpb24gPSBkMy5tYXgoXG4gIHRhYmxlX2NvbW1pdC5tYXAoZCA9PiBuZXcgRGF0ZShkLkRhdGUpKVxuKVxuXG5jcmVhdGlvbl9zdHJpbmcgPSBjcmVhdGlvbi50b0xvY2FsZVN0cmluZyhcImZyXCIsIHtcbiAgXCJkYXlcIjogXCJudW1lcmljXCIsXG4gIFwibW9udGhcIjogXCJsb25nXCIsXG4gIFwieWVhclwiOiBcIm51bWVyaWNcIlxufSlcblxubGFzdF9tb2RpZmljYXRpb25fc3RyaW5nID0gbGFzdF9tb2RpZmljYXRpb24udG9Mb2NhbGVTdHJpbmcoXCJmclwiLCB7XG4gIFwiZGF5XCI6IFwibnVtZXJpY1wiLFxuICBcIm1vbnRoXCI6IFwibG9uZ1wiLFxuICBcInllYXJcIjogXCJudW1lcmljXCJcbn0pXG5cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Imh0bWxgPGRpdj4ke2dpdF9oaXN0b3J5X3RhYmxlfTwvZGl2PmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Imh0bWxgPGRpdj4ke2dpdF9oaXN0b3J5X3Bsb3R9PC9kaXY+YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZ2l0X2hpc3RvcnlfdGFibGUgPSBJbnB1dHMudGFibGUoXG4gIHRhYmxlX2NvbW1pdCxcbiAge1xuICAgIGZvcm1hdDoge1xuICAgICAgU0hBOiB4ID0+IG1kYFske3h9XSgke2dpdGh1Yl9yZXBvfS9jb21taXQvJHt4fSlgLFxuICAgICAgRGVzY3JpcHRpb246IHggPT4gbWRgJHtyZXBsYWNlUHVsbFJlcXVlc3RQYXR0ZXJuKHgsIGdpdGh1Yl9yZXBvKX1gLFxuICAgICAgLypEYXRlOiB4ID0+IHgudG9Mb2NhbGVTdHJpbmcoXCJmclwiLCB7XG4gICAgICAgIFwibW9udGhcIjogXCJudW1lcmljXCIsXG4gICAgICAgIFwiZGF5XCI6IFwibnVtZXJpY1wiLFxuICAgICAgICBcInllYXJcIjogXCJudW1lcmljXCJcbiAgICAgICAgfSlcbiAgICAgICovXG4gICAgfVxuICB9XG4pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJnaXRfaGlzdG9yeV9wbG90ID0gUGxvdC5wbG90KHtcbiAgbWFya3M6IFtcbiAgICBQbG90LnJ1bGVZKFswXSwge3N0cm9rZTogXCJyb3lhbGJsdWVcIn0pLFxuICAgIFBsb3QuZG90KFxuICAgICAgICAgIHRhYmxlX2NvbW1pdCxcbiAgICAgICAgICBQbG90LnBvaW50ZXJYKHt4OiAoZCkgPT4gbmV3IERhdGUoZC5kYXRlKSwgeTogMCwgc3Ryb2tlOiBcInJlZFwifSkpLFxuICAgIFBsb3QuZG90KHRhYmxlX2NvbW1pdCwge3g6IChkKSA9PiBuZXcgRGF0ZShkLkRhdGUpLCB5OiAwLCBmaWxsOiBcInJveWFsYmx1ZVwifSlcbiAgXVxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmdW5jdGlvbiByZXBsYWNlUHVsbFJlcXVlc3RQYXR0ZXJuKGlucHV0U3RyaW5nLCBnaXRodWJSZXBvKSB7XG4gICAgLy8gVXNlIGEgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIHRoZSBwYXR0ZXJuICNkaWdpdFxuICAgIHZhciBwYXR0ZXJuID0gLyMoXFxkKykvZztcblxuICAgIC8vIFJlcGxhY2UgdGhlIHBhdHRlcm4gd2l0aCAke2dpdGh1Yl9yZXBvfS9wdWxsLyNkaWdpdFxuICAgIHZhciByZXBsYWNlZFN0cmluZyA9IGlucHV0U3RyaW5nLnJlcGxhY2UocGF0dGVybiwgJ1sjJDFdKCcgKyBnaXRodWJSZXBvICsgJy9wdWxsLyQxKScpO1xuXG4gICAgcmV0dXJuIHJlcGxhY2VkU3RyaW5nO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImdpdGh1Yl9yZXBvID0gXCJodHRwczovL2dpdGh1Yi5jb20vbGlub2dhbGlhbmEvcHl0aG9uLWRhdGFzY2llbnRpc3RcIlxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InRhYmxlX2NvbW1pdCA9IHtcblxuLy8gR2V0IHRoZSBIVE1MIHRhYmxlIGJ5IGl0cyBjbGFzcyBuYW1lXG52YXIgdGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tbWl0LXRhYmxlJyk7XG5cbi8vIENoZWNrIGlmIHRoZSB0YWJsZSBleGlzdHNcbmlmICh0YWJsZSkge1xuICAgIC8vIEluaXRpYWxpemUgYW4gYXJyYXkgdG8gc3RvcmUgdGhlIHRhYmxlIGRhdGFcbiAgICB2YXIgZGF0YUFycmF5ID0gW107XG5cbiAgICAvLyBFeHRyYWN0IGhlYWRlcnMgZnJvbSB0aGUgZmlyc3Qgcm93XG4gICAgdmFyIGhlYWRlcnMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYmxlLnJvd3NbMF0uY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaGVhZGVycy5wdXNoKHRhYmxlLnJvd3NbMF0uY2VsbHNbaV0udGV4dENvbnRlbnQudHJpbSgpKTtcbiAgICB9XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHJvd3MsIHN0YXJ0aW5nIGZyb20gdGhlIHNlY29uZCByb3dcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRhYmxlLnJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJvdyA9IHRhYmxlLnJvd3NbaV07XG4gICAgICAgIHZhciByb3dEYXRhID0ge307XG5cbiAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHRoZSBjZWxscyBpbiB0aGUgcm93XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93LmNlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAvLyBVc2UgaGVhZGVycyBhcyBrZXlzIGFuZCBjZWxsIGNvbnRlbnQgYXMgdmFsdWVzXG4gICAgICAgICAgICByb3dEYXRhW2hlYWRlcnNbal1dID0gcm93LmNlbGxzW2pdLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFB1c2ggdGhlIHJvd0RhdGEgb2JqZWN0IHRvIHRoZSBkYXRhQXJyYXlcbiAgICAgICAgZGF0YUFycmF5LnB1c2gocm93RGF0YSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRhdGFBcnJheVxuXG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEzIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiXG4vLyBHZXQgdGhlIGVsZW1lbnQgd2l0aCBjbGFzcyAnZ2l0LWRldGFpbHMnXG57XG4gIHZhciBnaXREZXRhaWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbW1pdC10YWJsZScpO1xuXG4gIC8vIENoZWNrIGlmIHRoZSBlbGVtZW50IGV4aXN0c1xuICBpZiAoZ2l0RGV0YWlscykge1xuICAgICAgLy8gSGlkZSB0aGUgZWxlbWVudFxuICAgICAgZ2l0RGV0YWlscy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiUGxvdCA9IHJlcXVpcmUoJ0BvYnNlcnZhYmxlaHEvcGxvdEAwLjYuMTIvZGlzdC9wbG90LnVtZC5taW4uanMnKVxuIn1dfQ==
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../content/manipulation";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/pythonds\.linogaliana\.fr");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="linogaliana/python-datascientist" data-repo-id="MDEwOlJlcG9zaXRvcnkyODAxNjE2Nzc=" data-category="General" data-category-id="DIC_kwDOELLtjc4B-5TX" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/manipulation/01_numpy.html" class="pagination-link" aria-label="Numpy, la brique de base de la data science">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Numpy, la brique de base de la data science</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/manipulation/02_pandas_suite.html" class="pagination-link" aria-label="Statistiques par groupe et association de plusieurs jeux de données avec Pandas">
        <span class="nav-page-text">Statistiques par groupe et association de plusieurs jeux de données avec Pandas</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Python pour la <em>data science</em>, Lino Galiana.<br>
Licence <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i><br>
Code source disponible sur <a href="https://github.com/linogaliana/python-datascientist"><code>Github</code></a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/linogaliana/python-datascientist/edit/master/content/manipulation/02_pandas_intro.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/linogaliana/python-datascientist/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Site construit avec <i class="fa-brands fa-python" aria-label="python"></i> et <a href="https://quarto.org/"><code>Quarto</code></a><br>
Inspiration pour la mise en forme du site <a href="https://www.andreashandel.com">ici</a><br>
<a href="https://github.com/linogaliana/python-datascientist">Code source disponible sur <i class="fa-brands fa-github" aria-label="github"></i> <code>GitHub</code></a></p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"loop":false,"openEffect":"zoom","descPosition":"bottom","selector":".lightbox","closeEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>